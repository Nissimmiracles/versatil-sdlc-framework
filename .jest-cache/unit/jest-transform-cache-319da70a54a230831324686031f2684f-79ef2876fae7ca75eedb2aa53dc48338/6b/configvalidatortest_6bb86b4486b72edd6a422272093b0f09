4470db74eba8359720ab2fa072f63c27
"use strict";
/**
 * Test Suite: ConfigValidator
 * Tests for v3.0.0 configuration validation and sanitization
 * Target: 90%+ coverage
 */
Object.defineProperty(exports, "__esModule", { value: true });
const config_validator_1 = require("../../../src/config/config-validator");
describe('ConfigValidator', () => {
    let validator;
    beforeEach(() => {
        validator = new config_validator_1.ConfigValidator();
    });
    describe('Scenario 1: Validate Update Behavior', () => {
        it('should accept valid update behaviors', () => {
            const prefs = {
                updateBehavior: 'auto'
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(true);
            expect(result.errors.filter(e => e.field === 'updateBehavior')).toHaveLength(0);
        });
        it('should reject invalid update behavior', () => {
            const prefs = {
                updateBehavior: 'invalid'
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(false);
            expect(result.errors.some(e => e.field === 'updateBehavior')).toBe(true);
        });
        it('should accept all valid update behaviors', () => {
            const behaviors = ['auto', 'notify', 'manual'];
            behaviors.forEach(behavior => {
                const result = validator.validate({ updateBehavior: behavior });
                expect(result.valid).toBe(true);
            });
        });
    });
    describe('Scenario 2: Validate Update Channel', () => {
        it('should accept valid update channels', () => {
            const prefs = {
                updateChannel: 'stable'
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(true);
        });
        it('should reject invalid update channel', () => {
            const prefs = {
                updateChannel: 'experimental'
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(false);
            expect(result.errors.some(e => e.field === 'updateChannel')).toBe(true);
        });
    });
    describe('Scenario 3: Validate Safety Level', () => {
        it('should accept valid safety levels', () => {
            const levels = ['conservative', 'balanced', 'fast'];
            levels.forEach(level => {
                const result = validator.validate({ safetyLevel: level });
                expect(result.valid).toBe(true);
            });
        });
        it('should reject invalid safety level', () => {
            const prefs = {
                safetyLevel: 'slow'
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(false);
        });
    });
    describe('Scenario 4: Validate Check Frequency', () => {
        it('should accept valid check frequency', () => {
            const prefs = {
                checkFrequency: 24
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(true);
        });
        it('should reject negative check frequency', () => {
            const prefs = {
                checkFrequency: -5
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(false);
            expect(result.errors.some(e => e.field === 'checkFrequency')).toBe(true);
        });
        it('should warn about very frequent checks', () => {
            const prefs = {
                checkFrequency: 0.5 // 30 minutes
            };
            const result = validator.validate(prefs);
            expect(result.errors.some(e => e.field === 'checkFrequency' && e.severity === 'warning')).toBe(true);
        });
        it('should accept zero check frequency (disabled)', () => {
            const prefs = {
                checkFrequency: 0
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(true);
        });
    });
    describe('Scenario 5: Validate Rollback Behavior', () => {
        it('should accept valid rollback behaviors', () => {
            const behaviors = ['auto', 'prompt', 'manual'];
            behaviors.forEach(behavior => {
                const result = validator.validate({ rollbackBehavior: behavior });
                expect(result.valid).toBe(true);
            });
        });
        it('should reject invalid rollback behavior', () => {
            const prefs = {
                rollbackBehavior: 'never'
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(false);
        });
    });
    describe('Scenario 6: Validate Max Rollback Points', () => {
        it('should accept valid max rollback points', () => {
            const prefs = {
                maxRollbackPoints: 5
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(true);
        });
        it('should reject negative max rollback points', () => {
            const prefs = {
                maxRollbackPoints: -1
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(false);
        });
        it('should warn when max rollback points is zero', () => {
            const prefs = {
                maxRollbackPoints: 0
            };
            const result = validator.validate(prefs);
            expect(result.errors.some(e => e.field === 'maxRollbackPoints' && e.severity === 'warning')).toBe(true);
        });
        it('should warn when max rollback points is very high', () => {
            const prefs = {
                maxRollbackPoints: 25
            };
            const result = validator.validate(prefs);
            expect(result.errors.some(e => e.field === 'maxRollbackPoints' && e.severity === 'warning')).toBe(true);
        });
    });
    describe('Scenario 7: Check Logical Consistency', () => {
        it('should warn about auto updates without rollback', () => {
            const prefs = {
                updateBehavior: 'auto',
                rollbackOnFailure: false
            };
            const result = validator.validate(prefs);
            expect(result.warnings.some(w => w.field === 'updateBehavior')).toBe(true);
        });
        it('should warn about alpha channel with conservative safety', () => {
            const prefs = {
                updateChannel: 'alpha',
                safetyLevel: 'conservative'
            };
            const result = validator.validate(prefs);
            expect(result.warnings.some(w => w.field === 'updateChannel')).toBe(true);
        });
        it('should warn about auto updates without backups', () => {
            const prefs = {
                updateBehavior: 'auto',
                backupBeforeUpdate: false
            };
            const result = validator.validate(prefs);
            expect(result.warnings.some(w => w.field === 'backupBeforeUpdate')).toBe(true);
        });
        it('should warn about skipping validation', () => {
            const prefs = {
                validateAfterUpdate: false
            };
            const result = validator.validate(prefs);
            expect(result.warnings.some(w => w.field === 'validateAfterUpdate')).toBe(true);
        });
        it('should warn about manual updates with frequent checks', () => {
            const prefs = {
                updateBehavior: 'manual',
                checkFrequency: 1 // Every hour
            };
            const result = validator.validate(prefs);
            expect(result.warnings.some(w => w.field === 'checkFrequency')).toBe(true);
        });
        it('should warn about auto updates with no notifications', () => {
            const prefs = {
                updateBehavior: 'auto',
                notificationLevel: 'none'
            };
            const result = validator.validate(prefs);
            expect(result.warnings.some(w => w.field === 'notificationLevel')).toBe(true);
        });
        it('should warn about prerelease on stable channel', () => {
            const prefs = {
                allowPrerelease: true,
                updateChannel: 'stable'
            };
            const result = validator.validate(prefs);
            expect(result.warnings.some(w => w.field === 'allowPrerelease')).toBe(true);
        });
    });
    describe('Scenario 8: Generate Suggestions', () => {
        it('should suggest for unstable channels', () => {
            const prefs = {
                updateChannel: 'alpha'
            };
            const result = validator.validate(prefs);
            expect(result.suggestions.length).toBeGreaterThan(0);
            expect(result.suggestions.some(s => s.includes('rollback'))).toBe(true);
        });
        it('should suggest when telemetry is disabled', () => {
            const prefs = {
                enableTelemetry: false
            };
            const result = validator.validate(prefs);
            expect(result.suggestions.some(s => s.includes('Telemetry'))).toBe(true);
        });
        it('should suggest security auto-install', () => {
            const prefs = {
                autoInstallSecurity: false
            };
            const result = validator.validate(prefs);
            expect(result.suggestions.some(s => s.includes('security'))).toBe(true);
        });
        it('should suggest for fast safety level', () => {
            const prefs = {
                safetyLevel: 'fast'
            };
            const result = validator.validate(prefs);
            expect(result.suggestions.some(s => s.includes('backup'))).toBe(true);
        });
    });
    describe('Scenario 9: Sanitize Preferences', () => {
        it('should sanitize invalid update behavior to default', () => {
            const prefs = {
                updateBehavior: 'invalid'
            };
            const sanitized = validator.sanitize(prefs);
            expect(sanitized.updateBehavior).toBe('notify');
        });
        it('should sanitize invalid update channel to stable', () => {
            const prefs = {
                updateChannel: 'experimental'
            };
            const sanitized = validator.sanitize(prefs);
            expect(sanitized.updateChannel).toBe('stable');
        });
        it('should sanitize negative check frequency to zero', () => {
            const prefs = {
                checkFrequency: -10
            };
            const sanitized = validator.sanitize(prefs);
            expect(sanitized.checkFrequency).toBe(0);
        });
        it('should cap max rollback points at 50', () => {
            const prefs = {
                maxRollbackPoints: 100
            };
            const sanitized = validator.sanitize(prefs);
            expect(sanitized.maxRollbackPoints).toBe(50);
        });
        it('should sanitize invalid safety level to balanced', () => {
            const prefs = {
                safetyLevel: 'turbo'
            };
            const sanitized = validator.sanitize(prefs);
            expect(sanitized.safetyLevel).toBe('balanced');
        });
        it('should sanitize invalid rollback behavior to prompt', () => {
            const prefs = {
                rollbackBehavior: 'never'
            };
            const sanitized = validator.sanitize(prefs);
            expect(sanitized.rollbackBehavior).toBe('prompt');
        });
    });
    describe('Scenario 10: Generate Validation Report', () => {
        it('should generate report with errors', () => {
            const result = {
                valid: false,
                errors: [
                    { field: 'updateBehavior', message: 'Invalid value', severity: 'error' },
                    { field: 'checkFrequency', message: 'Must be >= 0', severity: 'error' }
                ],
                warnings: [],
                suggestions: []
            };
            const report = validator.generateReport(result);
            expect(report).toContain('❌ Configuration has errors');
            expect(report).toContain('updateBehavior');
            expect(report).toContain('checkFrequency');
        });
        it('should generate report with warnings', () => {
            const result = {
                valid: true,
                errors: [],
                warnings: [
                    { field: 'updateBehavior', message: 'Risky configuration', recommendation: 'Enable rollback' }
                ],
                suggestions: []
            };
            const report = validator.generateReport(result);
            expect(report).toContain('⚠️');
            expect(report).toContain('Risky configuration');
            expect(report).toContain('Enable rollback');
        });
        it('should generate report with suggestions', () => {
            const result = {
                valid: true,
                errors: [],
                warnings: [],
                suggestions: ['Consider enabling telemetry', 'Increase maxRollbackPoints']
            };
            const report = validator.generateReport(result);
            expect(report).toContain('💡');
            expect(report).toContain('Consider enabling telemetry');
            expect(report).toContain('Increase maxRollbackPoints');
        });
        it('should show success when valid', () => {
            const result = {
                valid: true,
                errors: [],
                warnings: [],
                suggestions: []
            };
            const report = validator.generateReport(result);
            expect(report).toContain('✅ Configuration is valid');
        });
    });
    describe('Scenario 11: Validate and Sanitize Combined', () => {
        it('should validate and sanitize in one operation', () => {
            const prefs = {
                updateBehavior: 'invalid',
                checkFrequency: -5,
                maxRollbackPoints: 100
            };
            const { valid, sanitized, report } = validator.validateAndSanitize(prefs);
            expect(valid).toBe(false); // Original was invalid
            expect(sanitized.updateBehavior).toBe('notify'); // Sanitized
            expect(sanitized.checkFrequency).toBe(0); // Sanitized
            expect(sanitized.maxRollbackPoints).toBe(50); // Capped
            expect(report).toContain('Configuration');
        });
        it('should return valid report for good preferences', () => {
            const prefs = {
                updateBehavior: 'notify',
                updateChannel: 'stable',
                safetyLevel: 'balanced',
                checkFrequency: 24,
                maxRollbackPoints: 5
            };
            const { valid, sanitized, report } = validator.validateAndSanitize(prefs);
            expect(valid).toBe(true);
            expect(sanitized.updateBehavior).toBe('notify');
            expect(report).toContain('✅');
        });
    });
    describe('Scenario 12: Validate Notification Level', () => {
        it('should accept valid notification levels', () => {
            const levels = ['all', 'important', 'critical', 'none'];
            levels.forEach(level => {
                const result = validator.validate({ notificationLevel: level });
                expect(result.valid).toBe(true);
            });
        });
        it('should reject invalid notification level', () => {
            const prefs = {
                notificationLevel: 'verbose'
            };
            const result = validator.validate(prefs);
            expect(result.valid).toBe(false);
            expect(result.errors.some(e => e.field === 'notificationLevel')).toBe(true);
        });
        it('should sanitize invalid notification level to important', () => {
            const prefs = {
                notificationLevel: 'debug'
            };
            const sanitized = validator.sanitize(prefs);
            expect(sanitized.notificationLevel).toBe('important');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L2NvbmZpZy9jb25maWctdmFsaWRhdG9yLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBRUgsMkVBQXlGO0FBR3pGLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7SUFDL0IsSUFBSSxTQUEwQixDQUFDO0lBRS9CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxTQUFTLEdBQUcsSUFBSSxrQ0FBZSxFQUFFLENBQUM7SUFDcEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1FBQ3BELEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxjQUFjLEVBQUUsTUFBTTthQUN2QixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV6QyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNoQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEYsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1lBQy9DLE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsY0FBYyxFQUFFLFNBQWdCO2FBQ2pDLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7WUFDbEQsTUFBTSxTQUFTLEdBQVUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRXRELFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQzNCLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRSxjQUFjLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztnQkFDaEUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEMsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtRQUNuRCxFQUFFLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsYUFBYSxFQUFFLFFBQVE7YUFDeEIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1lBQzlDLE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsYUFBYSxFQUFFLGNBQXFCO2FBQ3JDLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssZUFBZSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUU7UUFDakQsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtZQUMzQyxNQUFNLE1BQU0sR0FBVSxDQUFDLGNBQWMsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFM0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDckIsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUMxRCxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLFdBQVcsRUFBRSxNQUFhO2FBQzNCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1FBQ3BELEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxjQUFjLEVBQUUsRUFBRTthQUNuQixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV6QyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDaEQsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxjQUFjLEVBQUUsQ0FBQyxDQUFDO2FBQ25CLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDaEQsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxjQUFjLEVBQUUsR0FBRyxDQUFDLGFBQWE7YUFDbEMsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxnQkFBZ0IsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZHLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLCtDQUErQyxFQUFFLEdBQUcsRUFBRTtZQUN2RCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGNBQWMsRUFBRSxDQUFDO2FBQ2xCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsd0NBQXdDLEVBQUUsR0FBRyxFQUFFO1FBQ3RELEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7WUFDaEQsTUFBTSxTQUFTLEdBQVUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRXRELFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQzNCLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO2dCQUNsRSxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtZQUNqRCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGdCQUFnQixFQUFFLE9BQWM7YUFDakMsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDeEQsRUFBRSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtZQUNqRCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGlCQUFpQixFQUFFLENBQUM7YUFDckIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsNENBQTRDLEVBQUUsR0FBRyxFQUFFO1lBQ3BELE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO2FBQ3RCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25DLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEdBQUcsRUFBRTtZQUN0RCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGlCQUFpQixFQUFFLENBQUM7YUFDckIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxtQkFBbUIsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFHLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG1EQUFtRCxFQUFFLEdBQUcsRUFBRTtZQUMzRCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGlCQUFpQixFQUFFLEVBQUU7YUFDdEIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxtQkFBbUIsSUFBSSxDQUFDLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFHLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1FBQ3JELEVBQUUsQ0FBQyxpREFBaUQsRUFBRSxHQUFHLEVBQUU7WUFDekQsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxjQUFjLEVBQUUsTUFBTTtnQkFDdEIsaUJBQWlCLEVBQUUsS0FBSzthQUN6QixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV6QyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0UsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMERBQTBELEVBQUUsR0FBRyxFQUFFO1lBQ2xFLE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsYUFBYSxFQUFFLE9BQU87Z0JBQ3RCLFdBQVcsRUFBRSxjQUFjO2FBQzVCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssZUFBZSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDNUUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO1lBQ3hELE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsY0FBYyxFQUFFLE1BQU07Z0JBQ3RCLGtCQUFrQixFQUFFLEtBQUs7YUFDMUIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pGLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLG1CQUFtQixFQUFFLEtBQUs7YUFDM0IsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xGLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHVEQUF1RCxFQUFFLEdBQUcsRUFBRTtZQUMvRCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGNBQWMsRUFBRSxRQUFRO2dCQUN4QixjQUFjLEVBQUUsQ0FBQyxDQUFDLGFBQWE7YUFDaEMsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNEQUFzRCxFQUFFLEdBQUcsRUFBRTtZQUM5RCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGNBQWMsRUFBRSxNQUFNO2dCQUN0QixpQkFBaUIsRUFBRSxNQUFNO2FBQzFCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssbUJBQW1CLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoRixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnREFBZ0QsRUFBRSxHQUFHLEVBQUU7WUFDeEQsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxlQUFlLEVBQUUsSUFBSTtnQkFDckIsYUFBYSxFQUFFLFFBQVE7YUFDeEIsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1FBQ2hELEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxhQUFhLEVBQUUsT0FBTzthQUN2QixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV6QyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDJDQUEyQyxFQUFFLEdBQUcsRUFBRTtZQUNuRCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGVBQWUsRUFBRSxLQUFLO2FBQ3ZCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxtQkFBbUIsRUFBRSxLQUFLO2FBQzNCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMxRSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxXQUFXLEVBQUUsTUFBTTthQUNwQixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV6QyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7UUFDaEQsRUFBRSxDQUFDLG9EQUFvRCxFQUFFLEdBQUcsRUFBRTtZQUM1RCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGNBQWMsRUFBRSxTQUFnQjthQUNqQyxDQUFDO1lBRUYsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU1QyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxrREFBa0QsRUFBRSxHQUFHLEVBQUU7WUFDMUQsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxhQUFhLEVBQUUsY0FBcUI7YUFDckMsQ0FBQztZQUVGLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFNUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsa0RBQWtELEVBQUUsR0FBRyxFQUFFO1lBQzFELE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsY0FBYyxFQUFFLENBQUMsRUFBRTthQUNwQixDQUFDO1lBRUYsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU1QyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxHQUFHLEVBQUU7WUFDOUMsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxpQkFBaUIsRUFBRSxHQUFHO2FBQ3ZCLENBQUM7WUFFRixNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTVDLE1BQU0sQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDL0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsa0RBQWtELEVBQUUsR0FBRyxFQUFFO1lBQzFELE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsV0FBVyxFQUFFLE9BQWM7YUFDNUIsQ0FBQztZQUVGLE1BQU0sU0FBUyxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFNUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMscURBQXFELEVBQUUsR0FBRyxFQUFFO1lBQzdELE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsZ0JBQWdCLEVBQUUsT0FBYzthQUNqQyxDQUFDO1lBRUYsTUFBTSxTQUFTLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU1QyxNQUFNLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1FBQ3ZELEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDNUMsTUFBTSxNQUFNLEdBQXFCO2dCQUMvQixLQUFLLEVBQUUsS0FBSztnQkFDWixNQUFNLEVBQUU7b0JBQ04sRUFBRSxLQUFLLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFO29CQUN4RSxFQUFFLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxPQUFPLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUU7aUJBQ3hFO2dCQUNELFFBQVEsRUFBRSxFQUFFO2dCQUNaLFdBQVcsRUFBRSxFQUFFO2FBQ2hCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRWhELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUN2RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDM0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUM5QyxNQUFNLE1BQU0sR0FBcUI7Z0JBQy9CLEtBQUssRUFBRSxJQUFJO2dCQUNYLE1BQU0sRUFBRSxFQUFFO2dCQUNWLFFBQVEsRUFBRTtvQkFDUixFQUFFLEtBQUssRUFBRSxnQkFBZ0IsRUFBRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsY0FBYyxFQUFFLGlCQUFpQixFQUFFO2lCQUMvRjtnQkFDRCxXQUFXLEVBQUUsRUFBRTthQUNoQixDQUFDO1lBRUYsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUVoRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1lBQ2pELE1BQU0sTUFBTSxHQUFxQjtnQkFDL0IsS0FBSyxFQUFFLElBQUk7Z0JBQ1gsTUFBTSxFQUFFLEVBQUU7Z0JBQ1YsUUFBUSxFQUFFLEVBQUU7Z0JBQ1osV0FBVyxFQUFFLENBQUMsNkJBQTZCLEVBQUUsNEJBQTRCLENBQUM7YUFDM0UsQ0FBQztZQUVGLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFaEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLDZCQUE2QixDQUFDLENBQUM7WUFDeEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1FBQ3pELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtZQUN4QyxNQUFNLE1BQU0sR0FBcUI7Z0JBQy9CLEtBQUssRUFBRSxJQUFJO2dCQUNYLE1BQU0sRUFBRSxFQUFFO2dCQUNWLFFBQVEsRUFBRSxFQUFFO2dCQUNaLFdBQVcsRUFBRSxFQUFFO2FBQ2hCLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRWhELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUN2RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLDZDQUE2QyxFQUFFLEdBQUcsRUFBRTtRQUMzRCxFQUFFLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1lBQ3ZELE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsY0FBYyxFQUFFLFNBQWdCO2dCQUNoQyxjQUFjLEVBQUUsQ0FBQyxDQUFDO2dCQUNsQixpQkFBaUIsRUFBRSxHQUFHO2FBQ3ZCLENBQUM7WUFFRixNQUFNLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsR0FBRyxTQUFTLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFMUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLHVCQUF1QjtZQUNsRCxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLFlBQVk7WUFDN0QsTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZO1lBQ3RELE1BQU0sQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQ3ZELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDNUMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQ3pELE1BQU0sS0FBSyxHQUE2QjtnQkFDdEMsY0FBYyxFQUFFLFFBQVE7Z0JBQ3hCLGFBQWEsRUFBRSxRQUFRO2dCQUN2QixXQUFXLEVBQUUsVUFBVTtnQkFDdkIsY0FBYyxFQUFFLEVBQUU7Z0JBQ2xCLGlCQUFpQixFQUFFLENBQUM7YUFDckIsQ0FBQztZQUVGLE1BQU0sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUUxRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2hELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDeEQsRUFBRSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtZQUNqRCxNQUFNLE1BQU0sR0FBVSxDQUFDLEtBQUssRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRS9ELE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ3JCLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRSxpQkFBaUIsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUNoRSxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLEtBQUssR0FBNkI7Z0JBQ3RDLGlCQUFpQixFQUFFLFNBQWdCO2FBQ3BDLENBQUM7WUFFRixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssbUJBQW1CLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5RSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx5REFBeUQsRUFBRSxHQUFHLEVBQUU7WUFDakUsTUFBTSxLQUFLLEdBQTZCO2dCQUN0QyxpQkFBaUIsRUFBRSxPQUFjO2FBQ2xDLENBQUM7WUFFRixNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRTVDLE1BQU0sQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDeEQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9uaXNzaW1tZW5hc2hlL1ZFUlNBVElMIFNETEMgRlcvdGVzdHMvdW5pdC9jb25maWcvY29uZmlnLXZhbGlkYXRvci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdCBTdWl0ZTogQ29uZmlnVmFsaWRhdG9yXG4gKiBUZXN0cyBmb3IgdjMuMC4wIGNvbmZpZ3VyYXRpb24gdmFsaWRhdGlvbiBhbmQgc2FuaXRpemF0aW9uXG4gKiBUYXJnZXQ6IDkwJSsgY292ZXJhZ2VcbiAqL1xuXG5pbXBvcnQgeyBDb25maWdWYWxpZGF0b3IsIFZhbGlkYXRpb25SZXN1bHQgfSBmcm9tICcuLi8uLi8uLi9zcmMvY29uZmlnL2NvbmZpZy12YWxpZGF0b3InO1xuaW1wb3J0IHsgVXNlclByZWZlcmVuY2VzIH0gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbmZpZy9wcmVmZXJlbmNlLW1hbmFnZXInO1xuXG5kZXNjcmliZSgnQ29uZmlnVmFsaWRhdG9yJywgKCkgPT4ge1xuICBsZXQgdmFsaWRhdG9yOiBDb25maWdWYWxpZGF0b3I7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgdmFsaWRhdG9yID0gbmV3IENvbmZpZ1ZhbGlkYXRvcigpO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2NlbmFyaW8gMTogVmFsaWRhdGUgVXBkYXRlIEJlaGF2aW9yJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIHVwZGF0ZSBiZWhhdmlvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICB1cGRhdGVCZWhhdmlvcjogJ2F1dG8nXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuZmlsdGVyKGUgPT4gZS5maWVsZCA9PT0gJ3VwZGF0ZUJlaGF2aW9yJykpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgdXBkYXRlIGJlaGF2aW9yJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgdXBkYXRlQmVoYXZpb3I6ICdpbnZhbGlkJyBhcyBhbnlcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQudmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuc29tZShlID0+IGUuZmllbGQgPT09ICd1cGRhdGVCZWhhdmlvcicpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgYWxsIHZhbGlkIHVwZGF0ZSBiZWhhdmlvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBiZWhhdmlvcnM6IGFueVtdID0gWydhdXRvJywgJ25vdGlmeScsICdtYW51YWwnXTtcblxuICAgICAgYmVoYXZpb3JzLmZvckVhY2goYmVoYXZpb3IgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUoeyB1cGRhdGVCZWhhdmlvcjogYmVoYXZpb3IgfSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQudmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjZW5hcmlvIDI6IFZhbGlkYXRlIFVwZGF0ZSBDaGFubmVsJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIHVwZGF0ZSBjaGFubmVscycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIHVwZGF0ZUNoYW5uZWw6ICdzdGFibGUnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCB1cGRhdGUgY2hhbm5lbCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIHVwZGF0ZUNoYW5uZWw6ICdleHBlcmltZW50YWwnIGFzIGFueVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLnZhbGlkYXRlKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5zb21lKGUgPT4gZS5maWVsZCA9PT0gJ3VwZGF0ZUNoYW5uZWwnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjZW5hcmlvIDM6IFZhbGlkYXRlIFNhZmV0eSBMZXZlbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCBzYWZldHkgbGV2ZWxzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbGV2ZWxzOiBhbnlbXSA9IFsnY29uc2VydmF0aXZlJywgJ2JhbGFuY2VkJywgJ2Zhc3QnXTtcblxuICAgICAgbGV2ZWxzLmZvckVhY2gobGV2ZWwgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUoeyBzYWZldHlMZXZlbDogbGV2ZWwgfSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQudmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgc2FmZXR5IGxldmVsJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgc2FmZXR5TGV2ZWw6ICdzbG93JyBhcyBhbnlcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQudmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2NlbmFyaW8gNDogVmFsaWRhdGUgQ2hlY2sgRnJlcXVlbmN5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWNjZXB0IHZhbGlkIGNoZWNrIGZyZXF1ZW5jeScsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIGNoZWNrRnJlcXVlbmN5OiAyNFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLnZhbGlkYXRlKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IG5lZ2F0aXZlIGNoZWNrIGZyZXF1ZW5jeScsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIGNoZWNrRnJlcXVlbmN5OiAtNVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLnZhbGlkYXRlKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5zb21lKGUgPT4gZS5maWVsZCA9PT0gJ2NoZWNrRnJlcXVlbmN5JykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHdhcm4gYWJvdXQgdmVyeSBmcmVxdWVudCBjaGVja3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICBjaGVja0ZyZXF1ZW5jeTogMC41IC8vIDMwIG1pbnV0ZXNcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzLnNvbWUoZSA9PiBlLmZpZWxkID09PSAnY2hlY2tGcmVxdWVuY3knICYmIGUuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB6ZXJvIGNoZWNrIGZyZXF1ZW5jeSAoZGlzYWJsZWQpJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgY2hlY2tGcmVxdWVuY3k6IDBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQudmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTY2VuYXJpbyA1OiBWYWxpZGF0ZSBSb2xsYmFjayBCZWhhdmlvcicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFjY2VwdCB2YWxpZCByb2xsYmFjayBiZWhhdmlvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBiZWhhdmlvcnM6IGFueVtdID0gWydhdXRvJywgJ3Byb21wdCcsICdtYW51YWwnXTtcblxuICAgICAgYmVoYXZpb3JzLmZvckVhY2goYmVoYXZpb3IgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUoeyByb2xsYmFja0JlaGF2aW9yOiBiZWhhdmlvciB9KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCByb2xsYmFjayBiZWhhdmlvcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIHJvbGxiYWNrQmVoYXZpb3I6ICduZXZlcicgYXMgYW55XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjZW5hcmlvIDY6IFZhbGlkYXRlIE1heCBSb2xsYmFjayBQb2ludHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsaWQgbWF4IHJvbGxiYWNrIHBvaW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIG1heFJvbGxiYWNrUG9pbnRzOiA1XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgbmVnYXRpdmUgbWF4IHJvbGxiYWNrIHBvaW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIG1heFJvbGxiYWNrUG9pbnRzOiAtMVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLnZhbGlkYXRlKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHdhcm4gd2hlbiBtYXggcm9sbGJhY2sgcG9pbnRzIGlzIHplcm8nLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICBtYXhSb2xsYmFja1BvaW50czogMFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLnZhbGlkYXRlKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMuc29tZShlID0+IGUuZmllbGQgPT09ICdtYXhSb2xsYmFja1BvaW50cycgJiYgZS5zZXZlcml0eSA9PT0gJ3dhcm5pbmcnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgd2FybiB3aGVuIG1heCByb2xsYmFjayBwb2ludHMgaXMgdmVyeSBoaWdoJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgbWF4Um9sbGJhY2tQb2ludHM6IDI1XG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5zb21lKGUgPT4gZS5maWVsZCA9PT0gJ21heFJvbGxiYWNrUG9pbnRzJyAmJiBlLnNldmVyaXR5ID09PSAnd2FybmluZycpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU2NlbmFyaW8gNzogQ2hlY2sgTG9naWNhbCBDb25zaXN0ZW5jeScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHdhcm4gYWJvdXQgYXV0byB1cGRhdGVzIHdpdGhvdXQgcm9sbGJhY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICB1cGRhdGVCZWhhdmlvcjogJ2F1dG8nLFxuICAgICAgICByb2xsYmFja09uRmFpbHVyZTogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQud2FybmluZ3Muc29tZSh3ID0+IHcuZmllbGQgPT09ICd1cGRhdGVCZWhhdmlvcicpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3YXJuIGFib3V0IGFscGhhIGNoYW5uZWwgd2l0aCBjb25zZXJ2YXRpdmUgc2FmZXR5JywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgdXBkYXRlQ2hhbm5lbDogJ2FscGhhJyxcbiAgICAgICAgc2FmZXR5TGV2ZWw6ICdjb25zZXJ2YXRpdmUnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lndhcm5pbmdzLnNvbWUodyA9PiB3LmZpZWxkID09PSAndXBkYXRlQ2hhbm5lbCcpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3YXJuIGFib3V0IGF1dG8gdXBkYXRlcyB3aXRob3V0IGJhY2t1cHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICB1cGRhdGVCZWhhdmlvcjogJ2F1dG8nLFxuICAgICAgICBiYWNrdXBCZWZvcmVVcGRhdGU6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lndhcm5pbmdzLnNvbWUodyA9PiB3LmZpZWxkID09PSAnYmFja3VwQmVmb3JlVXBkYXRlJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHdhcm4gYWJvdXQgc2tpcHBpbmcgdmFsaWRhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIHZhbGlkYXRlQWZ0ZXJVcGRhdGU6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lndhcm5pbmdzLnNvbWUodyA9PiB3LmZpZWxkID09PSAndmFsaWRhdGVBZnRlclVwZGF0ZScpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3YXJuIGFib3V0IG1hbnVhbCB1cGRhdGVzIHdpdGggZnJlcXVlbnQgY2hlY2tzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgdXBkYXRlQmVoYXZpb3I6ICdtYW51YWwnLFxuICAgICAgICBjaGVja0ZyZXF1ZW5jeTogMSAvLyBFdmVyeSBob3VyXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lndhcm5pbmdzLnNvbWUodyA9PiB3LmZpZWxkID09PSAnY2hlY2tGcmVxdWVuY3knKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgd2FybiBhYm91dCBhdXRvIHVwZGF0ZXMgd2l0aCBubyBub3RpZmljYXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgdXBkYXRlQmVoYXZpb3I6ICdhdXRvJyxcbiAgICAgICAgbm90aWZpY2F0aW9uTGV2ZWw6ICdub25lJ1xuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLnZhbGlkYXRlKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC53YXJuaW5ncy5zb21lKHcgPT4gdy5maWVsZCA9PT0gJ25vdGlmaWNhdGlvbkxldmVsJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHdhcm4gYWJvdXQgcHJlcmVsZWFzZSBvbiBzdGFibGUgY2hhbm5lbCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIGFsbG93UHJlcmVsZWFzZTogdHJ1ZSxcbiAgICAgICAgdXBkYXRlQ2hhbm5lbDogJ3N0YWJsZSdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQud2FybmluZ3Muc29tZSh3ID0+IHcuZmllbGQgPT09ICdhbGxvd1ByZXJlbGVhc2UnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjZW5hcmlvIDg6IEdlbmVyYXRlIFN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3VnZ2VzdCBmb3IgdW5zdGFibGUgY2hhbm5lbHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICB1cGRhdGVDaGFubmVsOiAnYWxwaGEnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Z2dlc3Rpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zdWdnZXN0aW9ucy5zb21lKHMgPT4gcy5pbmNsdWRlcygncm9sbGJhY2snKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1Z2dlc3Qgd2hlbiB0ZWxlbWV0cnkgaXMgZGlzYWJsZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICBlbmFibGVUZWxlbWV0cnk6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IudmFsaWRhdGUocHJlZnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnN1Z2dlc3Rpb25zLnNvbWUocyA9PiBzLmluY2x1ZGVzKCdUZWxlbWV0cnknKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1Z2dlc3Qgc2VjdXJpdHkgYXV0by1pbnN0YWxsJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgYXV0b0luc3RhbGxTZWN1cml0eTogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGlvbnMuc29tZShzID0+IHMuaW5jbHVkZXMoJ3NlY3VyaXR5JykpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdWdnZXN0IGZvciBmYXN0IHNhZmV0eSBsZXZlbCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIHNhZmV0eUxldmVsOiAnZmFzdCdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuc3VnZ2VzdGlvbnMuc29tZShzID0+IHMuaW5jbHVkZXMoJ2JhY2t1cCcpKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjZW5hcmlvIDk6IFNhbml0aXplIFByZWZlcmVuY2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgaW52YWxpZCB1cGRhdGUgYmVoYXZpb3IgdG8gZGVmYXVsdCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIHVwZGF0ZUJlaGF2aW9yOiAnaW52YWxpZCcgYXMgYW55XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzYW5pdGl6ZWQgPSB2YWxpZGF0b3Iuc2FuaXRpemUocHJlZnMpO1xuXG4gICAgICBleHBlY3Qoc2FuaXRpemVkLnVwZGF0ZUJlaGF2aW9yKS50b0JlKCdub3RpZnknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgaW52YWxpZCB1cGRhdGUgY2hhbm5lbCB0byBzdGFibGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICB1cGRhdGVDaGFubmVsOiAnZXhwZXJpbWVudGFsJyBhcyBhbnlcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNhbml0aXplZCA9IHZhbGlkYXRvci5zYW5pdGl6ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQudXBkYXRlQ2hhbm5lbCkudG9CZSgnc3RhYmxlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNhbml0aXplIG5lZ2F0aXZlIGNoZWNrIGZyZXF1ZW5jeSB0byB6ZXJvJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgY2hlY2tGcmVxdWVuY3k6IC0xMFxuICAgICAgfTtcblxuICAgICAgY29uc3Qgc2FuaXRpemVkID0gdmFsaWRhdG9yLnNhbml0aXplKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHNhbml0aXplZC5jaGVja0ZyZXF1ZW5jeSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2FwIG1heCByb2xsYmFjayBwb2ludHMgYXQgNTAnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICBtYXhSb2xsYmFja1BvaW50czogMTAwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBzYW5pdGl6ZWQgPSB2YWxpZGF0b3Iuc2FuaXRpemUocHJlZnMpO1xuXG4gICAgICBleHBlY3Qoc2FuaXRpemVkLm1heFJvbGxiYWNrUG9pbnRzKS50b0JlKDUwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgaW52YWxpZCBzYWZldHkgbGV2ZWwgdG8gYmFsYW5jZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICBzYWZldHlMZXZlbDogJ3R1cmJvJyBhcyBhbnlcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNhbml0aXplZCA9IHZhbGlkYXRvci5zYW5pdGl6ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQuc2FmZXR5TGV2ZWwpLnRvQmUoJ2JhbGFuY2VkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNhbml0aXplIGludmFsaWQgcm9sbGJhY2sgYmVoYXZpb3IgdG8gcHJvbXB0JywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgcm9sbGJhY2tCZWhhdmlvcjogJ25ldmVyJyBhcyBhbnlcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHNhbml0aXplZCA9IHZhbGlkYXRvci5zYW5pdGl6ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQucm9sbGJhY2tCZWhhdmlvcikudG9CZSgncHJvbXB0Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTY2VuYXJpbyAxMDogR2VuZXJhdGUgVmFsaWRhdGlvbiBSZXBvcnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSByZXBvcnQgd2l0aCBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQ6IFZhbGlkYXRpb25SZXN1bHQgPSB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgeyBmaWVsZDogJ3VwZGF0ZUJlaGF2aW9yJywgbWVzc2FnZTogJ0ludmFsaWQgdmFsdWUnLCBzZXZlcml0eTogJ2Vycm9yJyB9LFxuICAgICAgICAgIHsgZmllbGQ6ICdjaGVja0ZyZXF1ZW5jeScsIG1lc3NhZ2U6ICdNdXN0IGJlID49IDAnLCBzZXZlcml0eTogJ2Vycm9yJyB9XG4gICAgICAgIF0sXG4gICAgICAgIHdhcm5pbmdzOiBbXSxcbiAgICAgICAgc3VnZ2VzdGlvbnM6IFtdXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXBvcnQgPSB2YWxpZGF0b3IuZ2VuZXJhdGVSZXBvcnQocmVzdWx0KTtcblxuICAgICAgZXhwZWN0KHJlcG9ydCkudG9Db250YWluKCfinYwgQ29uZmlndXJhdGlvbiBoYXMgZXJyb3JzJyk7XG4gICAgICBleHBlY3QocmVwb3J0KS50b0NvbnRhaW4oJ3VwZGF0ZUJlaGF2aW9yJyk7XG4gICAgICBleHBlY3QocmVwb3J0KS50b0NvbnRhaW4oJ2NoZWNrRnJlcXVlbmN5Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHJlcG9ydCB3aXRoIHdhcm5pbmdzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0OiBWYWxpZGF0aW9uUmVzdWx0ID0ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgd2FybmluZ3M6IFtcbiAgICAgICAgICB7IGZpZWxkOiAndXBkYXRlQmVoYXZpb3InLCBtZXNzYWdlOiAnUmlza3kgY29uZmlndXJhdGlvbicsIHJlY29tbWVuZGF0aW9uOiAnRW5hYmxlIHJvbGxiYWNrJyB9XG4gICAgICAgIF0sXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVwb3J0ID0gdmFsaWRhdG9yLmdlbmVyYXRlUmVwb3J0KHJlc3VsdCk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQ29udGFpbign4pqg77iPJyk7XG4gICAgICBleHBlY3QocmVwb3J0KS50b0NvbnRhaW4oJ1Jpc2t5IGNvbmZpZ3VyYXRpb24nKTtcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQ29udGFpbignRW5hYmxlIHJvbGxiYWNrJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHJlcG9ydCB3aXRoIHN1Z2dlc3Rpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0OiBWYWxpZGF0aW9uUmVzdWx0ID0ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgd2FybmluZ3M6IFtdLFxuICAgICAgICBzdWdnZXN0aW9uczogWydDb25zaWRlciBlbmFibGluZyB0ZWxlbWV0cnknLCAnSW5jcmVhc2UgbWF4Um9sbGJhY2tQb2ludHMnXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVwb3J0ID0gdmFsaWRhdG9yLmdlbmVyYXRlUmVwb3J0KHJlc3VsdCk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQ29udGFpbign8J+SoScpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9Db250YWluKCdDb25zaWRlciBlbmFibGluZyB0ZWxlbWV0cnknKTtcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQ29udGFpbignSW5jcmVhc2UgbWF4Um9sbGJhY2tQb2ludHMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hvdyBzdWNjZXNzIHdoZW4gdmFsaWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQ6IFZhbGlkYXRpb25SZXN1bHQgPSB7XG4gICAgICAgIHZhbGlkOiB0cnVlLFxuICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICB3YXJuaW5nczogW10sXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBbXVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVwb3J0ID0gdmFsaWRhdG9yLmdlbmVyYXRlUmVwb3J0KHJlc3VsdCk7XG5cbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQ29udGFpbign4pyFIENvbmZpZ3VyYXRpb24gaXMgdmFsaWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjZW5hcmlvIDExOiBWYWxpZGF0ZSBhbmQgU2FuaXRpemUgQ29tYmluZWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhbmQgc2FuaXRpemUgaW4gb25lIG9wZXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIHVwZGF0ZUJlaGF2aW9yOiAnaW52YWxpZCcgYXMgYW55LFxuICAgICAgICBjaGVja0ZyZXF1ZW5jeTogLTUsXG4gICAgICAgIG1heFJvbGxiYWNrUG9pbnRzOiAxMDBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgdmFsaWQsIHNhbml0aXplZCwgcmVwb3J0IH0gPSB2YWxpZGF0b3IudmFsaWRhdGVBbmRTYW5pdGl6ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdCh2YWxpZCkudG9CZShmYWxzZSk7IC8vIE9yaWdpbmFsIHdhcyBpbnZhbGlkXG4gICAgICBleHBlY3Qoc2FuaXRpemVkLnVwZGF0ZUJlaGF2aW9yKS50b0JlKCdub3RpZnknKTsgLy8gU2FuaXRpemVkXG4gICAgICBleHBlY3Qoc2FuaXRpemVkLmNoZWNrRnJlcXVlbmN5KS50b0JlKDApOyAvLyBTYW5pdGl6ZWRcbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQubWF4Um9sbGJhY2tQb2ludHMpLnRvQmUoNTApOyAvLyBDYXBwZWRcbiAgICAgIGV4cGVjdChyZXBvcnQpLnRvQ29udGFpbignQ29uZmlndXJhdGlvbicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdmFsaWQgcmVwb3J0IGZvciBnb29kIHByZWZlcmVuY2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJlZnM6IFBhcnRpYWw8VXNlclByZWZlcmVuY2VzPiA9IHtcbiAgICAgICAgdXBkYXRlQmVoYXZpb3I6ICdub3RpZnknLFxuICAgICAgICB1cGRhdGVDaGFubmVsOiAnc3RhYmxlJyxcbiAgICAgICAgc2FmZXR5TGV2ZWw6ICdiYWxhbmNlZCcsXG4gICAgICAgIGNoZWNrRnJlcXVlbmN5OiAyNCxcbiAgICAgICAgbWF4Um9sbGJhY2tQb2ludHM6IDVcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgdmFsaWQsIHNhbml0aXplZCwgcmVwb3J0IH0gPSB2YWxpZGF0b3IudmFsaWRhdGVBbmRTYW5pdGl6ZShwcmVmcyk7XG5cbiAgICAgIGV4cGVjdCh2YWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzYW5pdGl6ZWQudXBkYXRlQmVoYXZpb3IpLnRvQmUoJ25vdGlmeScpO1xuICAgICAgZXhwZWN0KHJlcG9ydCkudG9Db250YWluKCfinIUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjZW5hcmlvIDEyOiBWYWxpZGF0ZSBOb3RpZmljYXRpb24gTGV2ZWwnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgdmFsaWQgbm90aWZpY2F0aW9uIGxldmVscycsICgpID0+IHtcbiAgICAgIGNvbnN0IGxldmVsczogYW55W10gPSBbJ2FsbCcsICdpbXBvcnRhbnQnLCAnY3JpdGljYWwnLCAnbm9uZSddO1xuXG4gICAgICBsZXZlbHMuZm9yRWFjaChsZXZlbCA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci52YWxpZGF0ZSh7IG5vdGlmaWNhdGlvbkxldmVsOiBsZXZlbCB9KTtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZSh0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBub3RpZmljYXRpb24gbGV2ZWwnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcmVmczogUGFydGlhbDxVc2VyUHJlZmVyZW5jZXM+ID0ge1xuICAgICAgICBub3RpZmljYXRpb25MZXZlbDogJ3ZlcmJvc2UnIGFzIGFueVxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLnZhbGlkYXRlKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC52YWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9ycy5zb21lKGUgPT4gZS5maWVsZCA9PT0gJ25vdGlmaWNhdGlvbkxldmVsJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNhbml0aXplIGludmFsaWQgbm90aWZpY2F0aW9uIGxldmVsIHRvIGltcG9ydGFudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWZzOiBQYXJ0aWFsPFVzZXJQcmVmZXJlbmNlcz4gPSB7XG4gICAgICAgIG5vdGlmaWNhdGlvbkxldmVsOiAnZGVidWcnIGFzIGFueVxuICAgICAgfTtcblxuICAgICAgY29uc3Qgc2FuaXRpemVkID0gdmFsaWRhdG9yLnNhbml0aXplKHByZWZzKTtcblxuICAgICAgZXhwZWN0KHNhbml0aXplZC5ub3RpZmljYXRpb25MZXZlbCkudG9CZSgnaW1wb3J0YW50Jyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=