c2eb28ba399ae8b4e8b5836c129a60d2
"use strict";
/**
 * VERSATIL SDLC Framework - Configuration Wizard Tests
 * Comprehensive test suite for the interactive configuration wizard
 *
 * Coverage Target: 90%+
 * Test Scenarios: 6 core scenarios covering all wizard flows
 */
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
// Mock readline module
jest.mock('readline');
// Mock PreferenceManager
jest.mock('../../../src/config/preference-manager', () => {
    const mockPreferences = {
        updateBehavior: 'notify',
        updateChannel: 'stable',
        safetyLevel: 'balanced',
        checkFrequency: 24,
        autoInstallSecurity: true,
        rollbackBehavior: 'prompt',
        maxRollbackPoints: 5,
        rollbackOnFailure: true,
        notificationLevel: 'important',
        notifyOnUpdateAvailable: true,
        notifyOnUpdateInstalled: true,
        notifyOnSecurityUpdate: true,
        notifyOnBreakingChange: true,
        enableTelemetry: true,
        shareErrorReports: true,
        shareUsageStatistics: false,
        backupBeforeUpdate: true,
        validateAfterUpdate: true,
        allowPrerelease: false,
        skipOptionalDependencies: false,
        createdAt: '2025-01-01T00:00:00.000Z',
        lastModified: '2025-01-01T00:00:00.000Z',
        version: '1.0.0'
    };
    // Setup default mock implementations
    mockGetDefaultPreferences.mockReturnValue(mockPreferences);
    mockSavePreferences.mockResolvedValue(undefined);
    mockGetPreferences.mockResolvedValue(mockPreferences);
    mockGetSummary.mockResolvedValue('Mock preferences summary');
    mockResetToDefaults.mockResolvedValue(undefined);
    return {
        PreferenceManager: jest.fn().mockImplementation(() => ({
            getDefaultPreferences: mockGetDefaultPreferences,
            savePreferences: mockSavePreferences,
            getPreferences: mockGetPreferences,
            getSummary: mockGetSummary,
            resetToDefaults: mockResetToDefaults
        }))
    };
});
// Mock ConfigProfileManager
jest.mock('../../../src/config/config-profiles', () => {
    const mockBalancedProfile = {
        name: 'Balanced',
        description: 'Good balance between safety and staying up-to-date.',
        emoji: 'âš–ï¸',
        bestFor: 'Most teams, development environments, general use',
        preferences: {
            updateBehavior: 'notify',
            updateChannel: 'stable',
            safetyLevel: 'balanced',
            checkFrequency: 24,
            autoInstallSecurity: true,
            rollbackBehavior: 'prompt',
            maxRollbackPoints: 5,
            rollbackOnFailure: true,
            notificationLevel: 'important',
            notifyOnUpdateAvailable: true,
            notifyOnUpdateInstalled: true,
            notifyOnSecurityUpdate: true,
            notifyOnBreakingChange: true,
            enableTelemetry: true,
            shareErrorReports: true,
            shareUsageStatistics: false,
            backupBeforeUpdate: true,
            validateAfterUpdate: true,
            allowPrerelease: false,
            skipOptionalDependencies: false,
            createdAt: '2025-01-01T00:00:00.000Z',
            lastModified: '2025-01-01T00:00:00.000Z',
            version: '1.0.0'
        }
    };
    const mockConservativeProfile = {
        name: 'Conservative',
        description: 'Maximum safety and stability.',
        emoji: 'ðŸ›¡ï¸',
        bestFor: 'Production environments',
        preferences: {
            ...mockBalancedProfile.preferences,
            updateBehavior: 'manual',
            safetyLevel: 'conservative',
            checkFrequency: 168,
            autoInstallSecurity: false,
            maxRollbackPoints: 10
        }
    };
    const mockAggressiveProfile = {
        name: 'Aggressive',
        description: 'Latest features, bleeding edge.',
        emoji: 'âš¡',
        bestFor: 'Early adopters',
        preferences: {
            ...mockBalancedProfile.preferences,
            updateBehavior: 'auto',
            updateChannel: 'beta',
            safetyLevel: 'fast',
            checkFrequency: 6,
            maxRollbackPoints: 3,
            allowPrerelease: true
        }
    };
    return {
        ConfigProfileManager: jest.fn().mockImplementation(() => ({
            getAvailableProfiles: jest.fn().mockReturnValue([
                mockConservativeProfile,
                mockBalancedProfile,
                mockAggressiveProfile
            ]),
            getProfile: jest.fn().mockImplementation((name) => {
                switch (name) {
                    case 'conservative':
                        return mockConservativeProfile;
                    case 'balanced':
                        return mockBalancedProfile;
                    case 'aggressive':
                        return mockAggressiveProfile;
                    default:
                        return null;
                }
            })
        }))
    };
});
const config_wizard_1 = require("../../../src/config/config-wizard");
const config_profiles_1 = require("../../../src/config/config-profiles");
const readline = __importStar(require("readline"));
const events_1 = require("events");
// Create shared mock functions at module level
const mockGetDefaultPreferences = jest.fn();
const mockSavePreferences = jest.fn();
const mockGetPreferences = jest.fn();
const mockGetSummary = jest.fn();
const mockResetToDefaults = jest.fn();
/**
 * Mock readline Interface
 */
class MockReadlineInterface extends events_1.EventEmitter {
    constructor() {
        super(...arguments);
        this.questionResponses = new Map();
        this.currentQuestionIndex = 0;
    }
    question(query, callback) {
        // Extract a simplified query key
        const queryKey = this.simplifyQuery(query);
        const responses = this.questionResponses.get(queryKey) || [''];
        const response = responses[this.currentQuestionIndex % responses.length] || responses[0];
        // Increment for next question
        this.currentQuestionIndex++;
        // Call callback asynchronously to simulate real behavior
        setImmediate(() => callback(response));
    }
    close() {
        this.emit('close');
    }
    setResponses(responses) {
        this.questionResponses = responses;
        this.currentQuestionIndex = 0;
    }
    simplifyQuery(query) {
        // Extract key parts of the query for matching (check longer strings first to avoid partial matches)
        if (query.includes('Choose setup type'))
            return 'setup-type';
        if (query.includes('Continue with these settings'))
            return 'confirm-quick';
        if (query.includes('Choose a profile'))
            return 'profile-choice';
        if (query.includes('How should updates be handled'))
            return 'update-behavior';
        if (query.includes('Which update channel'))
            return 'update-channel';
        if (query.includes('Choose safety level'))
            return 'safety-level';
        if (query.includes('Auto-install security updates'))
            return 'auto-security';
        if (query.includes('Create backup before each update'))
            return 'backup';
        if (query.includes('Maximum number of backups'))
            return 'max-backups';
        if (query.includes('Auto-rollback if update fails'))
            return 'auto-rollback';
        if (query.includes('Notification level'))
            return 'notification-level';
        if (query.includes('Enable telemetry'))
            return 'enable-telemetry';
        if (query.includes('Share error reports'))
            return 'share-errors';
        if (query.includes('Share usage statistics'))
            return 'share-usage';
        if (query.includes('What would you like to change'))
            return 'update-category';
        if (query.includes('Reset all preferences'))
            return 'confirm-reset';
        if (query.includes('Your choice'))
            return 'default'; // Generic choice prompt
        return 'default';
    }
}
describe('ConfigWizard', () => {
    let wizard;
    let mockRl;
    let consoleLogSpy;
    beforeEach(() => {
        // Clear all mock calls and reset implementations
        jest.clearAllMocks();
        // Reset mock implementations to defaults
        const mockPreferences = {
            updateBehavior: 'notify',
            updateChannel: 'stable',
            safetyLevel: 'balanced',
            checkFrequency: 24,
            autoInstallSecurity: true,
            rollbackBehavior: 'prompt',
            maxRollbackPoints: 5,
            rollbackOnFailure: true,
            notificationLevel: 'important',
            notifyOnUpdateAvailable: true,
            notifyOnUpdateInstalled: true,
            notifyOnSecurityUpdate: true,
            notifyOnBreakingChange: true,
            enableTelemetry: true,
            shareErrorReports: true,
            shareUsageStatistics: false,
            backupBeforeUpdate: true,
            validateAfterUpdate: true,
            allowPrerelease: false,
            skipOptionalDependencies: false,
            createdAt: '2025-01-01T00:00:00.000Z',
            lastModified: '2025-01-01T00:00:00.000Z',
            version: '1.0.0'
        };
        mockGetDefaultPreferences.mockReturnValue(mockPreferences);
        mockSavePreferences.mockResolvedValue(undefined);
        mockGetPreferences.mockResolvedValue(mockPreferences);
        mockGetSummary.mockResolvedValue('Mock preferences summary');
        mockResetToDefaults.mockResolvedValue(undefined);
        // Create mock readline interface
        mockRl = new MockReadlineInterface();
        // Mock readline.createInterface to return our mock
        readline.createInterface.mockReturnValue(mockRl);
        // Spy on console.log to suppress output during tests
        consoleLogSpy = jest.spyOn(console, 'log').mockImplementation();
        // Create wizard instance
        wizard = new config_wizard_1.ConfigWizard();
    });
    afterEach(() => {
        consoleLogSpy.mockRestore();
    });
    /**
     * Test Scenario 1: Complete Wizard Flow (Quick Setup)
     */
    describe('wizardFlow - complete successfully', () => {
        it('should complete quick setup wizard successfully', async () => {
            // Setup mock responses for quick setup
            mockRl.setResponses(new Map([
                ['setup-type', ['1']], // Choose quick setup
                ['confirm-quick', ['y']] // Confirm quick setup
            ]));
            // Run wizard
            const result = await wizard.run();
            // Verify results
            expect(result).toBeDefined();
            expect(result.updateBehavior).toBe('notify');
            expect(result.updateChannel).toBe('stable');
            expect(result.safetyLevel).toBe('balanced');
            // Verify readline was closed
            expect(mockRl.listenerCount('close')).toBe(0);
        });
        it('should complete wizard and save preferences', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['1']],
                ['confirm-quick', ['y']]
            ]));
            await wizard.run();
            // Verify savePreferences was called
            expect(mockSavePreferences).toHaveBeenCalled();
        });
        it('should switch to custom setup if quick setup is declined', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['1']], // Choose quick setup
                ['confirm-quick', ['n']], // Decline quick setup
                ['update-behavior', ['2']],
                ['update-channel', ['1']],
                ['safety-level', ['2']],
                ['auto-security', ['y']],
                ['backup', ['y']],
                ['max-backups', ['5']],
                ['auto-rollback', ['y']],
                ['notification-level', ['2']],
                ['enable-telemetry', ['y']],
                ['share-errors', ['y']],
                ['share-usage', ['n']]
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.updateBehavior).toBe('notify');
        });
    });
    /**
     * Test Scenario 2: Profile Selection - Development Profile
     */
    describe('profileSelection - dev profile', () => {
        it('should use balanced profile when selected', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['3']], // Choose profile setup
                ['profile-choice', ['2']] // Choose balanced profile
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.updateBehavior).toBe('notify');
            expect(result.updateChannel).toBe('stable');
            expect(result.safetyLevel).toBe('balanced');
            expect(result.maxRollbackPoints).toBe(5);
        });
        it('should display all available profiles', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['3']],
                ['profile-choice', ['2']]
            ]));
            await wizard.run();
            // Verify profile information was logged
            expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaining('Available profiles'));
        });
    });
    /**
     * Test Scenario 3: Profile Selection - Production Profile
     */
    describe('profileSelection - production profile', () => {
        it('should use conservative profile with stricter settings', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['3']], // Choose profile setup
                ['profile-choice', ['1']] // Choose conservative profile
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.updateBehavior).toBe('manual');
            expect(result.safetyLevel).toBe('conservative');
            expect(result.checkFrequency).toBe(168); // Weekly
            expect(result.autoInstallSecurity).toBe(false);
            expect(result.maxRollbackPoints).toBe(10);
        });
        it('should use aggressive profile with latest features', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['3']], // Choose profile setup
                ['profile-choice', ['3']] // Choose aggressive profile
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.updateBehavior).toBe('auto');
            expect(result.updateChannel).toBe('beta');
            expect(result.safetyLevel).toBe('fast');
            expect(result.checkFrequency).toBe(6); // Every 6 hours
            expect(result.maxRollbackPoints).toBe(3);
            expect(result.allowPrerelease).toBe(true);
        });
        it('should handle invalid profile selection gracefully', async () => {
            // Mock getProfile to return null for invalid selection
            const profileManager = new config_profiles_1.ConfigProfileManager();
            profileManager.getProfile.mockReturnValueOnce(null);
            mockRl.setResponses(new Map([
                ['setup-type', ['3']],
                ['profile-choice', ['999']] // Invalid choice
            ]));
            await expect(wizard.run()).rejects.toThrow('Invalid profile');
        });
    });
    /**
     * Test Scenario 4: Custom Configuration - User Input
     */
    describe('customConfiguration - user input', () => {
        it('should collect all custom settings from user', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']], // Choose custom setup
                ['update-behavior', ['1']], // Auto
                ['update-channel', ['2']], // Beta
                ['safety-level', ['3']], // Fast
                ['auto-security', ['y']],
                ['backup', ['y']],
                ['max-backups', ['7']],
                ['auto-rollback', ['y']],
                ['notification-level', ['1']], // All
                ['enable-telemetry', ['y']],
                ['share-errors', ['y']],
                ['share-usage', ['y']]
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.updateBehavior).toBe('auto');
            expect(result.updateChannel).toBe('beta');
            expect(result.safetyLevel).toBe('fast');
            expect(result.autoInstallSecurity).toBe(true);
            expect(result.backupBeforeUpdate).toBe(true);
            expect(result.maxRollbackPoints).toBe(7);
            expect(result.rollbackOnFailure).toBe(true);
            expect(result.notificationLevel).toBe('all');
            expect(result.enableTelemetry).toBe(true);
            expect(result.shareErrorReports).toBe(true);
            expect(result.shareUsageStatistics).toBe(true);
        });
        it('should handle no backup scenario', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['3']], // Manual
                ['update-channel', ['1']], // Stable
                ['safety-level', ['1']], // Conservative
                ['auto-security', ['n']],
                ['backup', ['n']], // No backup
                ['auto-rollback', ['n']],
                ['notification-level', ['4']], // None
                ['enable-telemetry', ['n']]
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.backupBeforeUpdate).toBe(false);
            expect(result.rollbackOnFailure).toBe(false);
            expect(result.notificationLevel).toBe('none');
            expect(result.enableTelemetry).toBe(false);
        });
        it('should handle telemetry disabled scenario', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['2']],
                ['update-channel', ['1']],
                ['safety-level', ['2']],
                ['auto-security', ['y']],
                ['backup', ['y']],
                ['max-backups', ['5']],
                ['auto-rollback', ['y']],
                ['notification-level', ['2']],
                ['enable-telemetry', ['n']] // Telemetry disabled
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.enableTelemetry).toBe(false);
            // When telemetry is disabled, share settings should not be asked
        });
    });
    /**
     * Test Scenario 5: Validation During Wizard - Invalid Inputs
     */
    describe('validationDuringWizard - invalid inputs', () => {
        it('should handle invalid choice and use default', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['999']], // Invalid choice, should default to '1'
                ['confirm-quick', ['y']]
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            // Should use default quick setup
        });
        it('should handle empty input and use defaults', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['']], // Empty, should use default
                ['confirm-quick', ['']] // Empty yes/no, should use default (true)
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
        });
        it('should parse numeric inputs correctly', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['2']],
                ['update-channel', ['1']],
                ['safety-level', ['2']],
                ['auto-security', ['y']],
                ['backup', ['y']],
                ['max-backups', ['abc']], // Invalid number, should default to 5
                ['auto-rollback', ['y']],
                ['notification-level', ['2']],
                ['enable-telemetry', ['y']],
                ['share-errors', ['y']],
                ['share-usage', ['n']]
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.maxRollbackPoints).toBe(5); // Should fall back to default
        });
        it('should handle various yes/no input formats', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['2']],
                ['update-channel', ['1']],
                ['safety-level', ['2']],
                ['auto-security', ['YES']], // Uppercase
                ['backup', ['Y']], // Single letter uppercase
                ['max-backups', ['5']],
                ['auto-rollback', ['yes']], // Lowercase full word
                ['notification-level', ['2']],
                ['enable-telemetry', ['y']],
                ['share-errors', ['y']],
                ['share-usage', ['NO']] // Uppercase NO
            ]));
            const result = await wizard.run();
            expect(result).toBeDefined();
            expect(result.autoInstallSecurity).toBe(true);
            expect(result.backupBeforeUpdate).toBe(true);
            expect(result.rollbackOnFailure).toBe(true);
            expect(result.shareUsageStatistics).toBe(false);
        });
    });
    /**
     * Test Scenario 6: Save Configuration - Persist to Disk
     */
    describe('saveConfiguration - persist to disk', () => {
        it('should save configuration to preferences file', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['1']],
                ['confirm-quick', ['y']]
            ]));
            const result = await wizard.run();
            // Verify savePreferences was called with the result
            expect(mockSavePreferences).toHaveBeenCalledWith(result);
        });
        it('should save custom configuration correctly', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['3']],
                ['update-channel', ['1']],
                ['safety-level', ['1']],
                ['auto-security', ['n']],
                ['backup', ['y']],
                ['max-backups', ['10']],
                ['auto-rollback', ['y']],
                ['notification-level', ['1']],
                ['enable-telemetry', ['y']],
                ['share-errors', ['y']],
                ['share-usage', ['y']]
            ]));
            await wizard.run();
            expect(mockSavePreferences).toHaveBeenCalled();
            const savedPrefs = mockSavePreferences.mock.calls[0][0];
            expect(savedPrefs.updateBehavior).toBe('manual');
            expect(savedPrefs.maxRollbackPoints).toBe(10);
        });
        it('should display success message after saving', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['1']],
                ['confirm-quick', ['y']]
            ]));
            await wizard.run();
            expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaining('Setup complete'));
        });
    });
    /**
     * Additional Test: Minimal Wizard (CI/Automated)
     */
    describe('runMinimal - automated setup', () => {
        it('should run minimal wizard for CI environments', async () => {
            const result = await wizard.runMinimal();
            expect(result).toBeDefined();
            expect(result.updateBehavior).toBe('manual');
            expect(result.notificationLevel).toBe('none');
            expect(result.enableTelemetry).toBe(false);
        });
        it('should save minimal configuration', async () => {
            await wizard.runMinimal();
            expect(mockSavePreferences).toHaveBeenCalled();
        });
    });
    /**
     * Additional Test: Update Preferences
     */
    describe('updatePreferences - interactive update', () => {
        it('should update existing preferences', async () => {
            mockRl.setResponses(new Map([
                ['update-category', ['1']], // Update settings
                ['update-behavior', ['1']] // Change to auto
            ]));
            await wizard.updatePreferences();
            expect(mockGetPreferences).toHaveBeenCalled();
            expect(mockSavePreferences).toHaveBeenCalled();
        });
        it('should handle reset to defaults', async () => {
            mockRl.setResponses(new Map([
                ['update-category', ['6']], // Reset to defaults
                ['confirm-reset', ['y']] // Confirm reset
            ]));
            await wizard.updatePreferences();
            expect(mockResetToDefaults).toHaveBeenCalled();
        });
        it('should handle view all settings', async () => {
            mockRl.setResponses(new Map([
                ['update-category', ['5']] // View all settings
            ]));
            await wizard.updatePreferences();
            expect(mockGetSummary).toHaveBeenCalled();
        });
        it('should update rollback settings', async () => {
            mockRl.setResponses(new Map([
                ['update-category', ['2']], // Rollback settings
                ['auto-rollback', ['n']] // Disable auto-rollback
            ]));
            await wizard.updatePreferences();
            expect(mockSavePreferences).toHaveBeenCalled();
        });
        it('should update notification settings', async () => {
            mockRl.setResponses(new Map([
                ['update-category', ['3']], // Notification settings
                ['notification-level', ['4']] // None
            ]));
            await wizard.updatePreferences();
            expect(mockSavePreferences).toHaveBeenCalled();
        });
        it('should update telemetry settings', async () => {
            mockRl.setResponses(new Map([
                ['update-category', ['4']], // Telemetry settings
                ['enable-telemetry', ['n']] // Disable telemetry
            ]));
            await wizard.updatePreferences();
            expect(mockSavePreferences).toHaveBeenCalled();
        });
        it('should not reset if user declines confirmation', async () => {
            mockRl.setResponses(new Map([
                ['update-category', ['6']], // Reset to defaults
                ['confirm-reset', ['n']] // Decline reset
            ]));
            await wizard.updatePreferences();
            expect(mockResetToDefaults).not.toHaveBeenCalled();
        });
    });
    /**
     * Edge Cases
     */
    describe('edgeCases - boundary conditions', () => {
        it('should handle maximum backup points input', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['2']],
                ['update-channel', ['1']],
                ['safety-level', ['2']],
                ['auto-security', ['y']],
                ['backup', ['y']],
                ['max-backups', ['999']],
                ['auto-rollback', ['y']],
                ['notification-level', ['2']],
                ['enable-telemetry', ['n']]
            ]));
            const result = await wizard.run();
            expect(result.maxRollbackPoints).toBe(999);
        });
        it('should handle zero backup points', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['2']],
                ['update-channel', ['1']],
                ['safety-level', ['2']],
                ['auto-security', ['y']],
                ['backup', ['y']],
                ['max-backups', ['0']],
                ['auto-rollback', ['y']],
                ['notification-level', ['2']],
                ['enable-telemetry', ['n']]
            ]));
            const result = await wizard.run();
            expect(result.maxRollbackPoints).toBe(0);
        });
        it('should handle negative number input gracefully', async () => {
            mockRl.setResponses(new Map([
                ['setup-type', ['2']],
                ['update-behavior', ['2']],
                ['update-channel', ['1']],
                ['safety-level', ['2']],
                ['auto-security', ['y']],
                ['backup', ['y']],
                ['max-backups', ['-5']], // Negative number
                ['auto-rollback', ['y']],
                ['notification-level', ['2']],
                ['enable-telemetry', ['n']]
            ]));
            const result = await wizard.run();
            // Should parse to -5 or fall back to default
            expect(typeof result.maxRollbackPoints).toBe('number');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L2NvbmZpZy9jb25maWctd2l6YXJkLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7R0FNRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRSCx1QkFBdUI7QUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQVN0Qix5QkFBeUI7QUFDekIsSUFBSSxDQUFDLElBQUksQ0FBQyx3Q0FBd0MsRUFBRSxHQUFHLEVBQUU7SUFDdkQsTUFBTSxlQUFlLEdBQW9CO1FBQ3ZDLGNBQWMsRUFBRSxRQUFRO1FBQ3hCLGFBQWEsRUFBRSxRQUFRO1FBQ3ZCLFdBQVcsRUFBRSxVQUFVO1FBQ3ZCLGNBQWMsRUFBRSxFQUFFO1FBQ2xCLG1CQUFtQixFQUFFLElBQUk7UUFDekIsZ0JBQWdCLEVBQUUsUUFBUTtRQUMxQixpQkFBaUIsRUFBRSxDQUFDO1FBQ3BCLGlCQUFpQixFQUFFLElBQUk7UUFDdkIsaUJBQWlCLEVBQUUsV0FBVztRQUM5Qix1QkFBdUIsRUFBRSxJQUFJO1FBQzdCLHVCQUF1QixFQUFFLElBQUk7UUFDN0Isc0JBQXNCLEVBQUUsSUFBSTtRQUM1QixzQkFBc0IsRUFBRSxJQUFJO1FBQzVCLGVBQWUsRUFBRSxJQUFJO1FBQ3JCLGlCQUFpQixFQUFFLElBQUk7UUFDdkIsb0JBQW9CLEVBQUUsS0FBSztRQUMzQixrQkFBa0IsRUFBRSxJQUFJO1FBQ3hCLG1CQUFtQixFQUFFLElBQUk7UUFDekIsZUFBZSxFQUFFLEtBQUs7UUFDdEIsd0JBQXdCLEVBQUUsS0FBSztRQUMvQixTQUFTLEVBQUUsMEJBQTBCO1FBQ3JDLFlBQVksRUFBRSwwQkFBMEI7UUFDeEMsT0FBTyxFQUFFLE9BQU87S0FDakIsQ0FBQztJQUVGLHFDQUFxQztJQUNyQyx5QkFBeUIsQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDM0QsbUJBQW1CLENBQUMsaUJBQWlCLENBQUMsU0FB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QUFDO2dCQUMxQixDQUFDLGdCQUFnQixFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3pCLENBQUMsY0FBYyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3ZCLENBQUMsZUFBZSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3hCLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2pCLENBQUMsYUFBYSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxrQkFBa0I7Z0JBQzNDLENBQUMsZUFBZSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3hCLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDN0IsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQzVCLENBQUMsQ0FBQyxDQUFDO1lBRUosTUFBTSxNQUFNLEdBQUcsTUFBTSxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7WUFFbEMsNkNBQTZDO1lBQzdDLE1BQU0sQ0FBQyxPQUFPLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L2NvbmZpZy9jb25maWctd2l6YXJkLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBWRVJTQVRJTCBTRExDIEZyYW1ld29yayAtIENvbmZpZ3VyYXRpb24gV2l6YXJkIFRlc3RzXG4gKiBDb21wcmVoZW5zaXZlIHRlc3Qgc3VpdGUgZm9yIHRoZSBpbnRlcmFjdGl2ZSBjb25maWd1cmF0aW9uIHdpemFyZFxuICpcbiAqIENvdmVyYWdlIFRhcmdldDogOTAlK1xuICogVGVzdCBTY2VuYXJpb3M6IDYgY29yZSBzY2VuYXJpb3MgY292ZXJpbmcgYWxsIHdpemFyZCBmbG93c1xuICovXG5cbmltcG9ydCB7IENvbmZpZ1dpemFyZCB9IGZyb20gJy4uLy4uLy4uL3NyYy9jb25maWcvY29uZmlnLXdpemFyZCc7XG5pbXBvcnQgeyBQcmVmZXJlbmNlTWFuYWdlciwgVXNlclByZWZlcmVuY2VzIH0gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbmZpZy9wcmVmZXJlbmNlLW1hbmFnZXInO1xuaW1wb3J0IHsgQ29uZmlnUHJvZmlsZU1hbmFnZXIgfSBmcm9tICcuLi8uLi8uLi9zcmMvY29uZmlnL2NvbmZpZy1wcm9maWxlcyc7XG5pbXBvcnQgKiBhcyByZWFkbGluZSBmcm9tICdyZWFkbGluZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuXG4vLyBNb2NrIHJlYWRsaW5lIG1vZHVsZVxuamVzdC5tb2NrKCdyZWFkbGluZScpO1xuXG4vLyBDcmVhdGUgc2hhcmVkIG1vY2sgZnVuY3Rpb25zIGF0IG1vZHVsZSBsZXZlbFxuY29uc3QgbW9ja0dldERlZmF1bHRQcmVmZXJlbmNlcyA9IGplc3QuZm4oKTtcbmNvbnN0IG1vY2tTYXZlUHJlZmVyZW5jZXMgPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrR2V0UHJlZmVyZW5jZXMgPSBqZXN0LmZuKCk7XG5jb25zdCBtb2NrR2V0U3VtbWFyeSA9IGplc3QuZm4oKTtcbmNvbnN0IG1vY2tSZXNldFRvRGVmYXVsdHMgPSBqZXN0LmZuKCk7XG5cbi8vIE1vY2sgUHJlZmVyZW5jZU1hbmFnZXJcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2NvbmZpZy9wcmVmZXJlbmNlLW1hbmFnZXInLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tQcmVmZXJlbmNlczogVXNlclByZWZlcmVuY2VzID0ge1xuICAgIHVwZGF0ZUJlaGF2aW9yOiAnbm90aWZ5JyxcbiAgICB1cGRhdGVDaGFubmVsOiAnc3RhYmxlJyxcbiAgICBzYWZldHlMZXZlbDogJ2JhbGFuY2VkJyxcbiAgICBjaGVja0ZyZXF1ZW5jeTogMjQsXG4gICAgYXV0b0luc3RhbGxTZWN1cml0eTogdHJ1ZSxcbiAgICByb2xsYmFja0JlaGF2aW9yOiAncHJvbXB0JyxcbiAgICBtYXhSb2xsYmFja1BvaW50czogNSxcbiAgICByb2xsYmFja09uRmFpbHVyZTogdHJ1ZSxcbiAgICBub3RpZmljYXRpb25MZXZlbDogJ2ltcG9ydGFudCcsXG4gICAgbm90aWZ5T25VcGRhdGVBdmFpbGFibGU6IHRydWUsXG4gICAgbm90aWZ5T25VcGRhdGVJbnN0YWxsZWQ6IHRydWUsXG4gICAgbm90aWZ5T25TZWN1cml0eVVwZGF0ZTogdHJ1ZSxcbiAgICBub3RpZnlPbkJyZWFraW5nQ2hhbmdlOiB0cnVlLFxuICAgIGVuYWJsZVRlbGVtZXRyeTogdHJ1ZSxcbiAgICBzaGFyZUVycm9yUmVwb3J0czogdHJ1ZSxcbiAgICBzaGFyZVVzYWdlU3RhdGlzdGljczogZmFsc2UsXG4gICAgYmFja3VwQmVmb3JlVXBkYXRlOiB0cnVlLFxuICAgIHZhbGlkYXRlQWZ0ZXJVcGRhdGU6IHRydWUsXG4gICAgYWxsb3dQcmVyZWxlYXNlOiBmYWxzZSxcbiAgICBza2lwT3B0aW9uYWxEZXBlbmRlbmNpZXM6IGZhbHNlLFxuICAgIGNyZWF0ZWRBdDogJzIwMjUtMDEtMDFUMDA6MDA6MDAuMDAwWicsXG4gICAgbGFzdE1vZGlmaWVkOiAnMjAyNS0wMS0wMVQwMDowMDowMC4wMDBaJyxcbiAgICB2ZXJzaW9uOiAnMS4wLjAnXG4gIH07XG5cbiAgLy8gU2V0dXAgZGVmYXVsdCBtb2NrIGltcGxlbWVudGF0aW9uc1xuICBtb2NrR2V0RGVmYXVsdFByZWZlcmVuY2VzLm1vY2tSZXR1cm5WYWx1ZShtb2NrUHJlZmVyZW5jZXMpO1xuICBtb2NrU2F2ZVByZWZlcmVuY2VzLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gIG1vY2tHZXRQcmVmZXJlbmNlcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUHJlZmVyZW5jZXMpO1xuICBtb2NrR2V0U3VtbWFyeS5tb2NrUmVzb2x2ZWRWYWx1ZSgnTW9jayBwcmVmZXJlbmNlcyBzdW1tYXJ5Jyk7XG4gIG1vY2tSZXNldFRvRGVmYXVsdHMubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICByZXR1cm4ge1xuICAgIFByZWZlcmVuY2VNYW5hZ2VyOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgICBnZXREZWZhdWx0UHJlZmVyZW5jZXM6IG1vY2tHZXREZWZhdWx0UHJlZmVyZW5jZXMsXG4gICAgICBzYXZlUHJlZmVyZW5jZXM6IG1vY2tTYXZlUHJlZmVyZW5jZXMsXG4gICAgICBnZXRQcmVmZXJlbmNlczogbW9ja0dldFByZWZlcmVuY2VzLFxuICAgICAgZ2V0U3VtbWFyeTogbW9ja0dldFN1bW1hcnksXG4gICAgICByZXNldFRvRGVmYXVsdHM6IG1vY2tSZXNldFRvRGVmYXVsdHNcbiAgICB9KSlcbiAgfTtcbn0pO1xuXG4vLyBNb2NrIENvbmZpZ1Byb2ZpbGVNYW5hZ2VyXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NyYy9jb25maWcvY29uZmlnLXByb2ZpbGVzJywgKCkgPT4ge1xuICBjb25zdCBtb2NrQmFsYW5jZWRQcm9maWxlID0ge1xuICAgIG5hbWU6ICdCYWxhbmNlZCcsXG4gICAgZGVzY3JpcHRpb246ICdHb29kIGJhbGFuY2UgYmV0d2VlbiBzYWZldHkgYW5kIHN0YXlpbmcgdXAtdG8tZGF0ZS4nLFxuICAgIGVtb2ppOiAn4pqW77iPJyxcbiAgICBiZXN0Rm9yOiAnTW9zdCB0ZWFtcywgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnRzLCBnZW5lcmFsIHVzZScsXG4gICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgIHVwZGF0ZUJlaGF2aW9yOiAnbm90aWZ5JyxcbiAgICAgIHVwZGF0ZUNoYW5uZWw6ICdzdGFibGUnLFxuICAgICAgc2FmZXR5TGV2ZWw6ICdiYWxhbmNlZCcsXG4gICAgICBjaGVja0ZyZXF1ZW5jeTogMjQsXG4gICAgICBhdXRvSW5zdGFsbFNlY3VyaXR5OiB0cnVlLFxuICAgICAgcm9sbGJhY2tCZWhhdmlvcjogJ3Byb21wdCcsXG4gICAgICBtYXhSb2xsYmFja1BvaW50czogNSxcbiAgICAgIHJvbGxiYWNrT25GYWlsdXJlOiB0cnVlLFxuICAgICAgbm90aWZpY2F0aW9uTGV2ZWw6ICdpbXBvcnRhbnQnLFxuICAgICAgbm90aWZ5T25VcGRhdGVBdmFpbGFibGU6IHRydWUsXG4gICAgICBub3RpZnlPblVwZGF0ZUluc3RhbGxlZDogdHJ1ZSxcbiAgICAgIG5vdGlmeU9uU2VjdXJpdHlVcGRhdGU6IHRydWUsXG4gICAgICBub3RpZnlPbkJyZWFraW5nQ2hhbmdlOiB0cnVlLFxuICAgICAgZW5hYmxlVGVsZW1ldHJ5OiB0cnVlLFxuICAgICAgc2hhcmVFcnJvclJlcG9ydHM6IHRydWUsXG4gICAgICBzaGFyZVVzYWdlU3RhdGlzdGljczogZmFsc2UsXG4gICAgICBiYWNrdXBCZWZvcmVVcGRhdGU6IHRydWUsXG4gICAgICB2YWxpZGF0ZUFmdGVyVXBkYXRlOiB0cnVlLFxuICAgICAgYWxsb3dQcmVyZWxlYXNlOiBmYWxzZSxcbiAgICAgIHNraXBPcHRpb25hbERlcGVuZGVuY2llczogZmFsc2UsXG4gICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwLjAwMFonLFxuICAgICAgbGFzdE1vZGlmaWVkOiAnMjAyNS0wMS0wMVQwMDowMDowMC4wMDBaJyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgbW9ja0NvbnNlcnZhdGl2ZVByb2ZpbGUgPSB7XG4gICAgbmFtZTogJ0NvbnNlcnZhdGl2ZScsXG4gICAgZGVzY3JpcHRpb246ICdNYXhpbXVtIHNhZmV0eSBhbmQgc3RhYmlsaXR5LicsXG4gICAgZW1vamk6ICfwn5uh77iPJyxcbiAgICBiZXN0Rm9yOiAnUHJvZHVjdGlvbiBlbnZpcm9ubWVudHMnLFxuICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAuLi5tb2NrQmFsYW5jZWRQcm9maWxlLnByZWZlcmVuY2VzLFxuICAgICAgdXBkYXRlQmVoYXZpb3I6ICdtYW51YWwnIGFzIGNvbnN0LFxuICAgICAgc2FmZXR5TGV2ZWw6ICdjb25zZXJ2YXRpdmUnIGFzIGNvbnN0LFxuICAgICAgY2hlY2tGcmVxdWVuY3k6IDE2OCxcbiAgICAgIGF1dG9JbnN0YWxsU2VjdXJpdHk6IGZhbHNlLFxuICAgICAgbWF4Um9sbGJhY2tQb2ludHM6IDEwXG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG1vY2tBZ2dyZXNzaXZlUHJvZmlsZSA9IHtcbiAgICBuYW1lOiAnQWdncmVzc2l2ZScsXG4gICAgZGVzY3JpcHRpb246ICdMYXRlc3QgZmVhdHVyZXMsIGJsZWVkaW5nIGVkZ2UuJyxcbiAgICBlbW9qaTogJ+KaoScsXG4gICAgYmVzdEZvcjogJ0Vhcmx5IGFkb3B0ZXJzJyxcbiAgICBwcmVmZXJlbmNlczoge1xuICAgICAgLi4ubW9ja0JhbGFuY2VkUHJvZmlsZS5wcmVmZXJlbmNlcyxcbiAgICAgIHVwZGF0ZUJlaGF2aW9yOiAnYXV0bycgYXMgY29uc3QsXG4gICAgICB1cGRhdGVDaGFubmVsOiAnYmV0YScgYXMgY29uc3QsXG4gICAgICBzYWZldHlMZXZlbDogJ2Zhc3QnIGFzIGNvbnN0LFxuICAgICAgY2hlY2tGcmVxdWVuY3k6IDYsXG4gICAgICBtYXhSb2xsYmFja1BvaW50czogMyxcbiAgICAgIGFsbG93UHJlcmVsZWFzZTogdHJ1ZVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge1xuICAgIENvbmZpZ1Byb2ZpbGVNYW5hZ2VyOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgICBnZXRBdmFpbGFibGVQcm9maWxlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXG4gICAgICAgIG1vY2tDb25zZXJ2YXRpdmVQcm9maWxlLFxuICAgICAgICBtb2NrQmFsYW5jZWRQcm9maWxlLFxuICAgICAgICBtb2NrQWdncmVzc2l2ZVByb2ZpbGVcbiAgICAgIF0pLFxuICAgICAgZ2V0UHJvZmlsZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICAgIGNhc2UgJ2NvbnNlcnZhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4gbW9ja0NvbnNlcnZhdGl2ZVByb2ZpbGU7XG4gICAgICAgICAgY2FzZSAnYmFsYW5jZWQnOlxuICAgICAgICAgICAgcmV0dXJuIG1vY2tCYWxhbmNlZFByb2ZpbGU7XG4gICAgICAgICAgY2FzZSAnYWdncmVzc2l2ZSc6XG4gICAgICAgICAgICByZXR1cm4gbW9ja0FnZ3Jlc3NpdmVQcm9maWxlO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KSlcbiAgfTtcbn0pO1xuXG4vKipcbiAqIE1vY2sgcmVhZGxpbmUgSW50ZXJmYWNlXG4gKi9cbmNsYXNzIE1vY2tSZWFkbGluZUludGVyZmFjZSBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgcXVlc3Rpb25SZXNwb25zZXM6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjdXJyZW50UXVlc3Rpb25JbmRleCA9IDA7XG5cbiAgcXVlc3Rpb24ocXVlcnk6IHN0cmluZywgY2FsbGJhY2s6IChhbnN3ZXI6IHN0cmluZykgPT4gdm9pZCk6IHZvaWQge1xuICAgIC8vIEV4dHJhY3QgYSBzaW1wbGlmaWVkIHF1ZXJ5IGtleVxuICAgIGNvbnN0IHF1ZXJ5S2V5ID0gdGhpcy5zaW1wbGlmeVF1ZXJ5KHF1ZXJ5KTtcbiAgICBjb25zdCByZXNwb25zZXMgPSB0aGlzLnF1ZXN0aW9uUmVzcG9uc2VzLmdldChxdWVyeUtleSkgfHwgWycnXTtcbiAgICBjb25zdCByZXNwb25zZSA9IHJlc3BvbnNlc1t0aGlzLmN1cnJlbnRRdWVzdGlvbkluZGV4ICUgcmVzcG9uc2VzLmxlbmd0aF0gfHwgcmVzcG9uc2VzWzBdO1xuXG4gICAgLy8gSW5jcmVtZW50IGZvciBuZXh0IHF1ZXN0aW9uXG4gICAgdGhpcy5jdXJyZW50UXVlc3Rpb25JbmRleCsrO1xuXG4gICAgLy8gQ2FsbCBjYWxsYmFjayBhc3luY2hyb25vdXNseSB0byBzaW11bGF0ZSByZWFsIGJlaGF2aW9yXG4gICAgc2V0SW1tZWRpYXRlKCgpID0+IGNhbGxiYWNrKHJlc3BvbnNlKSk7XG4gIH1cblxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLmVtaXQoJ2Nsb3NlJyk7XG4gIH1cblxuICBzZXRSZXNwb25zZXMocmVzcG9uc2VzOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT4pOiB2b2lkIHtcbiAgICB0aGlzLnF1ZXN0aW9uUmVzcG9uc2VzID0gcmVzcG9uc2VzO1xuICAgIHRoaXMuY3VycmVudFF1ZXN0aW9uSW5kZXggPSAwO1xuICB9XG5cbiAgcHJpdmF0ZSBzaW1wbGlmeVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIEV4dHJhY3Qga2V5IHBhcnRzIG9mIHRoZSBxdWVyeSBmb3IgbWF0Y2hpbmcgKGNoZWNrIGxvbmdlciBzdHJpbmdzIGZpcnN0IHRvIGF2b2lkIHBhcnRpYWwgbWF0Y2hlcylcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ0Nob29zZSBzZXR1cCB0eXBlJykpIHJldHVybiAnc2V0dXAtdHlwZSc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdDb250aW51ZSB3aXRoIHRoZXNlIHNldHRpbmdzJykpIHJldHVybiAnY29uZmlybS1xdWljayc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdDaG9vc2UgYSBwcm9maWxlJykpIHJldHVybiAncHJvZmlsZS1jaG9pY2UnO1xuICAgIGlmIChxdWVyeS5pbmNsdWRlcygnSG93IHNob3VsZCB1cGRhdGVzIGJlIGhhbmRsZWQnKSkgcmV0dXJuICd1cGRhdGUtYmVoYXZpb3InO1xuICAgIGlmIChxdWVyeS5pbmNsdWRlcygnV2hpY2ggdXBkYXRlIGNoYW5uZWwnKSkgcmV0dXJuICd1cGRhdGUtY2hhbm5lbCc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdDaG9vc2Ugc2FmZXR5IGxldmVsJykpIHJldHVybiAnc2FmZXR5LWxldmVsJztcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ0F1dG8taW5zdGFsbCBzZWN1cml0eSB1cGRhdGVzJykpIHJldHVybiAnYXV0by1zZWN1cml0eSc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdDcmVhdGUgYmFja3VwIGJlZm9yZSBlYWNoIHVwZGF0ZScpKSByZXR1cm4gJ2JhY2t1cCc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdNYXhpbXVtIG51bWJlciBvZiBiYWNrdXBzJykpIHJldHVybiAnbWF4LWJhY2t1cHMnO1xuICAgIGlmIChxdWVyeS5pbmNsdWRlcygnQXV0by1yb2xsYmFjayBpZiB1cGRhdGUgZmFpbHMnKSkgcmV0dXJuICdhdXRvLXJvbGxiYWNrJztcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ05vdGlmaWNhdGlvbiBsZXZlbCcpKSByZXR1cm4gJ25vdGlmaWNhdGlvbi1sZXZlbCc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdFbmFibGUgdGVsZW1ldHJ5JykpIHJldHVybiAnZW5hYmxlLXRlbGVtZXRyeSc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdTaGFyZSBlcnJvciByZXBvcnRzJykpIHJldHVybiAnc2hhcmUtZXJyb3JzJztcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ1NoYXJlIHVzYWdlIHN0YXRpc3RpY3MnKSkgcmV0dXJuICdzaGFyZS11c2FnZSc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdXaGF0IHdvdWxkIHlvdSBsaWtlIHRvIGNoYW5nZScpKSByZXR1cm4gJ3VwZGF0ZS1jYXRlZ29yeSc7XG4gICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdSZXNldCBhbGwgcHJlZmVyZW5jZXMnKSkgcmV0dXJuICdjb25maXJtLXJlc2V0JztcbiAgICBpZiAocXVlcnkuaW5jbHVkZXMoJ1lvdXIgY2hvaWNlJykpIHJldHVybiAnZGVmYXVsdCc7IC8vIEdlbmVyaWMgY2hvaWNlIHByb21wdFxuXG4gICAgcmV0dXJuICdkZWZhdWx0JztcbiAgfVxufVxuXG5kZXNjcmliZSgnQ29uZmlnV2l6YXJkJywgKCkgPT4ge1xuICBsZXQgd2l6YXJkOiBDb25maWdXaXphcmQ7XG4gIGxldCBtb2NrUmw6IE1vY2tSZWFkbGluZUludGVyZmFjZTtcbiAgbGV0IGNvbnNvbGVMb2dTcHk6IGplc3QuU3B5SW5zdGFuY2U7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgYWxsIG1vY2sgY2FsbHMgYW5kIHJlc2V0IGltcGxlbWVudGF0aW9uc1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuXG4gICAgLy8gUmVzZXQgbW9jayBpbXBsZW1lbnRhdGlvbnMgdG8gZGVmYXVsdHNcbiAgICBjb25zdCBtb2NrUHJlZmVyZW5jZXM6IFVzZXJQcmVmZXJlbmNlcyA9IHtcbiAgICAgIHVwZGF0ZUJlaGF2aW9yOiAnbm90aWZ5JyxcbiAgICAgIHVwZGF0ZUNoYW5uZWw6ICdzdGFibGUnLFxuICAgICAgc2FmZXR5TGV2ZWw6ICdiYWxhbmNlZCcsXG4gICAgICBjaGVja0ZyZXF1ZW5jeTogMjQsXG4gICAgICBhdXRvSW5zdGFsbFNlY3VyaXR5OiB0cnVlLFxuICAgICAgcm9sbGJhY2tCZWhhdmlvcjogJ3Byb21wdCcsXG4gICAgICBtYXhSb2xsYmFja1BvaW50czogNSxcbiAgICAgIHJvbGxiYWNrT25GYWlsdXJlOiB0cnVlLFxuICAgICAgbm90aWZpY2F0aW9uTGV2ZWw6ICdpbXBvcnRhbnQnLFxuICAgICAgbm90aWZ5T25VcGRhdGVBdmFpbGFibGU6IHRydWUsXG4gICAgICBub3RpZnlPblVwZGF0ZUluc3RhbGxlZDogdHJ1ZSxcbiAgICAgIG5vdGlmeU9uU2VjdXJpdHlVcGRhdGU6IHRydWUsXG4gICAgICBub3RpZnlPbkJyZWFraW5nQ2hhbmdlOiB0cnVlLFxuICAgICAgZW5hYmxlVGVsZW1ldHJ5OiB0cnVlLFxuICAgICAgc2hhcmVFcnJvclJlcG9ydHM6IHRydWUsXG4gICAgICBzaGFyZVVzYWdlU3RhdGlzdGljczogZmFsc2UsXG4gICAgICBiYWNrdXBCZWZvcmVVcGRhdGU6IHRydWUsXG4gICAgICB2YWxpZGF0ZUFmdGVyVXBkYXRlOiB0cnVlLFxuICAgICAgYWxsb3dQcmVyZWxlYXNlOiBmYWxzZSxcbiAgICAgIHNraXBPcHRpb25hbERlcGVuZGVuY2llczogZmFsc2UsXG4gICAgICBjcmVhdGVkQXQ6ICcyMDI1LTAxLTAxVDAwOjAwOjAwLjAwMFonLFxuICAgICAgbGFzdE1vZGlmaWVkOiAnMjAyNS0wMS0wMVQwMDowMDowMC4wMDBaJyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICB9O1xuXG4gICAgbW9ja0dldERlZmF1bHRQcmVmZXJlbmNlcy5tb2NrUmV0dXJuVmFsdWUobW9ja1ByZWZlcmVuY2VzKTtcbiAgICBtb2NrU2F2ZVByZWZlcmVuY2VzLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgbW9ja0dldFByZWZlcmVuY2VzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcmVmZXJlbmNlcyk7XG4gICAgbW9ja0dldFN1bW1hcnkubW9ja1Jlc29sdmVkVmFsdWUoJ01vY2sgcHJlZmVyZW5jZXMgc3VtbWFyeScpO1xuICAgIG1vY2tSZXNldFRvRGVmYXVsdHMubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgIC8vIENyZWF0ZSBtb2NrIHJlYWRsaW5lIGludGVyZmFjZVxuICAgIG1vY2tSbCA9IG5ldyBNb2NrUmVhZGxpbmVJbnRlcmZhY2UoKTtcblxuICAgIC8vIE1vY2sgcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlIHRvIHJldHVybiBvdXIgbW9ja1xuICAgIChyZWFkbGluZS5jcmVhdGVJbnRlcmZhY2UgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1JsKTtcblxuICAgIC8vIFNweSBvbiBjb25zb2xlLmxvZyB0byBzdXBwcmVzcyBvdXRwdXQgZHVyaW5nIHRlc3RzXG4gICAgY29uc29sZUxvZ1NweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgLy8gQ3JlYXRlIHdpemFyZCBpbnN0YW5jZVxuICAgIHdpemFyZCA9IG5ldyBDb25maWdXaXphcmQoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBjb25zb2xlTG9nU3B5Lm1vY2tSZXN0b3JlKCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUZXN0IFNjZW5hcmlvIDE6IENvbXBsZXRlIFdpemFyZCBGbG93IChRdWljayBTZXR1cClcbiAgICovXG4gIGRlc2NyaWJlKCd3aXphcmRGbG93IC0gY29tcGxldGUgc3VjY2Vzc2Z1bGx5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29tcGxldGUgcXVpY2sgc2V0dXAgd2l6YXJkIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNldHVwIG1vY2sgcmVzcG9uc2VzIGZvciBxdWljayBzZXR1cFxuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWycxJ11dLCAvLyBDaG9vc2UgcXVpY2sgc2V0dXBcbiAgICAgICAgWydjb25maXJtLXF1aWNrJywgWyd5J11dIC8vIENvbmZpcm0gcXVpY2sgc2V0dXBcbiAgICAgIF0pKTtcblxuICAgICAgLy8gUnVuIHdpemFyZFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2l6YXJkLnJ1bigpO1xuXG4gICAgICAvLyBWZXJpZnkgcmVzdWx0c1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXBkYXRlQmVoYXZpb3IpLnRvQmUoJ25vdGlmeScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51cGRhdGVDaGFubmVsKS50b0JlKCdzdGFibGUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc2FmZXR5TGV2ZWwpLnRvQmUoJ2JhbGFuY2VkJyk7XG5cbiAgICAgIC8vIFZlcmlmeSByZWFkbGluZSB3YXMgY2xvc2VkXG4gICAgICBleHBlY3QobW9ja1JsLmxpc3RlbmVyQ291bnQoJ2Nsb3NlJykpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIHdpemFyZCBhbmQgc2F2ZSBwcmVmZXJlbmNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsnc2V0dXAtdHlwZScsIFsnMSddXSxcbiAgICAgICAgWydjb25maXJtLXF1aWNrJywgWyd5J11dXG4gICAgICBdKSk7XG5cbiAgICAgIGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgLy8gVmVyaWZ5IHNhdmVQcmVmZXJlbmNlcyB3YXMgY2FsbGVkXG4gICAgICBleHBlY3QobW9ja1NhdmVQcmVmZXJlbmNlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzd2l0Y2ggdG8gY3VzdG9tIHNldHVwIGlmIHF1aWNrIHNldHVwIGlzIGRlY2xpbmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWycxJ11dLCAvLyBDaG9vc2UgcXVpY2sgc2V0dXBcbiAgICAgICAgWydjb25maXJtLXF1aWNrJywgWyduJ11dLCAvLyBEZWNsaW5lIHF1aWNrIHNldHVwXG4gICAgICAgIFsndXBkYXRlLWJlaGF2aW9yJywgWycyJ11dLFxuICAgICAgICBbJ3VwZGF0ZS1jaGFubmVsJywgWycxJ11dLFxuICAgICAgICBbJ3NhZmV0eS1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydhdXRvLXNlY3VyaXR5JywgWyd5J11dLFxuICAgICAgICBbJ2JhY2t1cCcsIFsneSddXSxcbiAgICAgICAgWydtYXgtYmFja3VwcycsIFsnNSddXSxcbiAgICAgICAgWydhdXRvLXJvbGxiYWNrJywgWyd5J11dLFxuICAgICAgICBbJ25vdGlmaWNhdGlvbi1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydlbmFibGUtdGVsZW1ldHJ5JywgWyd5J11dLFxuICAgICAgICBbJ3NoYXJlLWVycm9ycycsIFsneSddXSxcbiAgICAgICAgWydzaGFyZS11c2FnZScsIFsnbiddXVxuICAgICAgXSkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXphcmQucnVuKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnVwZGF0ZUJlaGF2aW9yKS50b0JlKCdub3RpZnknKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFRlc3QgU2NlbmFyaW8gMjogUHJvZmlsZSBTZWxlY3Rpb24gLSBEZXZlbG9wbWVudCBQcm9maWxlXG4gICAqL1xuICBkZXNjcmliZSgncHJvZmlsZVNlbGVjdGlvbiAtIGRldiBwcm9maWxlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXNlIGJhbGFuY2VkIHByb2ZpbGUgd2hlbiBzZWxlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsnc2V0dXAtdHlwZScsIFsnMyddXSwgLy8gQ2hvb3NlIHByb2ZpbGUgc2V0dXBcbiAgICAgICAgWydwcm9maWxlLWNob2ljZScsIFsnMiddXSAvLyBDaG9vc2UgYmFsYW5jZWQgcHJvZmlsZVxuICAgICAgXSkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXphcmQucnVuKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnVwZGF0ZUJlaGF2aW9yKS50b0JlKCdub3RpZnknKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXBkYXRlQ2hhbm5lbCkudG9CZSgnc3RhYmxlJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnNhZmV0eUxldmVsKS50b0JlKCdiYWxhbmNlZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tYXhSb2xsYmFja1BvaW50cykudG9CZSg1KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGlzcGxheSBhbGwgYXZhaWxhYmxlIHByb2ZpbGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWyczJ11dLFxuICAgICAgICBbJ3Byb2ZpbGUtY2hvaWNlJywgWycyJ11dXG4gICAgICBdKSk7XG5cbiAgICAgIGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgLy8gVmVyaWZ5IHByb2ZpbGUgaW5mb3JtYXRpb24gd2FzIGxvZ2dlZFxuICAgICAgZXhwZWN0KGNvbnNvbGVMb2dTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygnQXZhaWxhYmxlIHByb2ZpbGVzJylcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUZXN0IFNjZW5hcmlvIDM6IFByb2ZpbGUgU2VsZWN0aW9uIC0gUHJvZHVjdGlvbiBQcm9maWxlXG4gICAqL1xuICBkZXNjcmliZSgncHJvZmlsZVNlbGVjdGlvbiAtIHByb2R1Y3Rpb24gcHJvZmlsZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVzZSBjb25zZXJ2YXRpdmUgcHJvZmlsZSB3aXRoIHN0cmljdGVyIHNldHRpbmdzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWyczJ11dLCAvLyBDaG9vc2UgcHJvZmlsZSBzZXR1cFxuICAgICAgICBbJ3Byb2ZpbGUtY2hvaWNlJywgWycxJ11dIC8vIENob29zZSBjb25zZXJ2YXRpdmUgcHJvZmlsZVxuICAgICAgXSkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXphcmQucnVuKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnVwZGF0ZUJlaGF2aW9yKS50b0JlKCdtYW51YWwnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc2FmZXR5TGV2ZWwpLnRvQmUoJ2NvbnNlcnZhdGl2ZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jaGVja0ZyZXF1ZW5jeSkudG9CZSgxNjgpOyAvLyBXZWVrbHlcbiAgICAgIGV4cGVjdChyZXN1bHQuYXV0b0luc3RhbGxTZWN1cml0eSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1heFJvbGxiYWNrUG9pbnRzKS50b0JlKDEwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIGFnZ3Jlc3NpdmUgcHJvZmlsZSB3aXRoIGxhdGVzdCBmZWF0dXJlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsnc2V0dXAtdHlwZScsIFsnMyddXSwgLy8gQ2hvb3NlIHByb2ZpbGUgc2V0dXBcbiAgICAgICAgWydwcm9maWxlLWNob2ljZScsIFsnMyddXSAvLyBDaG9vc2UgYWdncmVzc2l2ZSBwcm9maWxlXG4gICAgICBdKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXBkYXRlQmVoYXZpb3IpLnRvQmUoJ2F1dG8nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXBkYXRlQ2hhbm5lbCkudG9CZSgnYmV0YScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zYWZldHlMZXZlbCkudG9CZSgnZmFzdCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jaGVja0ZyZXF1ZW5jeSkudG9CZSg2KTsgLy8gRXZlcnkgNiBob3Vyc1xuICAgICAgZXhwZWN0KHJlc3VsdC5tYXhSb2xsYmFja1BvaW50cykudG9CZSgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYWxsb3dQcmVyZWxlYXNlKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBwcm9maWxlIHNlbGVjdGlvbiBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBnZXRQcm9maWxlIHRvIHJldHVybiBudWxsIGZvciBpbnZhbGlkIHNlbGVjdGlvblxuICAgICAgY29uc3QgcHJvZmlsZU1hbmFnZXIgPSBuZXcgQ29uZmlnUHJvZmlsZU1hbmFnZXIoKTtcbiAgICAgIChwcm9maWxlTWFuYWdlci5nZXRQcm9maWxlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlT25jZShudWxsKTtcblxuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWyczJ11dLFxuICAgICAgICBbJ3Byb2ZpbGUtY2hvaWNlJywgWyc5OTknXV0gLy8gSW52YWxpZCBjaG9pY2VcbiAgICAgIF0pKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHdpemFyZC5ydW4oKSkucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIHByb2ZpbGUnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIFRlc3QgU2NlbmFyaW8gNDogQ3VzdG9tIENvbmZpZ3VyYXRpb24gLSBVc2VyIElucHV0XG4gICAqL1xuICBkZXNjcmliZSgnY3VzdG9tQ29uZmlndXJhdGlvbiAtIHVzZXIgaW5wdXQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb2xsZWN0IGFsbCBjdXN0b20gc2V0dGluZ3MgZnJvbSB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWycyJ11dLCAvLyBDaG9vc2UgY3VzdG9tIHNldHVwXG4gICAgICAgIFsndXBkYXRlLWJlaGF2aW9yJywgWycxJ11dLCAvLyBBdXRvXG4gICAgICAgIFsndXBkYXRlLWNoYW5uZWwnLCBbJzInXV0sIC8vIEJldGFcbiAgICAgICAgWydzYWZldHktbGV2ZWwnLCBbJzMnXV0sIC8vIEZhc3RcbiAgICAgICAgWydhdXRvLXNlY3VyaXR5JywgWyd5J11dLFxuICAgICAgICBbJ2JhY2t1cCcsIFsneSddXSxcbiAgICAgICAgWydtYXgtYmFja3VwcycsIFsnNyddXSxcbiAgICAgICAgWydhdXRvLXJvbGxiYWNrJywgWyd5J11dLFxuICAgICAgICBbJ25vdGlmaWNhdGlvbi1sZXZlbCcsIFsnMSddXSwgLy8gQWxsXG4gICAgICAgIFsnZW5hYmxlLXRlbGVtZXRyeScsIFsneSddXSxcbiAgICAgICAgWydzaGFyZS1lcnJvcnMnLCBbJ3knXV0sXG4gICAgICAgIFsnc2hhcmUtdXNhZ2UnLCBbJ3knXV1cbiAgICAgIF0pKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2l6YXJkLnJ1bigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51cGRhdGVCZWhhdmlvcikudG9CZSgnYXV0bycpO1xuICAgICAgZXhwZWN0KHJlc3VsdC51cGRhdGVDaGFubmVsKS50b0JlKCdiZXRhJyk7XG4gICAgICBleHBlY3QocmVzdWx0LnNhZmV0eUxldmVsKS50b0JlKCdmYXN0Jyk7XG4gICAgICBleHBlY3QocmVzdWx0LmF1dG9JbnN0YWxsU2VjdXJpdHkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmJhY2t1cEJlZm9yZVVwZGF0ZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWF4Um9sbGJhY2tQb2ludHMpLnRvQmUoNyk7XG4gICAgICBleHBlY3QocmVzdWx0LnJvbGxiYWNrT25GYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5ub3RpZmljYXRpb25MZXZlbCkudG9CZSgnYWxsJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmVuYWJsZVRlbGVtZXRyeSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc2hhcmVFcnJvclJlcG9ydHMpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnNoYXJlVXNhZ2VTdGF0aXN0aWNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbm8gYmFja3VwIHNjZW5hcmlvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWycyJ11dLFxuICAgICAgICBbJ3VwZGF0ZS1iZWhhdmlvcicsIFsnMyddXSwgLy8gTWFudWFsXG4gICAgICAgIFsndXBkYXRlLWNoYW5uZWwnLCBbJzEnXV0sIC8vIFN0YWJsZVxuICAgICAgICBbJ3NhZmV0eS1sZXZlbCcsIFsnMSddXSwgLy8gQ29uc2VydmF0aXZlXG4gICAgICAgIFsnYXV0by1zZWN1cml0eScsIFsnbiddXSxcbiAgICAgICAgWydiYWNrdXAnLCBbJ24nXV0sIC8vIE5vIGJhY2t1cFxuICAgICAgICBbJ2F1dG8tcm9sbGJhY2snLCBbJ24nXV0sXG4gICAgICAgIFsnbm90aWZpY2F0aW9uLWxldmVsJywgWyc0J11dLCAvLyBOb25lXG4gICAgICAgIFsnZW5hYmxlLXRlbGVtZXRyeScsIFsnbiddXVxuICAgICAgXSkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXphcmQucnVuKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmJhY2t1cEJlZm9yZVVwZGF0ZSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJvbGxiYWNrT25GYWlsdXJlKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubm90aWZpY2F0aW9uTGV2ZWwpLnRvQmUoJ25vbmUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZW5hYmxlVGVsZW1ldHJ5KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRlbGVtZXRyeSBkaXNhYmxlZCBzY2VuYXJpbycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsnc2V0dXAtdHlwZScsIFsnMiddXSxcbiAgICAgICAgWyd1cGRhdGUtYmVoYXZpb3InLCBbJzInXV0sXG4gICAgICAgIFsndXBkYXRlLWNoYW5uZWwnLCBbJzEnXV0sXG4gICAgICAgIFsnc2FmZXR5LWxldmVsJywgWycyJ11dLFxuICAgICAgICBbJ2F1dG8tc2VjdXJpdHknLCBbJ3knXV0sXG4gICAgICAgIFsnYmFja3VwJywgWyd5J11dLFxuICAgICAgICBbJ21heC1iYWNrdXBzJywgWyc1J11dLFxuICAgICAgICBbJ2F1dG8tcm9sbGJhY2snLCBbJ3knXV0sXG4gICAgICAgIFsnbm90aWZpY2F0aW9uLWxldmVsJywgWycyJ11dLFxuICAgICAgICBbJ2VuYWJsZS10ZWxlbWV0cnknLCBbJ24nXV0gLy8gVGVsZW1ldHJ5IGRpc2FibGVkXG4gICAgICBdKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZW5hYmxlVGVsZW1ldHJ5KS50b0JlKGZhbHNlKTtcbiAgICAgIC8vIFdoZW4gdGVsZW1ldHJ5IGlzIGRpc2FibGVkLCBzaGFyZSBzZXR0aW5ncyBzaG91bGQgbm90IGJlIGFza2VkXG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUZXN0IFNjZW5hcmlvIDU6IFZhbGlkYXRpb24gRHVyaW5nIFdpemFyZCAtIEludmFsaWQgSW5wdXRzXG4gICAqL1xuICBkZXNjcmliZSgndmFsaWRhdGlvbkR1cmluZ1dpemFyZCAtIGludmFsaWQgaW5wdXRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgY2hvaWNlIGFuZCB1c2UgZGVmYXVsdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsnc2V0dXAtdHlwZScsIFsnOTk5J11dLCAvLyBJbnZhbGlkIGNob2ljZSwgc2hvdWxkIGRlZmF1bHQgdG8gJzEnXG4gICAgICAgIFsnY29uZmlybS1xdWljaycsIFsneSddXVxuICAgICAgXSkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXphcmQucnVuKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICAvLyBTaG91bGQgdXNlIGRlZmF1bHQgcXVpY2sgc2V0dXBcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IGlucHV0IGFuZCB1c2UgZGVmYXVsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmwuc2V0UmVzcG9uc2VzKG5ldyBNYXAoW1xuICAgICAgICBbJ3NldHVwLXR5cGUnLCBbJyddXSwgLy8gRW1wdHksIHNob3VsZCB1c2UgZGVmYXVsdFxuICAgICAgICBbJ2NvbmZpcm0tcXVpY2snLCBbJyddXSAvLyBFbXB0eSB5ZXMvbm8sIHNob3VsZCB1c2UgZGVmYXVsdCAodHJ1ZSlcbiAgICAgIF0pKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2l6YXJkLnJ1bigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwYXJzZSBudW1lcmljIGlucHV0cyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmwuc2V0UmVzcG9uc2VzKG5ldyBNYXAoW1xuICAgICAgICBbJ3NldHVwLXR5cGUnLCBbJzInXV0sXG4gICAgICAgIFsndXBkYXRlLWJlaGF2aW9yJywgWycyJ11dLFxuICAgICAgICBbJ3VwZGF0ZS1jaGFubmVsJywgWycxJ11dLFxuICAgICAgICBbJ3NhZmV0eS1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydhdXRvLXNlY3VyaXR5JywgWyd5J11dLFxuICAgICAgICBbJ2JhY2t1cCcsIFsneSddXSxcbiAgICAgICAgWydtYXgtYmFja3VwcycsIFsnYWJjJ11dLCAvLyBJbnZhbGlkIG51bWJlciwgc2hvdWxkIGRlZmF1bHQgdG8gNVxuICAgICAgICBbJ2F1dG8tcm9sbGJhY2snLCBbJ3knXV0sXG4gICAgICAgIFsnbm90aWZpY2F0aW9uLWxldmVsJywgWycyJ11dLFxuICAgICAgICBbJ2VuYWJsZS10ZWxlbWV0cnknLCBbJ3knXV0sXG4gICAgICAgIFsnc2hhcmUtZXJyb3JzJywgWyd5J11dLFxuICAgICAgICBbJ3NoYXJlLXVzYWdlJywgWyduJ11dXG4gICAgICBdKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWF4Um9sbGJhY2tQb2ludHMpLnRvQmUoNSk7IC8vIFNob3VsZCBmYWxsIGJhY2sgdG8gZGVmYXVsdFxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmFyaW91cyB5ZXMvbm8gaW5wdXQgZm9ybWF0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsnc2V0dXAtdHlwZScsIFsnMiddXSxcbiAgICAgICAgWyd1cGRhdGUtYmVoYXZpb3InLCBbJzInXV0sXG4gICAgICAgIFsndXBkYXRlLWNoYW5uZWwnLCBbJzEnXV0sXG4gICAgICAgIFsnc2FmZXR5LWxldmVsJywgWycyJ11dLFxuICAgICAgICBbJ2F1dG8tc2VjdXJpdHknLCBbJ1lFUyddXSwgLy8gVXBwZXJjYXNlXG4gICAgICAgIFsnYmFja3VwJywgWydZJ11dLCAvLyBTaW5nbGUgbGV0dGVyIHVwcGVyY2FzZVxuICAgICAgICBbJ21heC1iYWNrdXBzJywgWyc1J11dLFxuICAgICAgICBbJ2F1dG8tcm9sbGJhY2snLCBbJ3llcyddXSwgLy8gTG93ZXJjYXNlIGZ1bGwgd29yZFxuICAgICAgICBbJ25vdGlmaWNhdGlvbi1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydlbmFibGUtdGVsZW1ldHJ5JywgWyd5J11dLFxuICAgICAgICBbJ3NoYXJlLWVycm9ycycsIFsneSddXSxcbiAgICAgICAgWydzaGFyZS11c2FnZScsIFsnTk8nXV0gLy8gVXBwZXJjYXNlIE5PXG4gICAgICBdKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYXV0b0luc3RhbGxTZWN1cml0eSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuYmFja3VwQmVmb3JlVXBkYXRlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yb2xsYmFja09uRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuc2hhcmVVc2FnZVN0YXRpc3RpY3MpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICAvKipcbiAgICogVGVzdCBTY2VuYXJpbyA2OiBTYXZlIENvbmZpZ3VyYXRpb24gLSBQZXJzaXN0IHRvIERpc2tcbiAgICovXG4gIGRlc2NyaWJlKCdzYXZlQ29uZmlndXJhdGlvbiAtIHBlcnNpc3QgdG8gZGlzaycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNhdmUgY29uZmlndXJhdGlvbiB0byBwcmVmZXJlbmNlcyBmaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWycxJ11dLFxuICAgICAgICBbJ2NvbmZpcm0tcXVpY2snLCBbJ3knXV1cbiAgICAgIF0pKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2l6YXJkLnJ1bigpO1xuXG4gICAgICAvLyBWZXJpZnkgc2F2ZVByZWZlcmVuY2VzIHdhcyBjYWxsZWQgd2l0aCB0aGUgcmVzdWx0XG4gICAgICBleHBlY3QobW9ja1NhdmVQcmVmZXJlbmNlcykudG9IYXZlQmVlbkNhbGxlZFdpdGgocmVzdWx0KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2F2ZSBjdXN0b20gY29uZmlndXJhdGlvbiBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmwuc2V0UmVzcG9uc2VzKG5ldyBNYXAoW1xuICAgICAgICBbJ3NldHVwLXR5cGUnLCBbJzInXV0sXG4gICAgICAgIFsndXBkYXRlLWJlaGF2aW9yJywgWyczJ11dLFxuICAgICAgICBbJ3VwZGF0ZS1jaGFubmVsJywgWycxJ11dLFxuICAgICAgICBbJ3NhZmV0eS1sZXZlbCcsIFsnMSddXSxcbiAgICAgICAgWydhdXRvLXNlY3VyaXR5JywgWyduJ11dLFxuICAgICAgICBbJ2JhY2t1cCcsIFsneSddXSxcbiAgICAgICAgWydtYXgtYmFja3VwcycsIFsnMTAnXV0sXG4gICAgICAgIFsnYXV0by1yb2xsYmFjaycsIFsneSddXSxcbiAgICAgICAgWydub3RpZmljYXRpb24tbGV2ZWwnLCBbJzEnXV0sXG4gICAgICAgIFsnZW5hYmxlLXRlbGVtZXRyeScsIFsneSddXSxcbiAgICAgICAgWydzaGFyZS1lcnJvcnMnLCBbJ3knXV0sXG4gICAgICAgIFsnc2hhcmUtdXNhZ2UnLCBbJ3knXV1cbiAgICAgIF0pKTtcblxuICAgICAgYXdhaXQgd2l6YXJkLnJ1bigpO1xuXG4gICAgICBleHBlY3QobW9ja1NhdmVQcmVmZXJlbmNlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuXG4gICAgICBjb25zdCBzYXZlZFByZWZzID0gbW9ja1NhdmVQcmVmZXJlbmNlcy5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KHNhdmVkUHJlZnMudXBkYXRlQmVoYXZpb3IpLnRvQmUoJ21hbnVhbCcpO1xuICAgICAgZXhwZWN0KHNhdmVkUHJlZnMubWF4Um9sbGJhY2tQb2ludHMpLnRvQmUoMTApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IHN1Y2Nlc3MgbWVzc2FnZSBhZnRlciBzYXZpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmwuc2V0UmVzcG9uc2VzKG5ldyBNYXAoW1xuICAgICAgICBbJ3NldHVwLXR5cGUnLCBbJzEnXV0sXG4gICAgICAgIFsnY29uZmlybS1xdWljaycsIFsneSddXVxuICAgICAgXSkpO1xuXG4gICAgICBhd2FpdCB3aXphcmQucnVuKCk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlTG9nU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1NldHVwIGNvbXBsZXRlJylcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBBZGRpdGlvbmFsIFRlc3Q6IE1pbmltYWwgV2l6YXJkIChDSS9BdXRvbWF0ZWQpXG4gICAqL1xuICBkZXNjcmliZSgncnVuTWluaW1hbCAtIGF1dG9tYXRlZCBzZXR1cCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJ1biBtaW5pbWFsIHdpemFyZCBmb3IgQ0kgZW52aXJvbm1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2l6YXJkLnJ1bk1pbmltYWwoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudXBkYXRlQmVoYXZpb3IpLnRvQmUoJ21hbnVhbCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5ub3RpZmljYXRpb25MZXZlbCkudG9CZSgnbm9uZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lbmFibGVUZWxlbWV0cnkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzYXZlIG1pbmltYWwgY29uZmlndXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHdpemFyZC5ydW5NaW5pbWFsKCk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2F2ZVByZWZlcmVuY2VzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBBZGRpdGlvbmFsIFRlc3Q6IFVwZGF0ZSBQcmVmZXJlbmNlc1xuICAgKi9cbiAgZGVzY3JpYmUoJ3VwZGF0ZVByZWZlcmVuY2VzIC0gaW50ZXJhY3RpdmUgdXBkYXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXBkYXRlIGV4aXN0aW5nIHByZWZlcmVuY2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWyd1cGRhdGUtY2F0ZWdvcnknLCBbJzEnXV0sIC8vIFVwZGF0ZSBzZXR0aW5nc1xuICAgICAgICBbJ3VwZGF0ZS1iZWhhdmlvcicsIFsnMSddXSAvLyBDaGFuZ2UgdG8gYXV0b1xuICAgICAgXSkpO1xuXG4gICAgICBhd2FpdCB3aXphcmQudXBkYXRlUHJlZmVyZW5jZXMoKTtcblxuICAgICAgZXhwZWN0KG1vY2tHZXRQcmVmZXJlbmNlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tTYXZlUHJlZmVyZW5jZXMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJlc2V0IHRvIGRlZmF1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWyd1cGRhdGUtY2F0ZWdvcnknLCBbJzYnXV0sIC8vIFJlc2V0IHRvIGRlZmF1bHRzXG4gICAgICAgIFsnY29uZmlybS1yZXNldCcsIFsneSddXSAvLyBDb25maXJtIHJlc2V0XG4gICAgICBdKSk7XG5cbiAgICAgIGF3YWl0IHdpemFyZC51cGRhdGVQcmVmZXJlbmNlcygpO1xuXG4gICAgICBleHBlY3QobW9ja1Jlc2V0VG9EZWZhdWx0cykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmlldyBhbGwgc2V0dGluZ3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmwuc2V0UmVzcG9uc2VzKG5ldyBNYXAoW1xuICAgICAgICBbJ3VwZGF0ZS1jYXRlZ29yeScsIFsnNSddXSAvLyBWaWV3IGFsbCBzZXR0aW5nc1xuICAgICAgXSkpO1xuXG4gICAgICBhd2FpdCB3aXphcmQudXBkYXRlUHJlZmVyZW5jZXMoKTtcblxuICAgICAgZXhwZWN0KG1vY2tHZXRTdW1tYXJ5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSByb2xsYmFjayBzZXR0aW5ncycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsndXBkYXRlLWNhdGVnb3J5JywgWycyJ11dLCAvLyBSb2xsYmFjayBzZXR0aW5nc1xuICAgICAgICBbJ2F1dG8tcm9sbGJhY2snLCBbJ24nXV0gLy8gRGlzYWJsZSBhdXRvLXJvbGxiYWNrXG4gICAgICBdKSk7XG5cbiAgICAgIGF3YWl0IHdpemFyZC51cGRhdGVQcmVmZXJlbmNlcygpO1xuXG4gICAgICBleHBlY3QobW9ja1NhdmVQcmVmZXJlbmNlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgbm90aWZpY2F0aW9uIHNldHRpbmdzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWyd1cGRhdGUtY2F0ZWdvcnknLCBbJzMnXV0sIC8vIE5vdGlmaWNhdGlvbiBzZXR0aW5nc1xuICAgICAgICBbJ25vdGlmaWNhdGlvbi1sZXZlbCcsIFsnNCddXSAvLyBOb25lXG4gICAgICBdKSk7XG5cbiAgICAgIGF3YWl0IHdpemFyZC51cGRhdGVQcmVmZXJlbmNlcygpO1xuXG4gICAgICBleHBlY3QobW9ja1NhdmVQcmVmZXJlbmNlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgdGVsZW1ldHJ5IHNldHRpbmdzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWyd1cGRhdGUtY2F0ZWdvcnknLCBbJzQnXV0sIC8vIFRlbGVtZXRyeSBzZXR0aW5nc1xuICAgICAgICBbJ2VuYWJsZS10ZWxlbWV0cnknLCBbJ24nXV0gLy8gRGlzYWJsZSB0ZWxlbWV0cnlcbiAgICAgIF0pKTtcblxuICAgICAgYXdhaXQgd2l6YXJkLnVwZGF0ZVByZWZlcmVuY2VzKCk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2F2ZVByZWZlcmVuY2VzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCByZXNldCBpZiB1c2VyIGRlY2xpbmVzIGNvbmZpcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSbC5zZXRSZXNwb25zZXMobmV3IE1hcChbXG4gICAgICAgIFsndXBkYXRlLWNhdGVnb3J5JywgWyc2J11dLCAvLyBSZXNldCB0byBkZWZhdWx0c1xuICAgICAgICBbJ2NvbmZpcm0tcmVzZXQnLCBbJ24nXV0gLy8gRGVjbGluZSByZXNldFxuICAgICAgXSkpO1xuXG4gICAgICBhd2FpdCB3aXphcmQudXBkYXRlUHJlZmVyZW5jZXMoKTtcblxuICAgICAgZXhwZWN0KG1vY2tSZXNldFRvRGVmYXVsdHMpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBFZGdlIENhc2VzXG4gICAqL1xuICBkZXNjcmliZSgnZWRnZUNhc2VzIC0gYm91bmRhcnkgY29uZGl0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYXhpbXVtIGJhY2t1cCBwb2ludHMgaW5wdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmwuc2V0UmVzcG9uc2VzKG5ldyBNYXAoW1xuICAgICAgICBbJ3NldHVwLXR5cGUnLCBbJzInXV0sXG4gICAgICAgIFsndXBkYXRlLWJlaGF2aW9yJywgWycyJ11dLFxuICAgICAgICBbJ3VwZGF0ZS1jaGFubmVsJywgWycxJ11dLFxuICAgICAgICBbJ3NhZmV0eS1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydhdXRvLXNlY3VyaXR5JywgWyd5J11dLFxuICAgICAgICBbJ2JhY2t1cCcsIFsneSddXSxcbiAgICAgICAgWydtYXgtYmFja3VwcycsIFsnOTk5J11dLFxuICAgICAgICBbJ2F1dG8tcm9sbGJhY2snLCBbJ3knXV0sXG4gICAgICAgIFsnbm90aWZpY2F0aW9uLWxldmVsJywgWycyJ11dLFxuICAgICAgICBbJ2VuYWJsZS10ZWxlbWV0cnknLCBbJ24nXV1cbiAgICAgIF0pKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgd2l6YXJkLnJ1bigpO1xuXG4gICAgICBleHBlY3QocmVzdWx0Lm1heFJvbGxiYWNrUG9pbnRzKS50b0JlKDk5OSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB6ZXJvIGJhY2t1cCBwb2ludHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrUmwuc2V0UmVzcG9uc2VzKG5ldyBNYXAoW1xuICAgICAgICBbJ3NldHVwLXR5cGUnLCBbJzInXV0sXG4gICAgICAgIFsndXBkYXRlLWJlaGF2aW9yJywgWycyJ11dLFxuICAgICAgICBbJ3VwZGF0ZS1jaGFubmVsJywgWycxJ11dLFxuICAgICAgICBbJ3NhZmV0eS1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydhdXRvLXNlY3VyaXR5JywgWyd5J11dLFxuICAgICAgICBbJ2JhY2t1cCcsIFsneSddXSxcbiAgICAgICAgWydtYXgtYmFja3VwcycsIFsnMCddXSxcbiAgICAgICAgWydhdXRvLXJvbGxiYWNrJywgWyd5J11dLFxuICAgICAgICBbJ25vdGlmaWNhdGlvbi1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydlbmFibGUtdGVsZW1ldHJ5JywgWyduJ11dXG4gICAgICBdKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5tYXhSb2xsYmFja1BvaW50cykudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5lZ2F0aXZlIG51bWJlciBpbnB1dCBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1JsLnNldFJlc3BvbnNlcyhuZXcgTWFwKFtcbiAgICAgICAgWydzZXR1cC10eXBlJywgWycyJ11dLFxuICAgICAgICBbJ3VwZGF0ZS1iZWhhdmlvcicsIFsnMiddXSxcbiAgICAgICAgWyd1cGRhdGUtY2hhbm5lbCcsIFsnMSddXSxcbiAgICAgICAgWydzYWZldHktbGV2ZWwnLCBbJzInXV0sXG4gICAgICAgIFsnYXV0by1zZWN1cml0eScsIFsneSddXSxcbiAgICAgICAgWydiYWNrdXAnLCBbJ3knXV0sXG4gICAgICAgIFsnbWF4LWJhY2t1cHMnLCBbJy01J11dLCAvLyBOZWdhdGl2ZSBudW1iZXJcbiAgICAgICAgWydhdXRvLXJvbGxiYWNrJywgWyd5J11dLFxuICAgICAgICBbJ25vdGlmaWNhdGlvbi1sZXZlbCcsIFsnMiddXSxcbiAgICAgICAgWydlbmFibGUtdGVsZW1ldHJ5JywgWyduJ11dXG4gICAgICBdKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpemFyZC5ydW4oKTtcblxuICAgICAgLy8gU2hvdWxkIHBhcnNlIHRvIC01IG9yIGZhbGwgYmFjayB0byBkZWZhdWx0XG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5tYXhSb2xsYmFja1BvaW50cykudG9CZSgnbnVtYmVyJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=