47c84a185ec8c97089c1c17862bce948
"use strict";
/**
 * VERSATIL SDLC Framework - Logger Unit Tests
 * Enhanced Maria-QA Quality Assurance Testing
 *
 * Testing framework's own logging system
 */
Object.defineProperty(exports, "__esModule", { value: true });
const logger_1 = require("../../../src/utils/logger");
describe('VERSATILLogger', () => {
    let logger;
    let consoleLogSpy;
    let consoleWarnSpy;
    let consoleErrorSpy;
    beforeEach(() => {
        logger = new logger_1.VERSATILLogger();
        consoleLogSpy = jest.spyOn(console, 'log').mockImplementation();
        consoleWarnSpy = jest.spyOn(console, 'warn').mockImplementation();
        consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();
    });
    afterEach(() => {
        consoleLogSpy.mockRestore();
        consoleWarnSpy.mockRestore();
        consoleErrorSpy.mockRestore();
    });
    describe('Logging Methods', () => {
        it('should log debug messages correctly', () => {
            logger.debug('Test debug message', { key: 'value' }, 'test-component');
            expect(consoleLogSpy).toHaveBeenCalled();
            const logCall = consoleLogSpy.mock.calls[0][0];
            expect(logCall).toContain('DEBUG');
            expect(logCall).toContain('Test debug message');
        });
        it('should log info messages correctly', () => {
            logger.info('Test info message', { key: 'value' }, 'test-component');
            expect(consoleLogSpy).toHaveBeenCalled();
            const logCall = consoleLogSpy.mock.calls[0][0];
            expect(logCall).toContain('INFO');
            expect(logCall).toContain('Test info message');
        });
        it('should log warning messages correctly', () => {
            logger.warn('Test warning message', { key: 'value' }, 'test-component');
            expect(consoleWarnSpy).toHaveBeenCalled();
            const logCall = consoleWarnSpy.mock.calls[0][0];
            expect(logCall).toContain('WARN');
            expect(logCall).toContain('Test warning message');
        });
        it('should log error messages correctly', () => {
            logger.error('Test error message', { key: 'value' }, 'test-component');
            expect(consoleErrorSpy).toHaveBeenCalled();
            const logCall = consoleErrorSpy.mock.calls[0][0];
            expect(logCall).toContain('ERROR');
            expect(logCall).toContain('Test error message');
        });
    });
    describe('Framework Self-Logging Validation', () => {
        it('should support enhanced OPERA logging patterns', () => {
            const metadata = {
                agentId: 'maria-qa',
                activationTime: Date.now(),
                context: 'self-testing'
            };
            logger.info('Framework self-testing initiated', metadata, 'versatil-framework');
            expect(consoleLogSpy).toHaveBeenCalled();
            const logCall = consoleLogSpy.mock.calls[0][0];
            expect(logCall).toContain('maria-qa');
            expect(logCall).toContain('self-testing');
        });
        it('should handle structured logging for agent orchestration', () => {
            const agentContext = {
                agent: 'Enhanced Maria-QA',
                action: 'quality-validation',
                filePath: '/test/path',
                timestamp: new Date().toISOString()
            };
            logger.debug('Agent activation logged', agentContext, 'agent-orchestration');
            expect(consoleLogSpy).toHaveBeenCalled();
            expect(consoleLogSpy.mock.calls[0][0]).toContain('Enhanced Maria-QA');
        });
    });
    describe('Performance Requirements', () => {
        it('should log messages within performance thresholds', () => {
            const startTime = Date.now();
            for (let i = 0; i < 100; i++) {
                logger.info(`Performance test message ${i}`, { iteration: i }, 'performance-test');
            }
            const executionTime = Date.now() - startTime;
            // OPERA requirement: 100 log messages should complete in under 100ms
            expect(executionTime).toBeLessThan(100);
            expect(consoleLogSpy).toHaveBeenCalledTimes(100);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L3V0aWxzL2xvZ2dlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCxzREFBMkQ7QUFFM0QsUUFBUSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtJQUM5QixJQUFJLE1BQXNCLENBQUM7SUFDM0IsSUFBSSxhQUErQixDQUFDO0lBQ3BDLElBQUksY0FBZ0MsQ0FBQztJQUNyQyxJQUFJLGVBQWlDLENBQUM7SUFFdEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLE1BQU0sR0FBRyxJQUFJLHVCQUFjLEVBQUUsQ0FBQztRQUM5QixhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUNoRSxjQUFjLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUNsRSxlQUFlLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztJQUN0RSxDQUFDLENBQUMsQ0FBQztJQUVILFNBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDYixhQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDNUIsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzdCLGVBQWUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNoQyxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7UUFDL0IsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUM3QyxNQUFNLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFFdkUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLGdCQUFnQixF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RyxFQUFFLEdBQUcsU0FBUyxDQUFDO1lBRTdDLHFFQUFxRTtZQUNyRSxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L3V0aWxzL2xvZ2dlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVkVSU0FUSUwgU0RMQyBGcmFtZXdvcmsgLSBMb2dnZXIgVW5pdCBUZXN0c1xuICogRW5oYW5jZWQgTWFyaWEtUUEgUXVhbGl0eSBBc3N1cmFuY2UgVGVzdGluZ1xuICpcbiAqIFRlc3RpbmcgZnJhbWV3b3JrJ3Mgb3duIGxvZ2dpbmcgc3lzdGVtXG4gKi9cblxuaW1wb3J0IHsgVkVSU0FUSUxMb2dnZXIgfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvbG9nZ2VyJztcblxuZGVzY3JpYmUoJ1ZFUlNBVElMTG9nZ2VyJywgKCkgPT4ge1xuICBsZXQgbG9nZ2VyOiBWRVJTQVRJTExvZ2dlcjtcbiAgbGV0IGNvbnNvbGVMb2dTcHk6IGplc3QuU3B5SW5zdGFuY2U7XG4gIGxldCBjb25zb2xlV2FyblNweTogamVzdC5TcHlJbnN0YW5jZTtcbiAgbGV0IGNvbnNvbGVFcnJvclNweTogamVzdC5TcHlJbnN0YW5jZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBsb2dnZXIgPSBuZXcgVkVSU0FUSUxMb2dnZXIoKTtcbiAgICBjb25zb2xlTG9nU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgY29uc29sZVdhcm5TcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICd3YXJuJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gICAgY29uc29sZUVycm9yU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBjb25zb2xlTG9nU3B5Lm1vY2tSZXN0b3JlKCk7XG4gICAgY29uc29sZVdhcm5TcHkubW9ja1Jlc3RvcmUoKTtcbiAgICBjb25zb2xlRXJyb3JTcHkubW9ja1Jlc3RvcmUoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xvZ2dpbmcgTWV0aG9kcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGxvZyBkZWJ1ZyBtZXNzYWdlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBsb2dnZXIuZGVidWcoJ1Rlc3QgZGVidWcgbWVzc2FnZScsIHsga2V5OiAndmFsdWUnIH0sICd0ZXN0LWNvbXBvbmVudCcpO1xuXG4gICAgICBleHBlY3QoY29uc29sZUxvZ1NweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgY29uc3QgbG9nQ2FsbCA9IGNvbnNvbGVMb2dTcHkubW9jay5jYWxsc1swXVswXTtcbiAgICAgIGV4cGVjdChsb2dDYWxsKS50b0NvbnRhaW4oJ0RFQlVHJyk7XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdUZXN0IGRlYnVnIG1lc3NhZ2UnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIGluZm8gbWVzc2FnZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oJ1Rlc3QgaW5mbyBtZXNzYWdlJywgeyBrZXk6ICd2YWx1ZScgfSwgJ3Rlc3QtY29tcG9uZW50Jyk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlTG9nU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBjb25zdCBsb2dDYWxsID0gY29uc29sZUxvZ1NweS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignSU5GTycpO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignVGVzdCBpbmZvIG1lc3NhZ2UnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbG9nIHdhcm5pbmcgbWVzc2FnZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLndhcm4oJ1Rlc3Qgd2FybmluZyBtZXNzYWdlJywgeyBrZXk6ICd2YWx1ZScgfSwgJ3Rlc3QtY29tcG9uZW50Jyk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlV2FyblNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgY29uc3QgbG9nQ2FsbCA9IGNvbnNvbGVXYXJuU3B5Lm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdXQVJOJyk7XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdUZXN0IHdhcm5pbmcgbWVzc2FnZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgZXJyb3IgbWVzc2FnZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmVycm9yKCdUZXN0IGVycm9yIG1lc3NhZ2UnLCB7IGtleTogJ3ZhbHVlJyB9LCAndGVzdC1jb21wb25lbnQnKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVFcnJvclNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgY29uc3QgbG9nQ2FsbCA9IGNvbnNvbGVFcnJvclNweS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignRVJST1InKTtcbiAgICAgIGV4cGVjdChsb2dDYWxsKS50b0NvbnRhaW4oJ1Rlc3QgZXJyb3IgbWVzc2FnZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRnJhbWV3b3JrIFNlbGYtTG9nZ2luZyBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBlbmhhbmNlZCBPUEVSQSBsb2dnaW5nIHBhdHRlcm5zJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSB7XG4gICAgICAgIGFnZW50SWQ6ICdtYXJpYS1xYScsXG4gICAgICAgIGFjdGl2YXRpb25UaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICBjb250ZXh0OiAnc2VsZi10ZXN0aW5nJ1xuICAgICAgfTtcblxuICAgICAgbG9nZ2VyLmluZm8oJ0ZyYW1ld29yayBzZWxmLXRlc3RpbmcgaW5pdGlhdGVkJywgbWV0YWRhdGEsICd2ZXJzYXRpbC1mcmFtZXdvcmsnKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVMb2dTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGNvbnN0IGxvZ0NhbGwgPSBjb25zb2xlTG9nU3B5Lm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdtYXJpYS1xYScpO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignc2VsZi10ZXN0aW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzdHJ1Y3R1cmVkIGxvZ2dpbmcgZm9yIGFnZW50IG9yY2hlc3RyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudENvbnRleHQgPSB7XG4gICAgICAgIGFnZW50OiAnRW5oYW5jZWQgTWFyaWEtUUEnLFxuICAgICAgICBhY3Rpb246ICdxdWFsaXR5LXZhbGlkYXRpb24nLFxuICAgICAgICBmaWxlUGF0aDogJy90ZXN0L3BhdGgnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcblxuICAgICAgbG9nZ2VyLmRlYnVnKCdBZ2VudCBhY3RpdmF0aW9uIGxvZ2dlZCcsIGFnZW50Q29udGV4dCwgJ2FnZW50LW9yY2hlc3RyYXRpb24nKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVMb2dTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChjb25zb2xlTG9nU3B5Lm1vY2suY2FsbHNbMF1bMF0pLnRvQ29udGFpbignRW5oYW5jZWQgTWFyaWEtUUEnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFJlcXVpcmVtZW50cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGxvZyBtZXNzYWdlcyB3aXRoaW4gcGVyZm9ybWFuY2UgdGhyZXNob2xkcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgICAgbG9nZ2VyLmluZm8oYFBlcmZvcm1hbmNlIHRlc3QgbWVzc2FnZSAke2l9YCwgeyBpdGVyYXRpb246IGkgfSwgJ3BlcmZvcm1hbmNlLXRlc3QnKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXhlY3V0aW9uVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgIC8vIE9QRVJBIHJlcXVpcmVtZW50OiAxMDAgbG9nIG1lc3NhZ2VzIHNob3VsZCBjb21wbGV0ZSBpbiB1bmRlciAxMDBtc1xuICAgICAgZXhwZWN0KGV4ZWN1dGlvblRpbWUpLnRvQmVMZXNzVGhhbigxMDApO1xuICAgICAgZXhwZWN0KGNvbnNvbGVMb2dTcHkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxMDApO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==