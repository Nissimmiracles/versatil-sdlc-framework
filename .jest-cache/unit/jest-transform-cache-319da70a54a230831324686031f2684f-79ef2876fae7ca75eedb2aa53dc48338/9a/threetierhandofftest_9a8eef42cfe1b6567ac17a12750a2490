d839d42b3e14b78b66bdc1a326a993bc
"use strict";
/**
 * Unit Tests: Three-Tier Handoff Helper
 *
 * Coverage Target: 85%+
 *
 * Test Coverage:
 * - ThreeTierHandoffBuilder construction and configuration
 * - API endpoint, database table, UI component addition
 * - Contract building and validation
 * - Work item generation for Dana, Marcus, James
 * - Integration checkpoints creation
 * - RLS policy generation
 * - Effort estimation
 * - Error handling
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const three_tier_handoff_js_1 = require("../../../src/agents/contracts/three-tier-handoff.js");
(0, globals_1.describe)('ThreeTierHandoffBuilder', () => {
    let requirements;
    let builder;
    (0, globals_1.beforeEach)(() => {
        requirements = {
            name: 'User Authentication',
            description: 'Implement secure user login and session management',
            userStories: [
                'As a user, I want to login with email and password',
                'As a user, I want to stay logged in across sessions'
            ],
            goals: ['Secure authentication', 'Good UX'],
            constraints: ['Must use JWT', 'Must be WCAG 2.1 AA compliant']
        };
        builder = new three_tier_handoff_js_1.ThreeTierHandoffBuilder(requirements);
    });
    (0, globals_1.describe)('Builder Construction', () => {
        (0, globals_1.it)('should create builder with requirements', () => {
            (0, globals_1.expect)(builder).toBeDefined();
            (0, globals_1.expect)(builder).toBeInstanceOf(three_tier_handoff_js_1.ThreeTierHandoffBuilder);
        });
        (0, globals_1.it)('should initialize with empty endpoints, tables, components', async () => {
            const contract = await builder.build();
            // Should have default structure even with no additions
            (0, globals_1.expect)(contract.apiContract).toBeDefined();
            (0, globals_1.expect)(contract.databaseSchema).toBeDefined();
            (0, globals_1.expect)(contract.uiRequirements).toBeDefined();
        });
    });
    (0, globals_1.describe)('Adding API Endpoints', () => {
        (0, globals_1.it)('should add API endpoint', async () => {
            const endpoint = {
                method: 'POST',
                path: '/api/auth/login',
                description: 'User login endpoint'
            };
            builder.addEndpoint(endpoint);
            const contract = await builder.build();
            (0, globals_1.expect)(contract.apiContract.endpoints).toHaveLength(1);
            (0, globals_1.expect)(contract.apiContract.endpoints[0].method).toBe('POST');
            (0, globals_1.expect)(contract.apiContract.endpoints[0].path).toBe('/api/auth/login');
        });
        (0, globals_1.it)('should add multiple endpoints', async () => {
            builder
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/logout',
                description: 'Logout'
            })
                .addEndpoint({
                method: 'GET',
                path: '/api/auth/me',
                description: 'Get current user'
            });
            const contract = await builder.build();
            (0, globals_1.expect)(contract.apiContract.endpoints).toHaveLength(3);
        });
        (0, globals_1.it)('should support endpoint with request/response schemas', async () => {
            builder.addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login',
                requestSchema: {
                    email: 'string',
                    password: 'string'
                },
                responseSchema: {
                    token: 'string',
                    user: 'object'
                },
                authentication: false
            });
            const contract = await builder.build();
            const endpoint = contract.apiContract.endpoints[0];
            (0, globals_1.expect)(endpoint.requestSchema).toEqual({
                email: 'string',
                password: 'string'
            });
            (0, globals_1.expect)(endpoint.responseSchema).toEqual({
                token: 'string',
                user: 'object'
            });
            (0, globals_1.expect)(endpoint.authentication).toBe(false);
        });
        (0, globals_1.it)('should create work item for Marcus when endpoints added', async () => {
            builder.addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            });
            const contract = await builder.build();
            const marcusWork = contract.workItems.find(w => w.description.includes('API endpoints'));
            (0, globals_1.expect)(marcusWork).toBeDefined();
            (0, globals_1.expect)(marcusWork?.estimatedEffort).toBe(2); // 2 hours per endpoint
            (0, globals_1.expect)(marcusWork?.acceptanceCriteria).toContain('All endpoints implemented');
            (0, globals_1.expect)(marcusWork?.acceptanceCriteria).toContain('OWASP security compliance');
        });
    });
    (0, globals_1.describe)('Adding Database Tables', () => {
        (0, globals_1.it)('should add database table', async () => {
            const table = {
                name: 'users',
                columns: [
                    { name: 'id', type: 'uuid', nullable: false },
                    { name: 'email', type: 'text', nullable: false, unique: true }
                ]
            };
            builder.addTable(table);
            const contract = await builder.build();
            (0, globals_1.expect)(contract.databaseSchema.tables).toHaveLength(1);
            (0, globals_1.expect)(contract.databaseSchema.tables[0].name).toBe('users');
            (0, globals_1.expect)(contract.databaseSchema.tables[0].columns).toHaveLength(2);
        });
        (0, globals_1.it)('should add multiple tables', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addTable({
                name: 'sessions',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            });
            const contract = await builder.build();
            (0, globals_1.expect)(contract.databaseSchema.tables).toHaveLength(2);
        });
        (0, globals_1.it)('should support table with indexes', async () => {
            builder.addTable({
                name: 'users',
                columns: [
                    { name: 'id', type: 'uuid', nullable: false },
                    { name: 'email', type: 'text', nullable: false }
                ],
                indexes: [
                    { columns: ['email'], unique: true }
                ]
            });
            const contract = await builder.build();
            const table = contract.databaseSchema.tables[0];
            (0, globals_1.expect)(table.indexes).toHaveLength(1);
            (0, globals_1.expect)(table.indexes[0].unique).toBe(true);
        });
        (0, globals_1.it)('should support table with foreign keys', async () => {
            builder.addTable({
                name: 'sessions',
                columns: [
                    { name: 'id', type: 'uuid', nullable: false },
                    { name: 'user_id', type: 'uuid', nullable: false }
                ],
                foreignKeys: [
                    {
                        column: 'user_id',
                        references: 'users.id',
                        onDelete: 'CASCADE'
                    }
                ]
            });
            const contract = await builder.build();
            const table = contract.databaseSchema.tables[0];
            (0, globals_1.expect)(table.foreignKeys).toHaveLength(1);
            (0, globals_1.expect)(table.foreignKeys[0].onDelete).toBe('CASCADE');
        });
        (0, globals_1.it)('should create work item for Dana when tables added', async () => {
            builder.addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            });
            const contract = await builder.build();
            const danaWork = contract.workItems.find(w => w.description.includes('database schema'));
            (0, globals_1.expect)(danaWork).toBeDefined();
            (0, globals_1.expect)(danaWork?.estimatedEffort).toBe(1.5); // 1.5 hours per table
            (0, globals_1.expect)(danaWork?.acceptanceCriteria).toContain('All tables created with correct schema');
            (0, globals_1.expect)(danaWork?.acceptanceCriteria).toContain('RLS policies implemented');
        });
        (0, globals_1.it)('should generate RLS policies for tables', async () => {
            builder.addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            });
            const contract = await builder.build();
            (0, globals_1.expect)(contract.databaseSchema.rlsPolicies).toBeDefined();
            (0, globals_1.expect)(contract.databaseSchema.rlsPolicies.length).toBeGreaterThan(0);
            // Should have policies for SELECT, INSERT, UPDATE, DELETE
            const operations = contract.databaseSchema.rlsPolicies.map(p => p.operation);
            (0, globals_1.expect)(operations).toContain('SELECT');
            (0, globals_1.expect)(operations).toContain('INSERT');
            (0, globals_1.expect)(operations).toContain('UPDATE');
            (0, globals_1.expect)(operations).toContain('DELETE');
        });
        (0, globals_1.it)('should generate authentication check in RLS policies', async () => {
            builder.addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            });
            const contract = await builder.build();
            const selectPolicy = contract.databaseSchema.rlsPolicies.find(p => p.table === 'users' && p.operation === 'SELECT');
            (0, globals_1.expect)(selectPolicy?.using).toBe('auth.uid() IS NOT NULL');
        });
    });
    (0, globals_1.describe)('Adding UI Components', () => {
        (0, globals_1.it)('should add UI component', async () => {
            const component = {
                name: 'LoginForm',
                type: 'component',
                description: 'User login form with email and password'
            };
            builder.addComponent(component);
            const contract = await builder.build();
            (0, globals_1.expect)(contract.uiRequirements.components).toHaveLength(1);
            (0, globals_1.expect)(contract.uiRequirements.components[0].name).toBe('LoginForm');
        });
        (0, globals_1.it)('should add multiple components', async () => {
            builder
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            })
                .addComponent({
                name: 'useAuth',
                type: 'hook',
                description: 'Authentication hook'
            })
                .addComponent({
                name: 'LoginPage',
                type: 'page',
                description: 'Login page'
            });
            const contract = await builder.build();
            (0, globals_1.expect)(contract.uiRequirements.components).toHaveLength(3);
        });
        (0, globals_1.it)('should support component with props', async () => {
            builder.addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form',
                props: {
                    onSubmit: 'function',
                    loading: 'boolean'
                }
            });
            const contract = await builder.build();
            const component = contract.uiRequirements.components[0];
            (0, globals_1.expect)(component.props).toEqual({
                onSubmit: 'function',
                loading: 'boolean'
            });
        });
        (0, globals_1.it)('should create work item for James when components added', async () => {
            builder.addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            });
            const contract = await builder.build();
            const jamesWork = contract.workItems.find(w => w.description.includes('UI components'));
            (0, globals_1.expect)(jamesWork).toBeDefined();
            (0, globals_1.expect)(jamesWork?.estimatedEffort).toBe(1.5); // 1.5 hours per component
            (0, globals_1.expect)(jamesWork?.acceptanceCriteria).toContain('All components implemented');
            (0, globals_1.expect)(jamesWork?.acceptanceCriteria).toContain('WCAG 2.1 AA accessibility');
        });
        (0, globals_1.it)('should set accessibility requirement to AA', async () => {
            const contract = await builder.build();
            (0, globals_1.expect)(contract.uiRequirements.accessibility).toBe('AA');
        });
        (0, globals_1.it)('should set responsive breakpoints', async () => {
            const contract = await builder.build();
            (0, globals_1.expect)(contract.uiRequirements.responsive).toEqual([
                'mobile',
                'tablet',
                'desktop'
            ]);
        });
    });
    (0, globals_1.describe)('Memory Snapshot', () => {
        (0, globals_1.it)('should create minimal snapshot by default', async () => {
            const contract = await builder.build();
            (0, globals_1.expect)(contract.memorySnapshot).toBeDefined();
            (0, globals_1.expect)(contract.memorySnapshot.agentId).toBe('alex-ba');
            (0, globals_1.expect)(contract.memorySnapshot.contextSummary).toContain('User Authentication');
        });
        (0, globals_1.it)('should use provided memory snapshot', async () => {
            const customSnapshot = {
                agentId: 'alex-ba',
                timestamp: new Date(),
                memoryFiles: {
                    'requirements/auth.md': 'Authentication requirements'
                },
                criticalPatterns: [
                    {
                        category: 'security',
                        title: 'JWT pattern',
                        content: 'Use httpOnly cookies'
                    }
                ],
                contextSummary: 'Custom summary',
                estimatedTokens: 3000
            };
            builder.setMemorySnapshot(customSnapshot);
            const contract = await builder.build();
            (0, globals_1.expect)(contract.memorySnapshot.estimatedTokens).toBe(3000);
            (0, globals_1.expect)(contract.memorySnapshot.contextSummary).toBe('Custom summary');
            (0, globals_1.expect)(contract.memorySnapshot.memoryFiles['requirements/auth.md']).toBe('Authentication requirements');
        });
    });
    (0, globals_1.describe)('Work Item Dependencies', () => {
        (0, globals_1.it)('should make Marcus depend on Dana when both have work', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            });
            const contract = await builder.build();
            const marcusWork = contract.workItems.find(w => w.description.includes('API endpoints'));
            (0, globals_1.expect)(marcusWork?.dependencies).toBeDefined();
            (0, globals_1.expect)(marcusWork?.dependencies.length).toBeGreaterThan(0);
        });
        (0, globals_1.it)('should make James depend on Marcus when both have work', async () => {
            builder
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            });
            const contract = await builder.build();
            const jamesWork = contract.workItems.find(w => w.description.includes('UI components'));
            (0, globals_1.expect)(jamesWork?.dependencies).toBeDefined();
            (0, globals_1.expect)(jamesWork?.dependencies.length).toBeGreaterThan(0);
        });
    });
    (0, globals_1.describe)('Integration Checkpoints', () => {
        (0, globals_1.it)('should create integration checkpoints', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            });
            const contract = await builder.build();
            (0, globals_1.expect)(contract.integrationCheckpoints).toHaveLength(3);
        });
        (0, globals_1.it)('should create Database → API checkpoint', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            });
            const contract = await builder.build();
            const checkpoint = contract.integrationCheckpoints.find(c => c.name === 'Database → API Integration');
            (0, globals_1.expect)(checkpoint).toBeDefined();
            (0, globals_1.expect)(checkpoint?.participants).toContain('dana-database');
            (0, globals_1.expect)(checkpoint?.participants).toContain('marcus-backend');
        });
        (0, globals_1.it)('should create API → Frontend checkpoint', async () => {
            builder
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            });
            const contract = await builder.build();
            const checkpoint = contract.integrationCheckpoints.find(c => c.name === 'API → Frontend Integration');
            (0, globals_1.expect)(checkpoint).toBeDefined();
            (0, globals_1.expect)(checkpoint?.participants).toContain('marcus-backend');
            (0, globals_1.expect)(checkpoint?.participants).toContain('james-frontend');
        });
        (0, globals_1.it)('should create End-to-End checkpoint', async () => {
            const contract = await builder.build();
            const checkpoint = contract.integrationCheckpoints.find(c => c.name === 'End-to-End Validation');
            (0, globals_1.expect)(checkpoint).toBeDefined();
            (0, globals_1.expect)(checkpoint?.participants).toContain('dana-database');
            (0, globals_1.expect)(checkpoint?.participants).toContain('marcus-backend');
            (0, globals_1.expect)(checkpoint?.participants).toContain('james-frontend');
        });
    });
    (0, globals_1.describe)('Contract Building', () => {
        (0, globals_1.it)('should build complete three-tier contract', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            });
            const contract = await builder.build();
            (0, globals_1.expect)(contract.type).toBe('parallel');
            (0, globals_1.expect)(contract.receivers).toHaveLength(3);
            (0, globals_1.expect)(contract.workItems.length).toBeGreaterThan(0);
            (0, globals_1.expect)(contract.apiContract).toBeDefined();
            (0, globals_1.expect)(contract.databaseSchema).toBeDefined();
            (0, globals_1.expect)(contract.uiRequirements).toBeDefined();
            (0, globals_1.expect)(contract.integrationCheckpoints).toBeDefined();
        });
        (0, globals_1.it)('should set correct receivers for three-tier', async () => {
            const contract = await builder.build();
            const receiverIds = contract.receivers.map(r => r.agentId);
            (0, globals_1.expect)(receiverIds).toContain('dana-database');
            (0, globals_1.expect)(receiverIds).toContain('marcus-backend');
            (0, globals_1.expect)(receiverIds).toContain('james-frontend');
        });
        (0, globals_1.it)('should set receiver roles', async () => {
            const contract = await builder.build();
            const danaReceiver = contract.receivers.find(r => r.agentId === 'dana-database');
            const marcusReceiver = contract.receivers.find(r => r.agentId === 'marcus-backend');
            const jamesReceiver = contract.receivers.find(r => r.agentId === 'james-frontend');
            (0, globals_1.expect)(danaReceiver?.role).toBe('database');
            (0, globals_1.expect)(marcusReceiver?.role).toBe('api');
            (0, globals_1.expect)(jamesReceiver?.role).toBe('frontend');
        });
        (0, globals_1.it)('should set contract expiration to 24 hours', async () => {
            const contract = await builder.build();
            (0, globals_1.expect)(contract.expiresAt).toBeDefined();
            const now = new Date();
            const expiresAt = new Date(contract.expiresAt);
            const diffHours = (expiresAt.getTime() - now.getTime()) / (1000 * 60 * 60);
            (0, globals_1.expect)(diffHours).toBeCloseTo(24, 0);
        });
        (0, globals_1.it)('should include feature context', async () => {
            const contract = await builder.build();
            (0, globals_1.expect)(contract.context.feature?.name).toBe('User Authentication');
            (0, globals_1.expect)(contract.context.feature?.description).toBe('Implement secure user login and session management');
            (0, globals_1.expect)(contract.context.feature?.userStories).toHaveLength(2);
        });
        (0, globals_1.it)('should include business context', async () => {
            const contract = await builder.build();
            (0, globals_1.expect)(contract.context.business?.goals).toEqual(['Secure authentication', 'Good UX']);
            (0, globals_1.expect)(contract.context.business?.constraints).toEqual([
                'Must use JWT',
                'Must be WCAG 2.1 AA compliant'
            ]);
        });
        (0, globals_1.it)('should include technical context', async () => {
            builder.addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            });
            const contract = await builder.build();
            (0, globals_1.expect)(contract.context.technical?.apiContract).toBeDefined();
            (0, globals_1.expect)(contract.context.technical?.databaseSchema).toBeDefined();
        });
    });
    (0, globals_1.describe)('Build and Validate', () => {
        (0, globals_1.it)('should build and validate contract', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            });
            const result = await builder.buildAndValidate();
            (0, globals_1.expect)(result.contract).toBeDefined();
            (0, globals_1.expect)(result.validation).toBeDefined();
            (0, globals_1.expect)(result.validation.valid).toBe(true);
        });
        (0, globals_1.it)('should throw error if validation fails', async () => {
            // Don't add any components (will fail three-tier validation)
            await (0, globals_1.expect)(builder.buildAndValidate()).rejects.toThrow('Contract validation failed');
        });
    });
    (0, globals_1.describe)('Quick Helper Function', () => {
        (0, globals_1.it)('should create three-tier handoff using helper', async () => {
            const contract = await (0, three_tier_handoff_js_1.createThreeTierHandoff)(requirements, {
                endpoints: [
                    {
                        method: 'POST',
                        path: '/api/auth/login',
                        description: 'Login'
                    }
                ],
                tables: [
                    {
                        name: 'users',
                        columns: [{ name: 'id', type: 'uuid', nullable: false }]
                    }
                ],
                components: [
                    {
                        name: 'LoginForm',
                        type: 'component',
                        description: 'Login form'
                    }
                ]
            });
            (0, globals_1.expect)(contract).toBeDefined();
            (0, globals_1.expect)(contract.type).toBe('parallel');
            (0, globals_1.expect)(contract.apiContract.endpoints).toHaveLength(1);
            (0, globals_1.expect)(contract.databaseSchema.tables).toHaveLength(1);
            (0, globals_1.expect)(contract.uiRequirements.components).toHaveLength(1);
        });
        (0, globals_1.it)('should use provided memory snapshot in helper', async () => {
            const customSnapshot = {
                agentId: 'alex-ba',
                timestamp: new Date(),
                memoryFiles: {},
                criticalPatterns: [],
                contextSummary: 'Custom',
                estimatedTokens: 2000
            };
            const contract = await (0, three_tier_handoff_js_1.createThreeTierHandoff)(requirements, {
                endpoints: [
                    {
                        method: 'POST',
                        path: '/api/auth/login',
                        description: 'Login'
                    }
                ],
                tables: [
                    {
                        name: 'users',
                        columns: [{ name: 'id', type: 'uuid', nullable: false }]
                    }
                ],
                components: [
                    {
                        name: 'LoginForm',
                        type: 'component',
                        description: 'Login form'
                    }
                ],
                memorySnapshot: customSnapshot
            });
            (0, globals_1.expect)(contract.memorySnapshot.estimatedTokens).toBe(2000);
        });
        (0, globals_1.it)('should throw on validation failure in helper', async () => {
            await (0, globals_1.expect)((0, three_tier_handoff_js_1.createThreeTierHandoff)(requirements, {
                endpoints: [],
                tables: [],
                components: []
            })).rejects.toThrow('Contract validation failed');
        });
    });
    (0, globals_1.describe)('Effort Estimation', () => {
        (0, globals_1.it)('should calculate total expected duration', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            });
            const contract = await builder.build();
            const totalEffort = contract.workItems.reduce((sum, item) => sum + (item.estimatedEffort || 0), 0);
            (0, globals_1.expect)(contract.expectedOutput.expectedDuration).toBe(totalEffort);
            (0, globals_1.expect)(totalEffort).toBe(5); // 1.5 (Dana) + 2 (Marcus) + 1.5 (James)
        });
        (0, globals_1.it)('should scale effort with number of endpoints', async () => {
            builder
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/login',
                description: 'Login'
            })
                .addEndpoint({
                method: 'POST',
                path: '/api/auth/logout',
                description: 'Logout'
            });
            const contract = await builder.build();
            const marcusWork = contract.workItems.find(w => w.description.includes('API endpoints'));
            (0, globals_1.expect)(marcusWork?.estimatedEffort).toBe(4); // 2 endpoints * 2 hours
        });
        (0, globals_1.it)('should scale effort with number of tables', async () => {
            builder
                .addTable({
                name: 'users',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            })
                .addTable({
                name: 'sessions',
                columns: [{ name: 'id', type: 'uuid', nullable: false }]
            });
            const contract = await builder.build();
            const danaWork = contract.workItems.find(w => w.description.includes('database schema'));
            (0, globals_1.expect)(danaWork?.estimatedEffort).toBe(3); // 2 tables * 1.5 hours
        });
        (0, globals_1.it)('should scale effort with number of components', async () => {
            builder
                .addComponent({
                name: 'LoginForm',
                type: 'component',
                description: 'Login form'
            })
                .addComponent({
                name: 'useAuth',
                type: 'hook',
                description: 'Auth hook'
            });
            const contract = await builder.build();
            const jamesWork = contract.workItems.find(w => w.description.includes('UI components'));
            (0, globals_1.expect)(jamesWork?.estimatedEffort).toBe(3); // 2 components * 1.5 hours
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L2NvbnRyYWN0cy90aHJlZS10aWVyLWhhbmRvZmYudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7O0dBY0c7O0FBRUgsMkNBQWlFO0FBQ2pFLCtGQU82RDtBQU03RCxJQUFBLGtCQUFRLEVBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO0lBQ3ZDLElBQUksWUFBaUMsQ0FBQztJQUN0QyxJQUFJLE9BQWdDLENBQUM7SUFFckMsSUFBQSxvQkFBVSxFQUFDLEdBQUcsRUFBRTtRQUNkLFlBQVksR0FBRztZQUNiLElBQUksRUFBRSxxQkFBcUI7WUFDM0IsV0FBVyxFQUFFLG9EQUFvRDtZQUNqRSxXQUFXLEVBQUU7Z0JBQ1gsb0RBQW9EO2dCQUNwRCxxREFBcUQ7YUFDdEQ7WUFDRCxLQUFLLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxTQUFTLENBQUM7WUFDM0MsV0FBVyxFQUFFLENBQUMsY0FBYyxFQUFFLCtCQUErQixDQUFDO1NBQy9ELENBQUM7UUFFRixPQUFPLEdBQUcsSUFBSSwrQ0FBdUIsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUN0RCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQyxzQkFBc0IsRUFBRSxHQUFHLEVBQUU7UUFDcEMsSUFBQSxZQUFFLEVBQUMseUNBQXlDLEVBQUUsR0FBRyxFQUFFO1lBQ2pELElBQUEsZ0JBQU0sRUFBQyxPQUFPLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUM5QixJQUFBLGdCQUFNLEVBQUMsT0FBTyxDQUFDLENBQUMsY0FBYyxDQUFDLCtDQUF1QixDQUFDLENBQUM7UUFDMUQsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLFlBQUUsRUFBQyw0REFBNEQsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMxRSxNQUFNLFFBQVEsR0FBRyxNQUFNLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUV2Qyx1REFBdUQ7WUFDdkQsSUFBQSxnQkFB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QUFLLEVBQUUsQ0FBQztZQUV2QyxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUM1QyxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FDeEMsQ0FBQztZQUVGLElBQUEsZ0JBQU0sRUFBQyxTQUFTLEVBQUUsZUFBZSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsMkJBQTJCO1FBQ3pFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbmlzc2ltbWVuYXNoZS9WRVJTQVRJTCBTRExDIEZXL3Rlc3RzL3VuaXQvY29udHJhY3RzL3RocmVlLXRpZXItaGFuZG9mZi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pdCBUZXN0czogVGhyZWUtVGllciBIYW5kb2ZmIEhlbHBlclxuICpcbiAqIENvdmVyYWdlIFRhcmdldDogODUlK1xuICpcbiAqIFRlc3QgQ292ZXJhZ2U6XG4gKiAtIFRocmVlVGllckhhbmRvZmZCdWlsZGVyIGNvbnN0cnVjdGlvbiBhbmQgY29uZmlndXJhdGlvblxuICogLSBBUEkgZW5kcG9pbnQsIGRhdGFiYXNlIHRhYmxlLCBVSSBjb21wb25lbnQgYWRkaXRpb25cbiAqIC0gQ29udHJhY3QgYnVpbGRpbmcgYW5kIHZhbGlkYXRpb25cbiAqIC0gV29yayBpdGVtIGdlbmVyYXRpb24gZm9yIERhbmEsIE1hcmN1cywgSmFtZXNcbiAqIC0gSW50ZWdyYXRpb24gY2hlY2twb2ludHMgY3JlYXRpb25cbiAqIC0gUkxTIHBvbGljeSBnZW5lcmF0aW9uXG4gKiAtIEVmZm9ydCBlc3RpbWF0aW9uXG4gKiAtIEVycm9yIGhhbmRsaW5nXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7XG4gIFRocmVlVGllckhhbmRvZmZCdWlsZGVyLFxuICBjcmVhdGVUaHJlZVRpZXJIYW5kb2ZmLFxuICBGZWF0dXJlUmVxdWlyZW1lbnRzLFxuICBBUElFbmRwb2ludCxcbiAgRGF0YWJhc2VUYWJsZSxcbiAgVUlDb21wb25lbnRcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2FnZW50cy9jb250cmFjdHMvdGhyZWUtdGllci1oYW5kb2ZmLmpzJztcbmltcG9ydCB7XG4gIFRocmVlVGllckhhbmRvZmZDb250cmFjdCxcbiAgTWVtb3J5U25hcHNob3Rcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2FnZW50cy9jb250cmFjdHMvYWdlbnQtaGFuZG9mZi1jb250cmFjdC5qcyc7XG5cbmRlc2NyaWJlKCdUaHJlZVRpZXJIYW5kb2ZmQnVpbGRlcicsICgpID0+IHtcbiAgbGV0IHJlcXVpcmVtZW50czogRmVhdHVyZVJlcXVpcmVtZW50cztcbiAgbGV0IGJ1aWxkZXI6IFRocmVlVGllckhhbmRvZmZCdWlsZGVyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHJlcXVpcmVtZW50cyA9IHtcbiAgICAgIG5hbWU6ICdVc2VyIEF1dGhlbnRpY2F0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnSW1wbGVtZW50IHNlY3VyZSB1c2VyIGxvZ2luIGFuZCBzZXNzaW9uIG1hbmFnZW1lbnQnLFxuICAgICAgdXNlclN0b3JpZXM6IFtcbiAgICAgICAgJ0FzIGEgdXNlciwgSSB3YW50IHRvIGxvZ2luIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkJyxcbiAgICAgICAgJ0FzIGEgdXNlciwgSSB3YW50IHRvIHN0YXkgbG9nZ2VkIGluIGFjcm9zcyBzZXNzaW9ucydcbiAgICAgIF0sXG4gICAgICBnb2FsczogWydTZWN1cmUgYXV0aGVudGljYXRpb24nLCAnR29vZCBVWCddLFxuICAgICAgY29uc3RyYWludHM6IFsnTXVzdCB1c2UgSldUJywgJ011c3QgYmUgV0NBRyAyLjEgQUEgY29tcGxpYW50J11cbiAgICB9O1xuXG4gICAgYnVpbGRlciA9IG5ldyBUaHJlZVRpZXJIYW5kb2ZmQnVpbGRlcihyZXF1aXJlbWVudHMpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQnVpbGRlciBDb25zdHJ1Y3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYnVpbGRlciB3aXRoIHJlcXVpcmVtZW50cycsICgpID0+IHtcbiAgICAgIGV4cGVjdChidWlsZGVyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGJ1aWxkZXIpLnRvQmVJbnN0YW5jZU9mKFRocmVlVGllckhhbmRvZmZCdWlsZGVyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGVtcHR5IGVuZHBvaW50cywgdGFibGVzLCBjb21wb25lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIC8vIFNob3VsZCBoYXZlIGRlZmF1bHQgc3RydWN0dXJlIGV2ZW4gd2l0aCBubyBhZGRpdGlvbnNcbiAgICAgIGV4cGVjdChjb250cmFjdC5hcGlDb250cmFjdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjb250cmFjdC5kYXRhYmFzZVNjaGVtYSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjb250cmFjdC51aVJlcXVpcmVtZW50cykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FkZGluZyBBUEkgRW5kcG9pbnRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYWRkIEFQSSBlbmRwb2ludCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVuZHBvaW50OiBBUElFbmRwb2ludCA9IHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9naW4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgbG9naW4gZW5kcG9pbnQnXG4gICAgICB9O1xuXG4gICAgICBidWlsZGVyLmFkZEVuZHBvaW50KGVuZHBvaW50KTtcbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBleHBlY3QoY29udHJhY3QuYXBpQ29udHJhY3QuZW5kcG9pbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoY29udHJhY3QuYXBpQ29udHJhY3QuZW5kcG9pbnRzWzBdLm1ldGhvZCkudG9CZSgnUE9TVCcpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LmFwaUNvbnRyYWN0LmVuZHBvaW50c1swXS5wYXRoKS50b0JlKCcvYXBpL2F1dGgvbG9naW4nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWRkIG11bHRpcGxlIGVuZHBvaW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLmFkZEVuZHBvaW50KHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBwYXRoOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJ1xuICAgICAgICB9KVxuICAgICAgICAuYWRkRW5kcG9pbnQoe1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9nb3V0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ291dCdcbiAgICAgICAgfSlcbiAgICAgICAgLmFkZEVuZHBvaW50KHtcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbWUnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnR2V0IGN1cnJlbnQgdXNlcidcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBleHBlY3QoY29udHJhY3QuYXBpQ29udHJhY3QuZW5kcG9pbnRzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgZW5kcG9pbnQgd2l0aCByZXF1ZXN0L3Jlc3BvbnNlIHNjaGVtYXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBidWlsZGVyLmFkZEVuZHBvaW50KHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9naW4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJyxcbiAgICAgICAgcmVxdWVzdFNjaGVtYToge1xuICAgICAgICAgIGVtYWlsOiAnc3RyaW5nJyxcbiAgICAgICAgICBwYXNzd29yZDogJ3N0cmluZydcbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2VTY2hlbWE6IHtcbiAgICAgICAgICB0b2tlbjogJ3N0cmluZycsXG4gICAgICAgICAgdXNlcjogJ29iamVjdCdcbiAgICAgICAgfSxcbiAgICAgICAgYXV0aGVudGljYXRpb246IGZhbHNlXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IGVuZHBvaW50ID0gY29udHJhY3QuYXBpQ29udHJhY3QuZW5kcG9pbnRzWzBdO1xuICAgICAgZXhwZWN0KGVuZHBvaW50LnJlcXVlc3RTY2hlbWEpLnRvRXF1YWwoe1xuICAgICAgICBlbWFpbDogJ3N0cmluZycsXG4gICAgICAgIHBhc3N3b3JkOiAnc3RyaW5nJ1xuICAgICAgfSk7XG4gICAgICBleHBlY3QoZW5kcG9pbnQucmVzcG9uc2VTY2hlbWEpLnRvRXF1YWwoe1xuICAgICAgICB0b2tlbjogJ3N0cmluZycsXG4gICAgICAgIHVzZXI6ICdvYmplY3QnXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChlbmRwb2ludC5hdXRoZW50aWNhdGlvbikudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB3b3JrIGl0ZW0gZm9yIE1hcmN1cyB3aGVuIGVuZHBvaW50cyBhZGRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXIuYWRkRW5kcG9pbnQoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgcGF0aDogJy9hcGkvYXV0aC9sb2dpbicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4nXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IG1hcmN1c1dvcmsgPSBjb250cmFjdC53b3JrSXRlbXMuZmluZCh3ID0+XG4gICAgICAgIHcuZGVzY3JpcHRpb24uaW5jbHVkZXMoJ0FQSSBlbmRwb2ludHMnKVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1hcmN1c1dvcmspLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWFyY3VzV29yaz8uZXN0aW1hdGVkRWZmb3J0KS50b0JlKDIpOyAvLyAyIGhvdXJzIHBlciBlbmRwb2ludFxuICAgICAgZXhwZWN0KG1hcmN1c1dvcms/LmFjY2VwdGFuY2VDcml0ZXJpYSkudG9Db250YWluKCdBbGwgZW5kcG9pbnRzIGltcGxlbWVudGVkJyk7XG4gICAgICBleHBlY3QobWFyY3VzV29yaz8uYWNjZXB0YW5jZUNyaXRlcmlhKS50b0NvbnRhaW4oJ09XQVNQIHNlY3VyaXR5IGNvbXBsaWFuY2UnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FkZGluZyBEYXRhYmFzZSBUYWJsZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhZGQgZGF0YWJhc2UgdGFibGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0YWJsZTogRGF0YWJhc2VUYWJsZSA9IHtcbiAgICAgICAgbmFtZTogJ3VzZXJzJyxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHsgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICB7IG5hbWU6ICdlbWFpbCcsIHR5cGU6ICd0ZXh0JywgbnVsbGFibGU6IGZhbHNlLCB1bmlxdWU6IHRydWUgfVxuICAgICAgICBdXG4gICAgICB9O1xuXG4gICAgICBidWlsZGVyLmFkZFRhYmxlKHRhYmxlKTtcbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBleHBlY3QoY29udHJhY3QuZGF0YWJhc2VTY2hlbWEudGFibGVzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoY29udHJhY3QuZGF0YWJhc2VTY2hlbWEudGFibGVzWzBdLm5hbWUpLnRvQmUoJ3VzZXJzJyk7XG4gICAgICBleHBlY3QoY29udHJhY3QuZGF0YWJhc2VTY2hlbWEudGFibGVzWzBdLmNvbHVtbnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWRkIG11bHRpcGxlIHRhYmxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLmFkZFRhYmxlKHtcbiAgICAgICAgICBuYW1lOiAndXNlcnMnLFxuICAgICAgICAgIGNvbHVtbnM6IFt7IG5hbWU6ICdpZCcsIHR5cGU6ICd1dWlkJywgbnVsbGFibGU6IGZhbHNlIH1dXG4gICAgICAgIH0pXG4gICAgICAgIC5hZGRUYWJsZSh7XG4gICAgICAgICAgbmFtZTogJ3Nlc3Npb25zJyxcbiAgICAgICAgICBjb2x1bW5zOiBbeyBuYW1lOiAnaWQnLCB0eXBlOiAndXVpZCcsIG51bGxhYmxlOiBmYWxzZSB9XVxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGV4cGVjdChjb250cmFjdC5kYXRhYmFzZVNjaGVtYS50YWJsZXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCB0YWJsZSB3aXRoIGluZGV4ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBidWlsZGVyLmFkZFRhYmxlKHtcbiAgICAgICAgbmFtZTogJ3VzZXJzJyxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHsgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICB7IG5hbWU6ICdlbWFpbCcsIHR5cGU6ICd0ZXh0JywgbnVsbGFibGU6IGZhbHNlIH1cbiAgICAgICAgXSxcbiAgICAgICAgaW5kZXhlczogW1xuICAgICAgICAgIHsgY29sdW1uczogWydlbWFpbCddLCB1bmlxdWU6IHRydWUgfVxuICAgICAgICBdXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IHRhYmxlID0gY29udHJhY3QuZGF0YWJhc2VTY2hlbWEudGFibGVzWzBdO1xuICAgICAgZXhwZWN0KHRhYmxlLmluZGV4ZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdCh0YWJsZS5pbmRleGVzIVswXS51bmlxdWUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgdGFibGUgd2l0aCBmb3JlaWduIGtleXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBidWlsZGVyLmFkZFRhYmxlKHtcbiAgICAgICAgbmFtZTogJ3Nlc3Npb25zJyxcbiAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgIHsgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfSxcbiAgICAgICAgICB7IG5hbWU6ICd1c2VyX2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfVxuICAgICAgICBdLFxuICAgICAgICBmb3JlaWduS2V5czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbHVtbjogJ3VzZXJfaWQnLFxuICAgICAgICAgICAgcmVmZXJlbmNlczogJ3VzZXJzLmlkJyxcbiAgICAgICAgICAgIG9uRGVsZXRlOiAnQ0FTQ0FERSdcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgY29uc3QgdGFibGUgPSBjb250cmFjdC5kYXRhYmFzZVNjaGVtYS50YWJsZXNbMF07XG4gICAgICBleHBlY3QodGFibGUuZm9yZWlnbktleXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdCh0YWJsZS5mb3JlaWduS2V5cyFbMF0ub25EZWxldGUpLnRvQmUoJ0NBU0NBREUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIHdvcmsgaXRlbSBmb3IgRGFuYSB3aGVuIHRhYmxlcyBhZGRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXIuYWRkVGFibGUoe1xuICAgICAgICBuYW1lOiAndXNlcnMnLFxuICAgICAgICBjb2x1bW5zOiBbeyBuYW1lOiAnaWQnLCB0eXBlOiAndXVpZCcsIG51bGxhYmxlOiBmYWxzZSB9XVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBjb25zdCBkYW5hV29yayA9IGNvbnRyYWN0LndvcmtJdGVtcy5maW5kKHcgPT5cbiAgICAgICAgdy5kZXNjcmlwdGlvbi5pbmNsdWRlcygnZGF0YWJhc2Ugc2NoZW1hJylcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChkYW5hV29yaykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChkYW5hV29yaz8uZXN0aW1hdGVkRWZmb3J0KS50b0JlKDEuNSk7IC8vIDEuNSBob3VycyBwZXIgdGFibGVcbiAgICAgIGV4cGVjdChkYW5hV29yaz8uYWNjZXB0YW5jZUNyaXRlcmlhKS50b0NvbnRhaW4oJ0FsbCB0YWJsZXMgY3JlYXRlZCB3aXRoIGNvcnJlY3Qgc2NoZW1hJyk7XG4gICAgICBleHBlY3QoZGFuYVdvcms/LmFjY2VwdGFuY2VDcml0ZXJpYSkudG9Db250YWluKCdSTFMgcG9saWNpZXMgaW1wbGVtZW50ZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgUkxTIHBvbGljaWVzIGZvciB0YWJsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBidWlsZGVyLmFkZFRhYmxlKHtcbiAgICAgICAgbmFtZTogJ3VzZXJzJyxcbiAgICAgICAgY29sdW1uczogW3sgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfV1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0LmRhdGFiYXNlU2NoZW1hLnJsc1BvbGljaWVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LmRhdGFiYXNlU2NoZW1hLnJsc1BvbGljaWVzIS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgLy8gU2hvdWxkIGhhdmUgcG9saWNpZXMgZm9yIFNFTEVDVCwgSU5TRVJULCBVUERBVEUsIERFTEVURVxuICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IGNvbnRyYWN0LmRhdGFiYXNlU2NoZW1hLnJsc1BvbGljaWVzIS5tYXAocCA9PiBwLm9wZXJhdGlvbik7XG4gICAgICBleHBlY3Qob3BlcmF0aW9ucykudG9Db250YWluKCdTRUxFQ1QnKTtcbiAgICAgIGV4cGVjdChvcGVyYXRpb25zKS50b0NvbnRhaW4oJ0lOU0VSVCcpO1xuICAgICAgZXhwZWN0KG9wZXJhdGlvbnMpLnRvQ29udGFpbignVVBEQVRFJyk7XG4gICAgICBleHBlY3Qob3BlcmF0aW9ucykudG9Db250YWluKCdERUxFVEUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgYXV0aGVudGljYXRpb24gY2hlY2sgaW4gUkxTIHBvbGljaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlci5hZGRUYWJsZSh7XG4gICAgICAgIG5hbWU6ICd1c2VycycsXG4gICAgICAgIGNvbHVtbnM6IFt7IG5hbWU6ICdpZCcsIHR5cGU6ICd1dWlkJywgbnVsbGFibGU6IGZhbHNlIH1dXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IHNlbGVjdFBvbGljeSA9IGNvbnRyYWN0LmRhdGFiYXNlU2NoZW1hLnJsc1BvbGljaWVzIS5maW5kKFxuICAgICAgICBwID0+IHAudGFibGUgPT09ICd1c2VycycgJiYgcC5vcGVyYXRpb24gPT09ICdTRUxFQ1QnXG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2VsZWN0UG9saWN5Py51c2luZykudG9CZSgnYXV0aC51aWQoKSBJUyBOT1QgTlVMTCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWRkaW5nIFVJIENvbXBvbmVudHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhZGQgVUkgY29tcG9uZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50OiBVSUNvbXBvbmVudCA9IHtcbiAgICAgICAgbmFtZTogJ0xvZ2luRm9ybScsXG4gICAgICAgIHR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1VzZXIgbG9naW4gZm9ybSB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZCdcbiAgICAgIH07XG5cbiAgICAgIGJ1aWxkZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0LnVpUmVxdWlyZW1lbnRzLmNvbXBvbmVudHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChjb250cmFjdC51aVJlcXVpcmVtZW50cy5jb21wb25lbnRzWzBdLm5hbWUpLnRvQmUoJ0xvZ2luRm9ybScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhZGQgbXVsdGlwbGUgY29tcG9uZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLmFkZENvbXBvbmVudCh7XG4gICAgICAgICAgbmFtZTogJ0xvZ2luRm9ybScsXG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMb2dpbiBmb3JtJ1xuICAgICAgICB9KVxuICAgICAgICAuYWRkQ29tcG9uZW50KHtcbiAgICAgICAgICBuYW1lOiAndXNlQXV0aCcsXG4gICAgICAgICAgdHlwZTogJ2hvb2snLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQXV0aGVudGljYXRpb24gaG9vaydcbiAgICAgICAgfSlcbiAgICAgICAgLmFkZENvbXBvbmVudCh7XG4gICAgICAgICAgbmFtZTogJ0xvZ2luUGFnZScsXG4gICAgICAgICAgdHlwZTogJ3BhZ2UnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4gcGFnZSdcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBleHBlY3QoY29udHJhY3QudWlSZXF1aXJlbWVudHMuY29tcG9uZW50cykudG9IYXZlTGVuZ3RoKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGNvbXBvbmVudCB3aXRoIHByb3BzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlci5hZGRDb21wb25lbnQoe1xuICAgICAgICBuYW1lOiAnTG9naW5Gb3JtJyxcbiAgICAgICAgdHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4gZm9ybScsXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgb25TdWJtaXQ6ICdmdW5jdGlvbicsXG4gICAgICAgICAgbG9hZGluZzogJ2Jvb2xlYW4nXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgY29uc3QgY29tcG9uZW50ID0gY29udHJhY3QudWlSZXF1aXJlbWVudHMuY29tcG9uZW50c1swXTtcbiAgICAgIGV4cGVjdChjb21wb25lbnQucHJvcHMpLnRvRXF1YWwoe1xuICAgICAgICBvblN1Ym1pdDogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbG9hZGluZzogJ2Jvb2xlYW4nXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIHdvcmsgaXRlbSBmb3IgSmFtZXMgd2hlbiBjb21wb25lbnRzIGFkZGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlci5hZGRDb21wb25lbnQoe1xuICAgICAgICBuYW1lOiAnTG9naW5Gb3JtJyxcbiAgICAgICAgdHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4gZm9ybSdcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgY29uc3QgamFtZXNXb3JrID0gY29udHJhY3Qud29ya0l0ZW1zLmZpbmQodyA9PlxuICAgICAgICB3LmRlc2NyaXB0aW9uLmluY2x1ZGVzKCdVSSBjb21wb25lbnRzJylcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChqYW1lc1dvcmspLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoamFtZXNXb3JrPy5lc3RpbWF0ZWRFZmZvcnQpLnRvQmUoMS41KTsgLy8gMS41IGhvdXJzIHBlciBjb21wb25lbnRcbiAgICAgIGV4cGVjdChqYW1lc1dvcms/LmFjY2VwdGFuY2VDcml0ZXJpYSkudG9Db250YWluKCdBbGwgY29tcG9uZW50cyBpbXBsZW1lbnRlZCcpO1xuICAgICAgZXhwZWN0KGphbWVzV29yaz8uYWNjZXB0YW5jZUNyaXRlcmlhKS50b0NvbnRhaW4oJ1dDQUcgMi4xIEFBIGFjY2Vzc2liaWxpdHknKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2V0IGFjY2Vzc2liaWxpdHkgcmVxdWlyZW1lbnQgdG8gQUEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0LnVpUmVxdWlyZW1lbnRzLmFjY2Vzc2liaWxpdHkpLnRvQmUoJ0FBJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCByZXNwb25zaXZlIGJyZWFrcG9pbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGV4cGVjdChjb250cmFjdC51aVJlcXVpcmVtZW50cy5yZXNwb25zaXZlKS50b0VxdWFsKFtcbiAgICAgICAgJ21vYmlsZScsXG4gICAgICAgICd0YWJsZXQnLFxuICAgICAgICAnZGVza3RvcCdcbiAgICAgIF0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWVtb3J5IFNuYXBzaG90JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIG1pbmltYWwgc25hcHNob3QgYnkgZGVmYXVsdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBleHBlY3QoY29udHJhY3QubWVtb3J5U25hcHNob3QpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY29udHJhY3QubWVtb3J5U25hcHNob3QuYWdlbnRJZCkudG9CZSgnYWxleC1iYScpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0Lm1lbW9yeVNuYXBzaG90LmNvbnRleHRTdW1tYXJ5KS50b0NvbnRhaW4oJ1VzZXIgQXV0aGVudGljYXRpb24nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXNlIHByb3ZpZGVkIG1lbW9yeSBzbmFwc2hvdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbVNuYXBzaG90OiBNZW1vcnlTbmFwc2hvdCA9IHtcbiAgICAgICAgYWdlbnRJZDogJ2FsZXgtYmEnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIG1lbW9yeUZpbGVzOiB7XG4gICAgICAgICAgJ3JlcXVpcmVtZW50cy9hdXRoLm1kJzogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVtZW50cydcbiAgICAgICAgfSxcbiAgICAgICAgY3JpdGljYWxQYXR0ZXJuczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnc2VjdXJpdHknLFxuICAgICAgICAgICAgdGl0bGU6ICdKV1QgcGF0dGVybicsXG4gICAgICAgICAgICBjb250ZW50OiAnVXNlIGh0dHBPbmx5IGNvb2tpZXMnXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBjb250ZXh0U3VtbWFyeTogJ0N1c3RvbSBzdW1tYXJ5JyxcbiAgICAgICAgZXN0aW1hdGVkVG9rZW5zOiAzMDAwXG4gICAgICB9O1xuXG4gICAgICBidWlsZGVyLnNldE1lbW9yeVNuYXBzaG90KGN1c3RvbVNuYXBzaG90KTtcbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBleHBlY3QoY29udHJhY3QubWVtb3J5U25hcHNob3QuZXN0aW1hdGVkVG9rZW5zKS50b0JlKDMwMDApO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0Lm1lbW9yeVNuYXBzaG90LmNvbnRleHRTdW1tYXJ5KS50b0JlKCdDdXN0b20gc3VtbWFyeScpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0Lm1lbW9yeVNuYXBzaG90Lm1lbW9yeUZpbGVzWydyZXF1aXJlbWVudHMvYXV0aC5tZCddKS50b0JlKFxuICAgICAgICAnQXV0aGVudGljYXRpb24gcmVxdWlyZW1lbnRzJ1xuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1dvcmsgSXRlbSBEZXBlbmRlbmNpZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBtYWtlIE1hcmN1cyBkZXBlbmQgb24gRGFuYSB3aGVuIGJvdGggaGF2ZSB3b3JrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlclxuICAgICAgICAuYWRkVGFibGUoe1xuICAgICAgICAgIG5hbWU6ICd1c2VycycsXG4gICAgICAgICAgY29sdW1uczogW3sgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfV1cbiAgICAgICAgfSlcbiAgICAgICAgLmFkZEVuZHBvaW50KHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBwYXRoOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJ1xuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IG1hcmN1c1dvcmsgPSBjb250cmFjdC53b3JrSXRlbXMuZmluZCh3ID0+XG4gICAgICAgIHcuZGVzY3JpcHRpb24uaW5jbHVkZXMoJ0FQSSBlbmRwb2ludHMnKVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1hcmN1c1dvcms/LmRlcGVuZGVuY2llcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChtYXJjdXNXb3JrPy5kZXBlbmRlbmNpZXMhLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWtlIEphbWVzIGRlcGVuZCBvbiBNYXJjdXMgd2hlbiBib3RoIGhhdmUgd29yaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLmFkZEVuZHBvaW50KHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBwYXRoOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJ1xuICAgICAgICB9KVxuICAgICAgICAuYWRkQ29tcG9uZW50KHtcbiAgICAgICAgICBuYW1lOiAnTG9naW5Gb3JtJyxcbiAgICAgICAgICB0eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luIGZvcm0nXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgY29uc3QgamFtZXNXb3JrID0gY29udHJhY3Qud29ya0l0ZW1zLmZpbmQodyA9PlxuICAgICAgICB3LmRlc2NyaXB0aW9uLmluY2x1ZGVzKCdVSSBjb21wb25lbnRzJylcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChqYW1lc1dvcms/LmRlcGVuZGVuY2llcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChqYW1lc1dvcms/LmRlcGVuZGVuY2llcyEubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBDaGVja3BvaW50cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBpbnRlZ3JhdGlvbiBjaGVja3BvaW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLmFkZFRhYmxlKHtcbiAgICAgICAgICBuYW1lOiAndXNlcnMnLFxuICAgICAgICAgIGNvbHVtbnM6IFt7IG5hbWU6ICdpZCcsIHR5cGU6ICd1dWlkJywgbnVsbGFibGU6IGZhbHNlIH1dXG4gICAgICAgIH0pXG4gICAgICAgIC5hZGRFbmRwb2ludCh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgcGF0aDogJy9hcGkvYXV0aC9sb2dpbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMb2dpbidcbiAgICAgICAgfSlcbiAgICAgICAgLmFkZENvbXBvbmVudCh7XG4gICAgICAgICAgbmFtZTogJ0xvZ2luRm9ybScsXG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMb2dpbiBmb3JtJ1xuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGV4cGVjdChjb250cmFjdC5pbnRlZ3JhdGlvbkNoZWNrcG9pbnRzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBEYXRhYmFzZSDihpIgQVBJIGNoZWNrcG9pbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBidWlsZGVyXG4gICAgICAgIC5hZGRUYWJsZSh7XG4gICAgICAgICAgbmFtZTogJ3VzZXJzJyxcbiAgICAgICAgICBjb2x1bW5zOiBbeyBuYW1lOiAnaWQnLCB0eXBlOiAndXVpZCcsIG51bGxhYmxlOiBmYWxzZSB9XVxuICAgICAgICB9KVxuICAgICAgICAuYWRkRW5kcG9pbnQoe1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9naW4nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4nXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgY29uc3QgY2hlY2twb2ludCA9IGNvbnRyYWN0LmludGVncmF0aW9uQ2hlY2twb2ludHMuZmluZChjID0+XG4gICAgICAgIGMubmFtZSA9PT0gJ0RhdGFiYXNlIOKGkiBBUEkgSW50ZWdyYXRpb24nXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoY2hlY2twb2ludCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjaGVja3BvaW50Py5wYXJ0aWNpcGFudHMpLnRvQ29udGFpbignZGFuYS1kYXRhYmFzZScpO1xuICAgICAgZXhwZWN0KGNoZWNrcG9pbnQ/LnBhcnRpY2lwYW50cykudG9Db250YWluKCdtYXJjdXMtYmFja2VuZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgQVBJIOKGkiBGcm9udGVuZCBjaGVja3BvaW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlclxuICAgICAgICAuYWRkRW5kcG9pbnQoe1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9naW4nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4nXG4gICAgICAgIH0pXG4gICAgICAgIC5hZGRDb21wb25lbnQoe1xuICAgICAgICAgIG5hbWU6ICdMb2dpbkZvcm0nLFxuICAgICAgICAgIHR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4gZm9ybSdcbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBjb25zdCBjaGVja3BvaW50ID0gY29udHJhY3QuaW50ZWdyYXRpb25DaGVja3BvaW50cy5maW5kKGMgPT5cbiAgICAgICAgYy5uYW1lID09PSAnQVBJIOKGkiBGcm9udGVuZCBJbnRlZ3JhdGlvbidcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChjaGVja3BvaW50KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNoZWNrcG9pbnQ/LnBhcnRpY2lwYW50cykudG9Db250YWluKCdtYXJjdXMtYmFja2VuZCcpO1xuICAgICAgZXhwZWN0KGNoZWNrcG9pbnQ/LnBhcnRpY2lwYW50cykudG9Db250YWluKCdqYW1lcy1mcm9udGVuZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgRW5kLXRvLUVuZCBjaGVja3BvaW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IGNoZWNrcG9pbnQgPSBjb250cmFjdC5pbnRlZ3JhdGlvbkNoZWNrcG9pbnRzLmZpbmQoYyA9PlxuICAgICAgICBjLm5hbWUgPT09ICdFbmQtdG8tRW5kIFZhbGlkYXRpb24nXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoY2hlY2twb2ludCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjaGVja3BvaW50Py5wYXJ0aWNpcGFudHMpLnRvQ29udGFpbignZGFuYS1kYXRhYmFzZScpO1xuICAgICAgZXhwZWN0KGNoZWNrcG9pbnQ/LnBhcnRpY2lwYW50cykudG9Db250YWluKCdtYXJjdXMtYmFja2VuZCcpO1xuICAgICAgZXhwZWN0KGNoZWNrcG9pbnQ/LnBhcnRpY2lwYW50cykudG9Db250YWluKCdqYW1lcy1mcm9udGVuZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29udHJhY3QgQnVpbGRpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBidWlsZCBjb21wbGV0ZSB0aHJlZS10aWVyIGNvbnRyYWN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlclxuICAgICAgICAuYWRkVGFibGUoe1xuICAgICAgICAgIG5hbWU6ICd1c2VycycsXG4gICAgICAgICAgY29sdW1uczogW3sgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfV1cbiAgICAgICAgfSlcbiAgICAgICAgLmFkZEVuZHBvaW50KHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBwYXRoOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJ1xuICAgICAgICB9KVxuICAgICAgICAuYWRkQ29tcG9uZW50KHtcbiAgICAgICAgICBuYW1lOiAnTG9naW5Gb3JtJyxcbiAgICAgICAgICB0eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luIGZvcm0nXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0LnR5cGUpLnRvQmUoJ3BhcmFsbGVsJyk7XG4gICAgICBleHBlY3QoY29udHJhY3QucmVjZWl2ZXJzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QoY29udHJhY3Qud29ya0l0ZW1zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LmFwaUNvbnRyYWN0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LmRhdGFiYXNlU2NoZW1hKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LnVpUmVxdWlyZW1lbnRzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LmludGVncmF0aW9uQ2hlY2twb2ludHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCBjb3JyZWN0IHJlY2VpdmVycyBmb3IgdGhyZWUtdGllcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBjb25zdCByZWNlaXZlcklkcyA9IGNvbnRyYWN0LnJlY2VpdmVycy5tYXAociA9PiByLmFnZW50SWQpO1xuICAgICAgZXhwZWN0KHJlY2VpdmVySWRzKS50b0NvbnRhaW4oJ2RhbmEtZGF0YWJhc2UnKTtcbiAgICAgIGV4cGVjdChyZWNlaXZlcklkcykudG9Db250YWluKCdtYXJjdXMtYmFja2VuZCcpO1xuICAgICAgZXhwZWN0KHJlY2VpdmVySWRzKS50b0NvbnRhaW4oJ2phbWVzLWZyb250ZW5kJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNldCByZWNlaXZlciByb2xlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBjb25zdCBkYW5hUmVjZWl2ZXIgPSBjb250cmFjdC5yZWNlaXZlcnMuZmluZChyID0+IHIuYWdlbnRJZCA9PT0gJ2RhbmEtZGF0YWJhc2UnKTtcbiAgICAgIGNvbnN0IG1hcmN1c1JlY2VpdmVyID0gY29udHJhY3QucmVjZWl2ZXJzLmZpbmQociA9PiByLmFnZW50SWQgPT09ICdtYXJjdXMtYmFja2VuZCcpO1xuICAgICAgY29uc3QgamFtZXNSZWNlaXZlciA9IGNvbnRyYWN0LnJlY2VpdmVycy5maW5kKHIgPT4gci5hZ2VudElkID09PSAnamFtZXMtZnJvbnRlbmQnKTtcblxuICAgICAgZXhwZWN0KGRhbmFSZWNlaXZlcj8ucm9sZSkudG9CZSgnZGF0YWJhc2UnKTtcbiAgICAgIGV4cGVjdChtYXJjdXNSZWNlaXZlcj8ucm9sZSkudG9CZSgnYXBpJyk7XG4gICAgICBleHBlY3QoamFtZXNSZWNlaXZlcj8ucm9sZSkudG9CZSgnZnJvbnRlbmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2V0IGNvbnRyYWN0IGV4cGlyYXRpb24gdG8gMjQgaG91cnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0LmV4cGlyZXNBdCkudG9CZURlZmluZWQoKTtcblxuICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKGNvbnRyYWN0LmV4cGlyZXNBdCEpO1xuICAgICAgY29uc3QgZGlmZkhvdXJzID0gKGV4cGlyZXNBdC5nZXRUaW1lKCkgLSBub3cuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCk7XG5cbiAgICAgIGV4cGVjdChkaWZmSG91cnMpLnRvQmVDbG9zZVRvKDI0LCAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBmZWF0dXJlIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0LmNvbnRleHQuZmVhdHVyZT8ubmFtZSkudG9CZSgnVXNlciBBdXRoZW50aWNhdGlvbicpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LmNvbnRleHQuZmVhdHVyZT8uZGVzY3JpcHRpb24pLnRvQmUoXG4gICAgICAgICdJbXBsZW1lbnQgc2VjdXJlIHVzZXIgbG9naW4gYW5kIHNlc3Npb24gbWFuYWdlbWVudCdcbiAgICAgICk7XG4gICAgICBleHBlY3QoY29udHJhY3QuY29udGV4dC5mZWF0dXJlPy51c2VyU3RvcmllcykudG9IYXZlTGVuZ3RoKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIGJ1c2luZXNzIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0LmNvbnRleHQuYnVzaW5lc3M/LmdvYWxzKS50b0VxdWFsKFsnU2VjdXJlIGF1dGhlbnRpY2F0aW9uJywgJ0dvb2QgVVgnXSk7XG4gICAgICBleHBlY3QoY29udHJhY3QuY29udGV4dC5idXNpbmVzcz8uY29uc3RyYWludHMpLnRvRXF1YWwoW1xuICAgICAgICAnTXVzdCB1c2UgSldUJyxcbiAgICAgICAgJ011c3QgYmUgV0NBRyAyLjEgQUEgY29tcGxpYW50J1xuICAgICAgXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdGVjaG5pY2FsIGNvbnRleHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBidWlsZGVyLmFkZEVuZHBvaW50KHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9naW4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBleHBlY3QoY29udHJhY3QuY29udGV4dC50ZWNobmljYWw/LmFwaUNvbnRyYWN0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LmNvbnRleHQudGVjaG5pY2FsPy5kYXRhYmFzZVNjaGVtYSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0J1aWxkIGFuZCBWYWxpZGF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGJ1aWxkIGFuZCB2YWxpZGF0ZSBjb250cmFjdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLmFkZFRhYmxlKHtcbiAgICAgICAgICBuYW1lOiAndXNlcnMnLFxuICAgICAgICAgIGNvbHVtbnM6IFt7IG5hbWU6ICdpZCcsIHR5cGU6ICd1dWlkJywgbnVsbGFibGU6IGZhbHNlIH1dXG4gICAgICAgIH0pXG4gICAgICAgIC5hZGRFbmRwb2ludCh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgcGF0aDogJy9hcGkvYXV0aC9sb2dpbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMb2dpbidcbiAgICAgICAgfSlcbiAgICAgICAgLmFkZENvbXBvbmVudCh7XG4gICAgICAgICAgbmFtZTogJ0xvZ2luRm9ybScsXG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMb2dpbiBmb3JtJ1xuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYnVpbGRlci5idWlsZEFuZFZhbGlkYXRlKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY29udHJhY3QpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkYXRpb24pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LnZhbGlkYXRpb24udmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGlmIHZhbGlkYXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBEb24ndCBhZGQgYW55IGNvbXBvbmVudHMgKHdpbGwgZmFpbCB0aHJlZS10aWVyIHZhbGlkYXRpb24pXG4gICAgICBhd2FpdCBleHBlY3QoYnVpbGRlci5idWlsZEFuZFZhbGlkYXRlKCkpLnJlamVjdHMudG9UaHJvdygnQ29udHJhY3QgdmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1F1aWNrIEhlbHBlciBGdW5jdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSB0aHJlZS10aWVyIGhhbmRvZmYgdXNpbmcgaGVscGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBjcmVhdGVUaHJlZVRpZXJIYW5kb2ZmKHJlcXVpcmVtZW50cywge1xuICAgICAgICBlbmRwb2ludHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9naW4nLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdMb2dpbidcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHRhYmxlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd1c2VycycsXG4gICAgICAgICAgICBjb2x1bW5zOiBbeyBuYW1lOiAnaWQnLCB0eXBlOiAndXVpZCcsIG51bGxhYmxlOiBmYWxzZSB9XVxuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdMb2dpbkZvcm0nLFxuICAgICAgICAgICAgdHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luIGZvcm0nXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNvbnRyYWN0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNvbnRyYWN0LnR5cGUpLnRvQmUoJ3BhcmFsbGVsJyk7XG4gICAgICBleHBlY3QoY29udHJhY3QuYXBpQ29udHJhY3QuZW5kcG9pbnRzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoY29udHJhY3QuZGF0YWJhc2VTY2hlbWEudGFibGVzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoY29udHJhY3QudWlSZXF1aXJlbWVudHMuY29tcG9uZW50cykudG9IYXZlTGVuZ3RoKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgcHJvdmlkZWQgbWVtb3J5IHNuYXBzaG90IGluIGhlbHBlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbVNuYXBzaG90OiBNZW1vcnlTbmFwc2hvdCA9IHtcbiAgICAgICAgYWdlbnRJZDogJ2FsZXgtYmEnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIG1lbW9yeUZpbGVzOiB7fSxcbiAgICAgICAgY3JpdGljYWxQYXR0ZXJuczogW10sXG4gICAgICAgIGNvbnRleHRTdW1tYXJ5OiAnQ3VzdG9tJyxcbiAgICAgICAgZXN0aW1hdGVkVG9rZW5zOiAyMDAwXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGNyZWF0ZVRocmVlVGllckhhbmRvZmYocmVxdWlyZW1lbnRzLCB7XG4gICAgICAgIGVuZHBvaW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgcGF0aDogJy9hcGkvYXV0aC9sb2dpbicsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJ1xuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGFibGVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3VzZXJzJyxcbiAgICAgICAgICAgIGNvbHVtbnM6IFt7IG5hbWU6ICdpZCcsIHR5cGU6ICd1dWlkJywgbnVsbGFibGU6IGZhbHNlIH1dXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0xvZ2luRm9ybScsXG4gICAgICAgICAgICB0eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4gZm9ybSdcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG1lbW9yeVNuYXBzaG90OiBjdXN0b21TbmFwc2hvdFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjb250cmFjdC5tZW1vcnlTbmFwc2hvdC5lc3RpbWF0ZWRUb2tlbnMpLnRvQmUoMjAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IG9uIHZhbGlkYXRpb24gZmFpbHVyZSBpbiBoZWxwZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGNyZWF0ZVRocmVlVGllckhhbmRvZmYocmVxdWlyZW1lbnRzLCB7XG4gICAgICAgICAgZW5kcG9pbnRzOiBbXSxcbiAgICAgICAgICB0YWJsZXM6IFtdLFxuICAgICAgICAgIGNvbXBvbmVudHM6IFtdXG4gICAgICAgIH0pXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnQ29udHJhY3QgdmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VmZm9ydCBFc3RpbWF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHRvdGFsIGV4cGVjdGVkIGR1cmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlclxuICAgICAgICAuYWRkVGFibGUoe1xuICAgICAgICAgIG5hbWU6ICd1c2VycycsXG4gICAgICAgICAgY29sdW1uczogW3sgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfV1cbiAgICAgICAgfSlcbiAgICAgICAgLmFkZEVuZHBvaW50KHtcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICBwYXRoOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luJ1xuICAgICAgICB9KVxuICAgICAgICAuYWRkQ29tcG9uZW50KHtcbiAgICAgICAgICBuYW1lOiAnTG9naW5Gb3JtJyxcbiAgICAgICAgICB0eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0xvZ2luIGZvcm0nXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250cmFjdCA9IGF3YWl0IGJ1aWxkZXIuYnVpbGQoKTtcblxuICAgICAgY29uc3QgdG90YWxFZmZvcnQgPSBjb250cmFjdC53b3JrSXRlbXMucmVkdWNlKFxuICAgICAgICAoc3VtLCBpdGVtKSA9PiBzdW0gKyAoaXRlbS5lc3RpbWF0ZWRFZmZvcnQgfHwgMCksXG4gICAgICAgIDBcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChjb250cmFjdC5leHBlY3RlZE91dHB1dC5leHBlY3RlZER1cmF0aW9uKS50b0JlKHRvdGFsRWZmb3J0KTtcbiAgICAgIGV4cGVjdCh0b3RhbEVmZm9ydCkudG9CZSg1KTsgLy8gMS41IChEYW5hKSArIDIgKE1hcmN1cykgKyAxLjUgKEphbWVzKVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzY2FsZSBlZmZvcnQgd2l0aCBudW1iZXIgb2YgZW5kcG9pbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYnVpbGRlclxuICAgICAgICAuYWRkRW5kcG9pbnQoe1xuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIHBhdGg6ICcvYXBpL2F1dGgvbG9naW4nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9naW4nXG4gICAgICAgIH0pXG4gICAgICAgIC5hZGRFbmRwb2ludCh7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgcGF0aDogJy9hcGkvYXV0aC9sb2dvdXQnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTG9nb3V0J1xuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IG1hcmN1c1dvcmsgPSBjb250cmFjdC53b3JrSXRlbXMuZmluZCh3ID0+XG4gICAgICAgIHcuZGVzY3JpcHRpb24uaW5jbHVkZXMoJ0FQSSBlbmRwb2ludHMnKVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1hcmN1c1dvcms/LmVzdGltYXRlZEVmZm9ydCkudG9CZSg0KTsgLy8gMiBlbmRwb2ludHMgKiAyIGhvdXJzXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHNjYWxlIGVmZm9ydCB3aXRoIG51bWJlciBvZiB0YWJsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBidWlsZGVyXG4gICAgICAgIC5hZGRUYWJsZSh7XG4gICAgICAgICAgbmFtZTogJ3VzZXJzJyxcbiAgICAgICAgICBjb2x1bW5zOiBbeyBuYW1lOiAnaWQnLCB0eXBlOiAndXVpZCcsIG51bGxhYmxlOiBmYWxzZSB9XVxuICAgICAgICB9KVxuICAgICAgICAuYWRkVGFibGUoe1xuICAgICAgICAgIG5hbWU6ICdzZXNzaW9ucycsXG4gICAgICAgICAgY29sdW1uczogW3sgbmFtZTogJ2lkJywgdHlwZTogJ3V1aWQnLCBudWxsYWJsZTogZmFsc2UgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgYnVpbGRlci5idWlsZCgpO1xuXG4gICAgICBjb25zdCBkYW5hV29yayA9IGNvbnRyYWN0LndvcmtJdGVtcy5maW5kKHcgPT5cbiAgICAgICAgdy5kZXNjcmlwdGlvbi5pbmNsdWRlcygnZGF0YWJhc2Ugc2NoZW1hJylcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChkYW5hV29yaz8uZXN0aW1hdGVkRWZmb3J0KS50b0JlKDMpOyAvLyAyIHRhYmxlcyAqIDEuNSBob3Vyc1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzY2FsZSBlZmZvcnQgd2l0aCBudW1iZXIgb2YgY29tcG9uZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGJ1aWxkZXJcbiAgICAgICAgLmFkZENvbXBvbmVudCh7XG4gICAgICAgICAgbmFtZTogJ0xvZ2luRm9ybScsXG4gICAgICAgICAgdHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdMb2dpbiBmb3JtJ1xuICAgICAgICB9KVxuICAgICAgICAuYWRkQ29tcG9uZW50KHtcbiAgICAgICAgICBuYW1lOiAndXNlQXV0aCcsXG4gICAgICAgICAgdHlwZTogJ2hvb2snLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQXV0aCBob29rJ1xuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udHJhY3QgPSBhd2FpdCBidWlsZGVyLmJ1aWxkKCk7XG5cbiAgICAgIGNvbnN0IGphbWVzV29yayA9IGNvbnRyYWN0LndvcmtJdGVtcy5maW5kKHcgPT5cbiAgICAgICAgdy5kZXNjcmlwdGlvbi5pbmNsdWRlcygnVUkgY29tcG9uZW50cycpXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoamFtZXNXb3JrPy5lc3RpbWF0ZWRFZmZvcnQpLnRvQmUoMyk7IC8vIDIgY29tcG9uZW50cyAqIDEuNSBob3Vyc1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9