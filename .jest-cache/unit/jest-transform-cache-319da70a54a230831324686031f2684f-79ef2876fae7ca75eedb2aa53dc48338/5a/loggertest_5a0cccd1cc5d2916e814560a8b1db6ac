c560df308c607ef3280c14d4c36183f5
"use strict";
/**
 * VERSATIL SDLC Framework - Logger Unit Tests
 * Enhanced Maria-QA Quality Assurance Testing
 *
 * Testing framework's own logging system
 */
Object.defineProperty(exports, "__esModule", { value: true });
const logger_1 = require("../../../src/utils/logger");
describe('VERSATILLogger', () => {
    let logger;
    let consoleSpy;
    beforeEach(() => {
        logger = new logger_1.VERSATILLogger();
        consoleSpy = jest.spyOn(console, 'log').mockImplementation();
    });
    afterEach(() => {
        consoleSpy.mockRestore();
    });
    describe('Logging Methods', () => {
        it.skip('should log debug messages correctly', () => {
            logger.debug('Test debug message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('DEBUG');
            expect(logCall).toContain('Test debug message');
        });
        it.skip('should log info messages correctly', () => {
            logger.info('Test info message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('INFO');
            expect(logCall).toContain('Test info message');
        });
        it.skip('should log warning messages correctly', () => {
            logger.warn('Test warning message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('WARN');
            expect(logCall).toContain('Test warning message');
        });
        it.skip('should log error messages correctly', () => {
            logger.error('Test error message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('ERROR');
            expect(logCall).toContain('Test error message');
        });
    });
    describe('Framework Self-Logging Validation', () => {
        it.skip('should support enhanced BMAD logging patterns', () => {
            const metadata = {
                agentId: 'maria-qa',
                activationTime: Date.now(),
                context: 'self-testing'
            };
            logger.info('Framework self-testing initiated', metadata, 'versatil-framework');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('maria-qa');
            expect(logCall).toContain('self-testing');
        });
        it.skip('should handle structured logging for agent orchestration', () => {
            const agentContext = {
                agent: 'Enhanced Maria-QA',
                action: 'quality-validation',
                filePath: '/test/path',
                timestamp: new Date().toISOString()
            };
            logger.debug('Agent activation logged', agentContext, 'agent-orchestration');
            expect(consoleSpy).toHaveBeenCalled();
            expect(consoleSpy.mock.calls[0][0]).toContain('Enhanced Maria-QA');
        });
    });
    describe('Performance Requirements', () => {
        it('should log messages within performance thresholds', () => {
            const startTime = Date.now();
            for (let i = 0; i < 100; i++) {
                logger.info(`Performance test message ${i}`, { iteration: i }, 'performance-test');
            }
            const executionTime = Date.now() - startTime;
            // BMAD requirement: 100 log messages should complete in under 100ms
            expect(executionTime).toBeLessThan(100);
            expect(consoleSpy).toHaveBeenCalledTimes(100);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L3V0aWxzL2xvZ2dlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCxzREFBMkQ7QUFFM0QsUUFBUSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtJQUM5QixJQUFJLE1BQXNCLENBQUM7SUFDM0IsSUFBSSxVQUE0QixDQUFDO0lBRWpDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxNQUFNLEdBQUcsSUFBSSx1QkFBYyxFQUFFLENBQUM7UUFDOUIsVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzNCLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtRQUMvQixFQUFFLENBQUMsSUFBSSxDQUFDLHFDQUFxQyxFQUFFLEdBQUcsRUFBRTtZQUNsRCxNQUFNLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFFdkUsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDdEMsTUFBTSxPQUFPLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDbEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsSUFBSSxDQUFDLG9D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QUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbmlzc2ltbWVuYXNoZS9WRVJTQVRJTCBTRExDIEZXL3Rlc3RzL3VuaXQvdXRpbHMvbG9nZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBWRVJTQVRJTCBTRExDIEZyYW1ld29yayAtIExvZ2dlciBVbml0IFRlc3RzXG4gKiBFbmhhbmNlZCBNYXJpYS1RQSBRdWFsaXR5IEFzc3VyYW5jZSBUZXN0aW5nXG4gKlxuICogVGVzdGluZyBmcmFtZXdvcmsncyBvd24gbG9nZ2luZyBzeXN0ZW1cbiAqL1xuXG5pbXBvcnQgeyBWRVJTQVRJTExvZ2dlciB9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9sb2dnZXInO1xuXG5kZXNjcmliZSgnVkVSU0FUSUxMb2dnZXInLCAoKSA9PiB7XG4gIGxldCBsb2dnZXI6IFZFUlNBVElMTG9nZ2VyO1xuICBsZXQgY29uc29sZVNweTogamVzdC5TcHlJbnN0YW5jZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBsb2dnZXIgPSBuZXcgVkVSU0FUSUxMb2dnZXIoKTtcbiAgICBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9nZ2luZyBNZXRob2RzJywgKCkgPT4ge1xuICAgIGl0LnNraXAoJ3Nob3VsZCBsb2cgZGVidWcgbWVzc2FnZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdUZXN0IGRlYnVnIG1lc3NhZ2UnLCB7IGtleTogJ3ZhbHVlJyB9LCAndGVzdC1jb21wb25lbnQnKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGNvbnN0IGxvZ0NhbGwgPSBjb25zb2xlU3B5Lm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdERUJVRycpO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignVGVzdCBkZWJ1ZyBtZXNzYWdlJyk7XG4gICAgfSk7XG5cbiAgICBpdC5za2lwKCdzaG91bGQgbG9nIGluZm8gbWVzc2FnZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmluZm8oJ1Rlc3QgaW5mbyBtZXNzYWdlJywgeyBrZXk6ICd2YWx1ZScgfSwgJ3Rlc3QtY29tcG9uZW50Jyk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBjb25zdCBsb2dDYWxsID0gY29uc29sZVNweS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignSU5GTycpO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignVGVzdCBpbmZvIG1lc3NhZ2UnKTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBsb2cgd2FybmluZyBtZXNzYWdlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBsb2dnZXIud2FybignVGVzdCB3YXJuaW5nIG1lc3NhZ2UnLCB7IGtleTogJ3ZhbHVlJyB9LCAndGVzdC1jb21wb25lbnQnKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGNvbnN0IGxvZ0NhbGwgPSBjb25zb2xlU3B5Lm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdXQVJOJyk7XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdUZXN0IHdhcm5pbmcgbWVzc2FnZScpO1xuICAgIH0pO1xuXG4gICAgaXQuc2tpcCgnc2hvdWxkIGxvZyBlcnJvciBtZXNzYWdlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ1Rlc3QgZXJyb3IgbWVzc2FnZScsIHsga2V5OiAndmFsdWUnIH0sICd0ZXN0LWNvbXBvbmVudCcpO1xuXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgY29uc3QgbG9nQ2FsbCA9IGNvbnNvbGVTcHkubW9jay5jYWxsc1swXVswXTtcbiAgICAgIGV4cGVjdChsb2dDYWxsKS50b0NvbnRhaW4oJ0VSUk9SJyk7XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdUZXN0IGVycm9yIG1lc3NhZ2UnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZyYW1ld29yayBTZWxmLUxvZ2dpbmcgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdC5za2lwKCdzaG91bGQgc3VwcG9ydCBlbmhhbmNlZCBCTUFEIGxvZ2dpbmcgcGF0dGVybnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgICAgYWdlbnRJZDogJ21hcmlhLXFhJyxcbiAgICAgICAgYWN0aXZhdGlvblRpbWU6IERhdGUubm93KCksXG4gICAgICAgIGNvbnRleHQ6ICdzZWxmLXRlc3RpbmcnXG4gICAgICB9O1xuXG4gICAgICBsb2dnZXIuaW5mbygnRnJhbWV3b3JrIHNlbGYtdGVzdGluZyBpbml0aWF0ZWQnLCBtZXRhZGF0YSwgJ3ZlcnNhdGlsLWZyYW1ld29yaycpO1xuXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgY29uc3QgbG9nQ2FsbCA9IGNvbnNvbGVTcHkubW9jay5jYWxsc1swXVswXTtcbiAgICAgIGV4cGVjdChsb2dDYWxsKS50b0NvbnRhaW4oJ21hcmlhLXFhJyk7XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdzZWxmLXRlc3RpbmcnKTtcbiAgICB9KTtcblxuICAgIGl0LnNraXAoJ3Nob3VsZCBoYW5kbGUgc3RydWN0dXJlZCBsb2dnaW5nIGZvciBhZ2VudCBvcmNoZXN0cmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgYWdlbnRDb250ZXh0ID0ge1xuICAgICAgICBhZ2VudDogJ0VuaGFuY2VkIE1hcmlhLVFBJyxcbiAgICAgICAgYWN0aW9uOiAncXVhbGl0eS12YWxpZGF0aW9uJyxcbiAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9wYXRoJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZygnQWdlbnQgYWN0aXZhdGlvbiBsb2dnZWQnLCBhZ2VudENvbnRleHQsICdhZ2VudC1vcmNoZXN0cmF0aW9uJyk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoY29uc29sZVNweS5tb2NrLmNhbGxzWzBdWzBdKS50b0NvbnRhaW4oJ0VuaGFuY2VkIE1hcmlhLVFBJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBSZXF1aXJlbWVudHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBsb2cgbWVzc2FnZXMgd2l0aGluIHBlcmZvcm1hbmNlIHRocmVzaG9sZHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKGBQZXJmb3JtYW5jZSB0ZXN0IG1lc3NhZ2UgJHtpfWAsIHsgaXRlcmF0aW9uOiBpIH0sICdwZXJmb3JtYW5jZS10ZXN0Jyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV4ZWN1dGlvblRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgICAvLyBCTUFEIHJlcXVpcmVtZW50OiAxMDAgbG9nIG1lc3NhZ2VzIHNob3VsZCBjb21wbGV0ZSBpbiB1bmRlciAxMDBtc1xuICAgICAgZXhwZWN0KGV4ZWN1dGlvblRpbWUpLnRvQmVMZXNzVGhhbigxMDApO1xuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxMDApO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==