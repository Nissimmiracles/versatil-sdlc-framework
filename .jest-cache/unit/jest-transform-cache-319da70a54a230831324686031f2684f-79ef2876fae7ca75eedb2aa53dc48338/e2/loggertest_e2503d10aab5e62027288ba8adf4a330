c7172fa4e5632d795a7d5e293e33ed79
"use strict";
/**
 * VERSATIL SDLC Framework - Logger Unit Tests
 * Enhanced Maria-QA Quality Assurance Testing
 *
 * Testing framework's own logging system
 */
Object.defineProperty(exports, "__esModule", { value: true });
const logger_1 = require("../../../src/utils/logger");
describe('VERSATILLogger', () => {
    let logger;
    let consoleSpy;
    beforeEach(() => {
        logger = new logger_1.VERSATILLogger();
        consoleSpy = jest.spyOn(console, 'log').mockImplementation();
    });
    afterEach(() => {
        consoleSpy.mockRestore();
    });
    describe('Logging Methods', () => {
        it('should log debug messages correctly', () => {
            logger.debug('Test debug message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('DEBUG');
            expect(logCall).toContain('Test debug message');
        });
        it('should log info messages correctly', () => {
            logger.info('Test info message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('INFO');
            expect(logCall).toContain('Test info message');
        });
        it('should log warning messages correctly', () => {
            logger.warn('Test warning message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('WARN');
            expect(logCall).toContain('Test warning message');
        });
        it('should log error messages correctly', () => {
            logger.error('Test error message', { key: 'value' }, 'test-component');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('ERROR');
            expect(logCall).toContain('Test error message');
        });
    });
    describe('Framework Self-Logging Validation', () => {
        it('should support enhanced BMAD logging patterns', () => {
            const metadata = {
                agentId: 'maria-qa',
                activationTime: Date.now(),
                context: 'self-testing'
            };
            logger.info('Framework self-testing initiated', metadata, 'versatil-framework');
            expect(consoleSpy).toHaveBeenCalled();
            const logCall = consoleSpy.mock.calls[0][0];
            expect(logCall).toContain('maria-qa');
            expect(logCall).toContain('self-testing');
        });
        it('should handle structured logging for agent orchestration', () => {
            const agentContext = {
                agent: 'Enhanced Maria-QA',
                action: 'quality-validation',
                filePath: '/test/path',
                timestamp: new Date().toISOString()
            };
            logger.debug('Agent activation logged', agentContext, 'agent-orchestration');
            expect(consoleSpy).toHaveBeenCalled();
            expect(consoleSpy.mock.calls[0][0]).toContain('Enhanced Maria-QA');
        });
    });
    describe('Performance Requirements', () => {
        it('should log messages within performance thresholds', () => {
            const startTime = Date.now();
            for (let i = 0; i < 100; i++) {
                logger.info(`Performance test message ${i}`, { iteration: i }, 'performance-test');
            }
            const executionTime = Date.now() - startTime;
            // BMAD requirement: 100 log messages should complete in under 100ms
            expect(executionTime).toBeLessThan(100);
            expect(consoleSpy).toHaveBeenCalledTimes(100);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL25pc3NpbW1lbmFzaGUvVkVSU0FUSUwgU0RMQyBGVy90ZXN0cy91bml0L3V0aWxzL2xvZ2dlci50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCxzREFBMkQ7QUFFM0QsUUFBUSxDQUFDLGdCQUFnQixFQUFFLEdBQUcsRUFBRTtJQUM5QixJQUFJLE1BQXNCLENBQUM7SUFDM0IsSUFBSSxVQUE0QixDQUFDO0lBRWpDLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxNQUFNLEdBQUcsSUFBSSx1QkFBYyxFQUFFLENBQUM7UUFDOUIsVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLGtCQUFrQixFQUFFLENBQUM7SUFDL0QsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsVUFBVSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzNCLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtRQUMvQixFQUFFLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztZQUV2RSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUN0QyxNQUFNLE9BQU8sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxHQUFHLEVBQUU7WUFDNUMsTUFBTSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO1lBRXJFLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQ3RDLE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBQ2pELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxFQUFFLGdCQUFnQixDQUFDLENBQUM7WUFFeEUsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDdEMsTUFBTSxPQUFPLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDcEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO1lBQzdDLE1BQU0sQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsRUFBRSxHQUFHLEVBQUUsT0FBTyxFQUFFLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztZQUV2RSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUN0QyxNQUFNLE9BQU8sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLG1DQUFtQyxFQUFFLEdBQUcsRUFBRTtRQUNqRCxFQUFFLENBQUMsK0NBQStDLEVBQUUsR0FBRyxFQUFFO1lBQ3ZELE1BQU0sUUFBUSxHQUFHO2dCQUNmLE9BQU8sRUFBRSxVQUFVO2dCQUNuQixjQUFjLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDMUIsT0FBTyxFQUFFLGNBQWM7YUFDeEIsQ0FBQztZQUVGLE1BQU0sQ0FBQyxJQUFJLENBQUMsa0NBQWtDLEVBQUUsUUFBUSxFQUFFLG9CQUFvQixDQUFDLENBQUM7WUFFaEYsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDdEMsTUFBTSxPQUFPLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN0QyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDBEQUEwRCxFQUFFLEdBQUcsRUFBRTtZQUNsRSxNQUFNLFlBQVksR0FBRztnQkFDbkIsS0FBSyxFQUFFLG1CQUFtQjtnQkFDMUIsTUFBTSxFQUFFLG9CQUFvQjtnQkFDNUIsUUFBUSxFQUFFLFlBQVk7Z0JBQ3RCLFNBQVMsRUFBRSxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRTthQUNwQyxDQUFDO1lBRUYsTUFBTSxDQUFDLEtBQUssQ0FBQyx5QkFBeUIsRUFBRSxZQUFZLEVBQUUscUJBQXFCLENBQUMsQ0FBQztZQUU3RSxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUN0QyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUNyRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRTtRQUN4QyxFQUFFLENBQUMsbURBQW1ELEVBQUUsR0FBRyxFQUFFO1lBQzNELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUU3QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7Z0JBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFDckYsQ0FBQztZQUVELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxTQUFTLENBQUM7WUFFN0Msb0VBQW9FO1lBQ3BFLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbmlzc2ltbWVuYXNoZS9WRVJTQVRJTCBTRExDIEZXL3Rlc3RzL3VuaXQvdXRpbHMvbG9nZ2VyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBWRVJTQVRJTCBTRExDIEZyYW1ld29yayAtIExvZ2dlciBVbml0IFRlc3RzXG4gKiBFbmhhbmNlZCBNYXJpYS1RQSBRdWFsaXR5IEFzc3VyYW5jZSBUZXN0aW5nXG4gKlxuICogVGVzdGluZyBmcmFtZXdvcmsncyBvd24gbG9nZ2luZyBzeXN0ZW1cbiAqL1xuXG5pbXBvcnQgeyBWRVJTQVRJTExvZ2dlciB9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9sb2dnZXInO1xuXG5kZXNjcmliZSgnVkVSU0FUSUxMb2dnZXInLCAoKSA9PiB7XG4gIGxldCBsb2dnZXI6IFZFUlNBVElMTG9nZ2VyO1xuICBsZXQgY29uc29sZVNweTogamVzdC5TcHlJbnN0YW5jZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBsb2dnZXIgPSBuZXcgVkVSU0FUSUxMb2dnZXIoKTtcbiAgICBjb25zb2xlU3B5ID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9nZ2luZyBNZXRob2RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbG9nIGRlYnVnIG1lc3NhZ2VzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnVGVzdCBkZWJ1ZyBtZXNzYWdlJywgeyBrZXk6ICd2YWx1ZScgfSwgJ3Rlc3QtY29tcG9uZW50Jyk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBjb25zdCBsb2dDYWxsID0gY29uc29sZVNweS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignREVCVUcnKTtcbiAgICAgIGV4cGVjdChsb2dDYWxsKS50b0NvbnRhaW4oJ1Rlc3QgZGVidWcgbWVzc2FnZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgaW5mbyBtZXNzYWdlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbygnVGVzdCBpbmZvIG1lc3NhZ2UnLCB7IGtleTogJ3ZhbHVlJyB9LCAndGVzdC1jb21wb25lbnQnKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGNvbnN0IGxvZ0NhbGwgPSBjb25zb2xlU3B5Lm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdJTkZPJyk7XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdUZXN0IGluZm8gbWVzc2FnZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgd2FybmluZyBtZXNzYWdlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBsb2dnZXIud2FybignVGVzdCB3YXJuaW5nIG1lc3NhZ2UnLCB7IGtleTogJ3ZhbHVlJyB9LCAndGVzdC1jb21wb25lbnQnKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGNvbnN0IGxvZ0NhbGwgPSBjb25zb2xlU3B5Lm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdXQVJOJyk7XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdUZXN0IHdhcm5pbmcgbWVzc2FnZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBsb2cgZXJyb3IgbWVzc2FnZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgbG9nZ2VyLmVycm9yKCdUZXN0IGVycm9yIG1lc3NhZ2UnLCB7IGtleTogJ3ZhbHVlJyB9LCAndGVzdC1jb21wb25lbnQnKTtcblxuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGNvbnN0IGxvZ0NhbGwgPSBjb25zb2xlU3B5Lm1vY2suY2FsbHNbMF1bMF07XG4gICAgICBleHBlY3QobG9nQ2FsbCkudG9Db250YWluKCdFUlJPUicpO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignVGVzdCBlcnJvciBtZXNzYWdlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGcmFtZXdvcmsgU2VsZi1Mb2dnaW5nIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGVuaGFuY2VkIEJNQUQgbG9nZ2luZyBwYXR0ZXJucycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0ge1xuICAgICAgICBhZ2VudElkOiAnbWFyaWEtcWEnLFxuICAgICAgICBhY3RpdmF0aW9uVGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgY29udGV4dDogJ3NlbGYtdGVzdGluZydcbiAgICAgIH07XG5cbiAgICAgIGxvZ2dlci5pbmZvKCdGcmFtZXdvcmsgc2VsZi10ZXN0aW5nIGluaXRpYXRlZCcsIG1ldGFkYXRhLCAndmVyc2F0aWwtZnJhbWV3b3JrJyk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBjb25zdCBsb2dDYWxsID0gY29uc29sZVNweS5tb2NrLmNhbGxzWzBdWzBdO1xuICAgICAgZXhwZWN0KGxvZ0NhbGwpLnRvQ29udGFpbignbWFyaWEtcWEnKTtcbiAgICAgIGV4cGVjdChsb2dDYWxsKS50b0NvbnRhaW4oJ3NlbGYtdGVzdGluZycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc3RydWN0dXJlZCBsb2dnaW5nIGZvciBhZ2VudCBvcmNoZXN0cmF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgYWdlbnRDb250ZXh0ID0ge1xuICAgICAgICBhZ2VudDogJ0VuaGFuY2VkIE1hcmlhLVFBJyxcbiAgICAgICAgYWN0aW9uOiAncXVhbGl0eS12YWxpZGF0aW9uJyxcbiAgICAgICAgZmlsZVBhdGg6ICcvdGVzdC9wYXRoJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG5cbiAgICAgIGxvZ2dlci5kZWJ1ZygnQWdlbnQgYWN0aXZhdGlvbiBsb2dnZWQnLCBhZ2VudENvbnRleHQsICdhZ2VudC1vcmNoZXN0cmF0aW9uJyk7XG5cbiAgICAgIGV4cGVjdChjb25zb2xlU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoY29uc29sZVNweS5tb2NrLmNhbGxzWzBdWzBdKS50b0NvbnRhaW4oJ0VuaGFuY2VkIE1hcmlhLVFBJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBSZXF1aXJlbWVudHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBsb2cgbWVzc2FnZXMgd2l0aGluIHBlcmZvcm1hbmNlIHRocmVzaG9sZHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKGBQZXJmb3JtYW5jZSB0ZXN0IG1lc3NhZ2UgJHtpfWAsIHsgaXRlcmF0aW9uOiBpIH0sICdwZXJmb3JtYW5jZS10ZXN0Jyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV4ZWN1dGlvblRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgICAvLyBCTUFEIHJlcXVpcmVtZW50OiAxMDAgbG9nIG1lc3NhZ2VzIHNob3VsZCBjb21wbGV0ZSBpbiB1bmRlciAxMDBtc1xuICAgICAgZXhwZWN0KGV4ZWN1dGlvblRpbWUpLnRvQmVMZXNzVGhhbigxMDApO1xuICAgICAgZXhwZWN0KGNvbnNvbGVTcHkpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxMDApO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==